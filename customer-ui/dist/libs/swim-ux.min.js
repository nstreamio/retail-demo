// @swim/ux v4.0.0-dev.20220527.3 (c) 2015-2023 Swim.inc
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@swim/core"),require("@swim/core"),require("@swim/core"),require("@swim/ui"),require("@swim/ui"),require("@swim/ui"),require("@swim/ui"),require("@swim/ui"),require("@swim/core"),require("@swim/core"),require("@swim/ui"),require("@swim/ui")):"function"==typeof define&&define.amd?define(["exports","@swim/core","@swim/core","@swim/core","@swim/ui","@swim/ui","@swim/ui","@swim/ui","@swim/ui","@swim/core","@swim/core","@swim/ui","@swim/ui"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).swim=e.swim||{},e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim)}(this,(function(e,t,i,s,l,n,r,o,a,h,c,d,w){"use strict";function u(e,t,i,s,l,n){function r(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,a=s.kind,h="getter"===a?"get":"setter"===a?"set":"value",c=!t&&e?s.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,s.name):{}),w=!1,u=i.length-1;u>=0;u--){var v={};for(var p in s)v[p]="access"===p?{}:s[p];for(var p in s.access)v.access[p]=s.access[p];v.addInitializer=function(e){if(w)throw new TypeError("Cannot add initializers after decoration has completed");n.push(r(e||null))};var g=(0,i[u])("accessor"===a?{get:d.get,set:d.set}:d[h],v);if("accessor"===a){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(o=r(g.get))&&(d.get=o),(o=r(g.set))&&(d.set=o),(o=r(g.init))&&l.unshift(o)}else(o=r(g))&&("field"===a?l.unshift(o):d[h]=o)}c&&Object.defineProperty(c,s.name,d),w=!0}function v(e,t,i){for(var s=arguments.length>2,l=0;l<t.length;l++)i=s?t[l].call(e,i):t[l].call(e);return s?i:void 0}"function"==typeof SuppressedError&&SuppressedError;let p=(()=>{var e;let r,o,a=[],h=[],c=[];return e=class extends n.HtmlView{constructor(e){super(e),this.glowState=void v(this,a),this.left=v(this,h,void 0),this.opacity=v(this,c,void 0),this.glowState="ready",this.glowTimer=0,this.initGlow()}initGlow(){this.setIntrinsic({classList:["button-glow"],style:{position:"absolute",width:s.Length.zero(),height:s.Length.zero(),borderRadius:s.Length.pct(50),pointerEvents:"none"}})}didMount(){if(this.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){let e=this.getLookOr(l.Look.highlightColor,null);null!==e&&(e=e.alpha(1)),this.style.backgroundColor.setIntrinsic(e)}super.didMount()}onUnmount(){this.glowState="ready",this.cancelGlow(),this.remove(),super.onUnmount()}onApplyTheme(e,t,s){if(super.onApplyTheme(e,t,s),this.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){let i=e.getOr(l.Look.highlightColor,t,null);null!==i&&(i=i.alpha(1)),this.style.backgroundColor.setIntrinsic(i)}}glow(e,i,s,n=0){if("ready"!==this.glowState)return;if(this.cancelGlow(),0!==n){const t=this.glow.bind(this,e,i,s,0);return void(this.glowTimer=setTimeout(t,n))}s=void 0===s||!0===s?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(s),this.willGlow();const r=this.node.offsetParent;if(null===r)return;const o=r.getBoundingClientRect(),a=e-o.left,h=i-o.top,c=Math.max(a,o.width-a),d=Math.max(h,o.height-h),w=Math.sqrt(c*c+d*d),u=this.getLook(l.Look.highlightColor),v=void 0!==u?u.alpha():.1;this.style.opacity.setIntrinsic(v),!1!==s?(this.style.setIntrinsic({left:a,top:h}),this.style.setIntrinsic({left:a-w,top:h-w,width:2*w,height:2*w},s)):(this.style.setIntrinsic({left:a-w,top:h-w,width:2*w,height:2*w}),this.didGlow()),this.glowState="glowing"}willGlow(){}didGlow(){}cancelGlow(){0!==this.glowTimer&&(clearTimeout(this.glowTimer),this.glowTimer=0)}pulse(e,i,s){s=void 0===s||!0===s?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(s),"ready"===this.glowState&&this.glow(e,i,s),"glowing"===this.glowState&&(this.willPulse(),!1!==s?this.style.opacity.setIntrinsic(0,s):(this.style.opacity.setIntrinsic(0),this.didPulse()),this.glowState="pulsing")}willPulse(){}didPulse(){this.remove()}fade(e,i,s){"ready"===this.glowState?(this.cancelGlow(),this.didFade()):"glowing"===this.glowState&&(s=void 0===s||!0===s?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(s),this.willFade(),!1!==s?this.style.opacity.setIntrinsic(0,s):(this.style.opacity.setIntrinsic(0),this.didFade())),this.glowState="fading"}willFade(){}didFade(){this.remove()}},r=[i.Animator({inherits:!0,get parent(){return this.owner.style.left},didTransition(){this.owner.didGlow()}})],o=[i.Animator({inherits:!0,get parent(){return this.owner.style.opacity},didTransition(e){"pulsing"===this.owner.glowState&&0===e?this.owner.didPulse():"fading"===this.owner.glowState&&0===e&&this.owner.didFade()}})],u(null,null,r,{kind:"field",name:"left",static:!1,private:!1,access:{has:e=>"left"in e,get:e=>e.left,set:(e,t)=>{e.left=t}}},h,a),u(null,null,o,{kind:"field",name:"opacity",static:!1,private:!1,access:{has:e=>"opacity"in e,get:e=>e.opacity,set:(e,t)=>{e.opacity=t}}},c,a),e})(),g=(()=>{var e;let t,s,l=[],o=[],a=[];return e=class extends n.HtmlView{constructor(e){super(e),this.glows=(v(this,l),v(this,o,void 0)),this.gesture=v(this,a,void 0),this.initMembrane(e)}initMembrane(e){this.classList.add("membrane")}glow(e){if(e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0),void 0===e.detail){const t="mouse"===e.inputType?0:100;e.detail=this.prependChild(p),e.detail.glow(e.x,e.y,void 0,t)}}},t=[i.Property({valueType:Boolean,value:!0,inherits:!0})],s=[r.PositionGesture({bindsOwner:!0,didBeginPress(e,t){this.owner.glows.value&&this.owner.glow(e)},didMovePress(e,t){e.isRunaway()?this.cancelPress(e,t):this.owner.clientBounds.contains(e.x,e.y)||(e.clearHoldTimer(),this.beginHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didEndPress(e,t){this.owner.clientBounds.contains(e.x,e.y)?e.detail instanceof p&&e.detail.pulse(e.x,e.y):(this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didCancelPress(e,t){this.owner.clientBounds.contains(e.x,e.y)||this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0)}})],u(null,null,t,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}}},o,l),u(null,null,s,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}}},a,l),e})(),f=(()=>{var e;let n,h,c,d,w,p=[],f=[],y=[],b=[],m=[],V=[];return e=class extends g{constructor(e){super(e),this.buttonType=(v(this,p),v(this,f,void 0)),this.icons=v(this,y,void 0),this.icon=v(this,b,void 0),this.presence=v(this,m,void 0),this.gesture=v(this,V,void 0),this.initButton()}initButton(){this.setIntrinsic({classList:["floating-button"],style:{position:"relative",borderRadius:s.Length.pct(50),overflow:"hidden",userSelect:"none",cursor:"pointer"}})}onApplyTheme(e,t,i){super.onApplyTheme(e,t,i),this.style.backgroundColor.setIntrinsic(e.getOr(l.Look.accentColor,t,null),i);let s=e.getOr(l.Look.shadow,l.Mood.floating,null);if(null!==s){const e=s.color,t=this.presence.getPhaseOr(1);s=s.withColor(e.alpha(e.alpha()*t))}this.style.boxShadow.setIntrinsic(s,i)}onLayout(){super.onLayout();let e=this.getLookOr(l.Look.shadow,l.Mood.floating,null);if(null!==e){const t=e.color,i=this.presence.getPhaseOr(1);e=e.withColor(t.alpha(t.alpha()*i))}this.style.boxShadow.setIntrinsic(e)}},n=[i.Property({valueType:String,value:"regular",init(){this.updateButtonType(this.value)},didSetValue(e,t){e!==t&&this.updateButtonType(e)},updateButtonType(e){"regular"===e?this.owner.style.setIntrinsic({width:56,height:56}):"mini"===e&&this.owner.style.setIntrinsic({width:40,height:40})}})],h=[r.ViewSet({viewType:a.HtmlIconView,observes:!0,viewDidApplyTheme(e,t,i,s){const n=e.getOr(l.Look.backgroundColor,t,null);s.iconColor.set(n,i)},viewDidAnimate(e){e.style.opacity.tweening||e===this.owner.icon.view||this.deleteView(e)}})],c=[r.ViewRef({viewType:a.HtmlIconView,createView(){const e=a.HtmlIconView.create().setIntrinsic({style:{position:"absolute",left:0,top:0,width:this.owner.style.width.state,height:this.owner.style.height.state,opacity:0,transform:s.Transform.rotate(s.Angle.deg(-90)),pointerEvents:"none"},iconLayout:{width:24,height:24}});return e.iconColor.setAffinity(i.Affinity.Extrinsic),e},push(e,i){i=(void 0!==i||0!==this.owner.icons.viewCount)&&(void 0===i||!0===i?this.owner.getLookOr(l.Look.timing,!1):t.Timing.fromLike(i));const n=this.view;null!==n&&(!1!==i?n.style.setIntrinsic({opacity:0,transform:s.Transform.rotate(s.Angle.deg(90))},i):this.owner.icons.deleteView(n));const r=this.createView().setIntrinsic({graphics:e});return this.owner.icons.attachView(r),this.insertView(void 0,r),r.style.setIntrinsic({opacity:1,transform:s.Transform.rotate(s.Angle.deg(0))},i),r},pop(e){e=void 0===e||!0===e?this.owner.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e);const i=this.view;let n=null;const r=this.owner.icons.views;for(const e in r){const t=r[e];t!==i&&(n=t)}return null!==i&&(!1!==e?(i.style.setIntrinsic({opacity:0,transform:s.Transform.rotate(s.Angle.deg(-90))},e),this.owner.icons.insertView(void 0,i)):this.owner.icons.deleteView(i)),null!==n&&(this.insertView(void 0,n),n.style.setIntrinsic({opacity:1,transform:s.Transform.rotate(s.Angle.deg(0))},e)),i}})],d=[o.PresenceAnimator({inherits:!0})],w=[r.PositionGesture({extends:!0,didStartHovering(){if(this.owner.modifyMood(l.Feel.default,[[l.Feel.hovering,1]]),this.owner.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){const e=this.owner.getLook(l.Look.timing);this.owner.style.backgroundColor.setIntrinsic(this.owner.getLookOr(l.Look.accentColor,null),e)}},didStopHovering(){if(this.owner.modifyMood(l.Feel.default,[[l.Feel.hovering,void 0]]),this.owner.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){const e=this.owner.getLook(l.Look.timing);this.owner.style.backgroundColor.setIntrinsic(this.owner.getLookOr(l.Look.accentColor,null),e)}},didMovePress(e,t){}})],u(null,null,n,{kind:"field",name:"buttonType",static:!1,private:!1,access:{has:e=>"buttonType"in e,get:e=>e.buttonType,set:(e,t)=>{e.buttonType=t}}},f,p),u(null,null,h,{kind:"field",name:"icons",static:!1,private:!1,access:{has:e=>"icons"in e,get:e=>e.icons,set:(e,t)=>{e.icons=t}}},y,p),u(null,null,c,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}}},b,p),u(null,null,d,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}}},m,p),u(null,null,w,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}}},V,p),e})(),y=(()=>{var e;let t,i=[],s=[];return e=class extends n.HtmlView{constructor(e){super(e),this.presence=(v(this,i),v(this,s,void 0)),this.initButtonItem()}initButtonItem(){this.classList.add("button-item"),this.style.position.setIntrinsic("relative");const e=this.createButton();null!==e&&this.setChild("button",e)}createButton(){const e=f.create();return e.buttonType.setIntrinsic("mini"),e}get button(){const e=this.getChild("button");return e instanceof f?e:null}get icon(){const e=this.button,t=null!==e?e.icon:null;return null!==t?t.view:null}get label(){const e=this.getChild("label");return e instanceof n.HtmlView?e:null}onLayout(){super.onLayout();const e=this.presence.getPhaseOr(1),t=this.button;null!==t&&(this.style.width.setIntrinsic(t.style.width.state),this.style.height.setIntrinsic(t.style.height.state));const i=this.label;null!==i&&i.style.opacity.setIntrinsic(e)}onInsertChild(e,t){super.onInsertChild(e,t);const i=e.key;"button"===i&&e instanceof f?this.onInsertButton(e):"label"===i&&e instanceof n.HtmlView&&this.onInsertLabel(e)}onRemoveChild(e){const t=e.key;"button"===t&&e instanceof f?this.onRemoveButton(e):"label"===t&&e instanceof n.HtmlView&&this.onRemoveLabel(e),super.onRemoveChild(e)}onInsertButton(e){}onRemoveButton(e){}onInsertLabel(e){e.style.setIntrinsic({display:"block",position:"absolute",top:0,right:56,bottom:0,fontSize:17,fontWeight:"500",lineHeight:40,whiteSpace:"nowrap",color:l.Look.labelColor,opacity:this.presence.getPhaseOr(0)})}onRemoveLabel(e){}},t=[o.PresenceAnimator({inherits:!0})],u(null,null,t,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}}},s,i),e})(),b=(()=>{var e;let s,h,c,d,w,p,g,b,m,V,T,C,k=[],L=[],D=[],S=[],I=[],A=[],O=[],x=[],P=[],B=[],R=[],W=[],H=[];return e=class e extends n.HtmlView{constructor(e){super(e),this.stackHeight=(v(this,L),v(this,D,void 0)),this.buttonSpacing=v(this,S,void 0),this.itemSpacing=v(this,I,void 0),this.opacity=v(this,A,void 0),this.button=v(this,O,void 0),this.items=v(this,x,void 0),this.presence=v(this,P,void 0),this.modality=v(this,B,void 0),this.gesture=v(this,R,void 0),this.click=v(this,W,void 0),this.contextmenu=v(this,H,void 0),this.initButtonStack()}initButtonStack(){this.setIntrinsic({classList:["button-stack"],style:{display:"block",position:"relative",width:56,height:56,opacity:1,userSelect:"none",cursor:"pointer"}}),this.button.insertView()}get closeIcon(){return e.closeIcon}insertItem(e,t,i){void 0===t&&(t=this.node.childNodes.length-1),this.insertChild(e.node,this.node.childNodes[1+t]||null,i)}removeItems(){const e=this.node.childNodes;for(let t=e.length-1;t>=0;t-=1){const i=n.NodeView.get(e[t]);i instanceof y&&this.removeChild(i)}}onLayout(){super.onLayout(),this.layoutStack()}layoutStack(){const e=this.presence.getPhase(),t=this.node.childNodes,i=t.length,s=this.button.view;let l,r=i-1,o=0,a=0;null!==s?(s.style.zIndex.setIntrinsic(i),l=s.style.height.pxValue()):l=0;const h=this.buttonSpacing.value,c=this.itemSpacing.value;for(let s=0;s<i;s+=1){const i=n.NodeView.get(t[s]);if(i instanceof y){0===o?(a+=h,l+=h):(a+=c,l+=c);const t=i.style.height.pxValue();i.style.setIntrinsic({display:0===e?"none":"flex",bottom:e*l,zIndex:r}),l+=t,a+=t,o+=1,r-=1}}this.stackHeight.set(a)}show(e){1!==this.opacity.state&&(e=void 0===e||!0===e?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e),this.willShowStack(),!1!==e?this.opacity.setIntrinsic(1,e):(this.opacity.setIntrinsic(1),this.didShowStack()))}willShowStack(){this.callObservers("buttonStackWillShow",this),this.style.display.set("block")}didShowStack(){this.requireUpdate(r.View.NeedsLayout),this.callObservers("buttonStackDidShow",this)}hide(e){0!==this.opacity.state&&(e=void 0===e||!0===e?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e),this.willHideStack(),!1!==e?this.opacity.setIntrinsic(0,e):(this.opacity.setIntrinsic(0),this.didHideStack()))}willHideStack(){this.callObservers("buttonStackWillHide",this)}didHideStack(){this.style.display.set("none"),this.requireUpdate(r.View.NeedsLayout),this.callObservers("buttonStackDidHide",this)}static get closeIcon(){return a.VectorIcon.create(24,24,"M19,6.4L17.6,5L12,10.6L6.4,5L5,6.4L10.6,12L5,17.6L6.4,19L12,13.4L17.6,19L19,17.6L13.4,12Z")}},h=[i.Property({valueType:Number,value:0})],c=[l.ThemeAnimator({valueType:Number,value:28,updateFlags:r.View.NeedsLayout})],d=[l.ThemeAnimator({valueType:Number,value:20,updateFlags:r.View.NeedsLayout})],w=[i.Animator({inherits:!0,get parent(){return this.owner.style.opacity},didTransition(e){1===e?this.owner.didShowStack():0===e&&this.owner.didHideStack()}})],p=[r.ViewRef({viewType:f,viewKey:!0,binds:!0,willAttachView(e,t){e.presence.setIntrinsic(o.Presence.presented()),(this.owner.presence.presented||this.owner.presence.presenting)&&e.icon.push(this.owner.closeIcon)},initView(e){e.style.zIndex.setIntrinsic(0)}})],g=[r.ViewSet({viewType:y,binds:!0,willAttachView(e,t){e.style.setIntrinsic({position:"absolute",right:8,bottom:8,left:8,zIndex:0})}})],b=[o.PresenceAnimator({value:o.Presence.dismissed(),updateFlags:r.View.NeedsLayout,get transition(){return this.owner.getLookOr(l.Look.timing,null)},didSetValue(e){this.owner.callObservers("viewDidSetPresence",e,this.owner),this.owner.modality.setIntrinsic(e.phase)},willPresent(){this.owner.callObservers("viewWillPresent",this.owner);const e=this.owner.button.view;if(null!==e){const t=this.timing;e.icon.push(this.owner.closeIcon,null!==t?t:void 0)}this.owner.modal.present()},didPresent(){this.owner.callObservers("viewDidPresent",this.owner)},willDismiss(){this.owner.callObservers("viewWillDismiss",this.owner);const e=this.owner.button.view;if(null!==e&&e.icons.viewCount>1){const t=this.timing;e.icon.pop(null!==t?t:void 0)}},didDismiss(){this.owner.callObservers("viewDidDismiss",this.owner)}})],m=[i.Property({valueType:Number,value:0,didSetValue(e){this.owner.callObservers("viewDidSetModality",e,this.owner)}})],V=[r.PositionGesture({binds:!0,viewKey:"button",didMovePress(e,t){if(e.defaultPrevented||this.owner.presence.presented)return;const i=this.owner.stackHeight.value,s=Math.min(Math.max(0,-(e.y-e.y0)/(.5*i)),1);this.owner.presence.setPhase(s),s>.1&&(e.clearHoldTimer(),this.owner.presence.presenting||this.owner.presence.set(this.owner.presence.value.asPresenting()))},didEndPress(e,t){if(e.defaultPrevented)return;const i=this.owner.presence.getPhase();e.t-e.t0<e.holdDelay?i<.1||this.owner.presence.presented?this.owner.presence.dismiss():this.owner.presence.present():i<.5?this.owner.presence.dismiss():i>=.5&&this.owner.presence.present()},didCancelPress(e,t){2===e.buttons?this.owner.presence.toggle():this.owner.presence.getPhase()<.1||this.owner.presence.presented?this.owner.presence.dismiss():this.owner.presence.present()},didLongPress(e){e.preventDefault(),this.owner.presence.toggle()}})],T=[i.EventHandler({eventType:"click",handle(e){var t;e.target===(null===(t=this.owner.button.view)||void 0===t?void 0:t.node)&&e.stopPropagation()}})],C=[i.EventHandler({eventType:"contextmenu",handle(e){e.preventDefault()}})],s=[t.Lazy],u(e,null,s,{kind:"getter",name:"closeIcon",static:!0,private:!1,access:{has:e=>"closeIcon"in e,get:e=>e.closeIcon}},null,k),u(null,null,h,{kind:"field",name:"stackHeight",static:!1,private:!1,access:{has:e=>"stackHeight"in e,get:e=>e.stackHeight,set:(e,t)=>{e.stackHeight=t}}},D,L),u(null,null,c,{kind:"field",name:"buttonSpacing",static:!1,private:!1,access:{has:e=>"buttonSpacing"in e,get:e=>e.buttonSpacing,set:(e,t)=>{e.buttonSpacing=t}}},S,L),u(null,null,d,{kind:"field",name:"itemSpacing",static:!1,private:!1,access:{has:e=>"itemSpacing"in e,get:e=>e.itemSpacing,set:(e,t)=>{e.itemSpacing=t}}},I,L),u(null,null,w,{kind:"field",name:"opacity",static:!1,private:!1,access:{has:e=>"opacity"in e,get:e=>e.opacity,set:(e,t)=>{e.opacity=t}}},A,L),u(null,null,p,{kind:"field",name:"button",static:!1,private:!1,access:{has:e=>"button"in e,get:e=>e.button,set:(e,t)=>{e.button=t}}},O,L),u(null,null,g,{kind:"field",name:"items",static:!1,private:!1,access:{has:e=>"items"in e,get:e=>e.items,set:(e,t)=>{e.items=t}}},x,L),u(null,null,b,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}}},P,L),u(null,null,m,{kind:"field",name:"modality",static:!1,private:!1,access:{has:e=>"modality"in e,get:e=>e.modality,set:(e,t)=>{e.modality=t}}},B,L),u(null,null,V,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}}},R,L),u(null,null,T,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}}},W,L),u(null,null,C,{kind:"field",name:"contextmenu",static:!1,private:!1,access:{has:e=>"contextmenu"in e,get:e=>e.contextmenu,set:(e,t)=>{e.contextmenu=t}}},H,L),v(e,k),e})(),m=(()=>{var e;let n,h,c,d,w,p,f,y,b=[],m=[],V=[],T=[],C=[],k=[],L=[],D=[],S=[];return e=class extends g{constructor(e){super(e),this.iconLayout=(v(this,b),v(this,m,void 0)),this.iconColor=v(this,V,void 0),this.graphics=v(this,T,void 0),this.icons=v(this,C,void 0),this.icon=v(this,k,void 0),this.hovers=v(this,L,void 0),this.gesture=v(this,D,void 0),this.click=v(this,S,void 0),this.initButton(),this.initTheme()}initButton(){this.setIntrinsic({classList:["icon-button"],style:{position:"relative",width:44,height:44,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:4,overflow:"hidden",userSelect:"none",cursor:"pointer"}})}initTheme(){this.modifyTheme(l.Feel.default,[[l.Feel.translucent,1]])}onApplyTheme(e,t,s){if(super.onApplyTheme(e,t,s),this.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){let e=this.getLookOr(l.Look.backgroundColor,null);!this.gesture.hovering&&e instanceof o.Color&&(e=e.alpha(0)),this.style.backgroundColor.setIntrinsic(e,s)}if(!this.graphics.derived){const i=this.graphics.value;if(i instanceof a.Icon){const l=i.withTheme(e,t);this.graphics.setIntrinsic(l,!!i.isThemed()&&s)}}}onResize(){super.onResize(),this.requireUpdate(r.View.NeedsLayout)}},n=[i.Animator({valueType:a.IconLayout,initValue:()=>a.IconLayout.of(24,24),updateFlags:r.View.NeedsLayout})],h=[l.ThemeAnimator({valueType:o.Color,value:null,updateFlags:r.View.NeedsLayout,didSetState(e){const t=null!==this.timing&&this.timing;this.owner.graphics.setIntrinsic(this.owner.graphics.state,t)}})],c=[l.ThemeAnimator({extends:a.IconGraphicsAnimator,valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout})],d=[r.ViewSet({viewType:a.SvgIconView,observes:!0,viewDidApplyTheme(e,t,i,s){const n=e.getOr(l.Look.backgroundColor,t,null);s.iconColor.set(n,i)},viewDidAnimate(e){e.attributes.opacity.tweening||e===this.owner.icon.view||this.deleteView(e)},viewWillLayout(e){const t=this.owner.style.width.pxValue(),i=this.owner.style.height.pxValue();e.attributes.setIntrinsic({width:t,height:i,viewBox:"0 0 "+t+" "+i})}})],w=[r.ViewRef({viewType:a.SvgIconView,createView(){const e=a.SvgIconView.create().setIntrinsic({attributes:{opacity:0,pointerEvents:"none"},style:{position:"absolute",left:0,top:0,transform:s.Transform.rotate(s.Angle.deg(-90))}});return e.iconLayout.setInherits(!0),e.iconColor.setInherits(!0),e},push(e,i){i=(void 0!==i||0!==this.owner.icons.viewCount)&&(void 0===i||!0===i?this.owner.getLookOr(l.Look.timing,!1):t.Timing.fromLike(i));const n=this.view;null!==n&&(!1!==i?n.attributes.setIntrinsic({opacity:0,transform:s.Transform.rotate(s.Angle.deg(90))},i):this.owner.icons.deleteView(n));const r=this.createView().setIntrinsic({graphics:e});return this.owner.icons.attachView(r),this.insertView(void 0,r),r.attributes.setIntrinsic({opacity:1,transform:s.Transform.rotate(s.Angle.deg(0))},i),r},pop(e){e=void 0===e||!0===e?this.owner.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e);const i=this.view;let n=null;const r=this.owner.icons.views;for(const e in r){const t=r[e];t!==i&&(n=t)}return null!==i&&(!1!==e?(i.attributes.setIntrinsic({opacity:0,transform:s.Transform.rotate(s.Angle.deg(-90))},e),this.owner.icons.insertView(void 0,i)):this.owner.icons.deleteView(i)),null!==n&&(this.insertView(void 0,n),n.attributes.setIntrinsic({opacity:1,transform:s.Transform.rotate(s.Angle.deg(0))},e)),i}})],p=[i.Property({valueType:Boolean,value:!0})],f=[r.PositionGesture({extends:!0,didStartHovering(){if(this.owner.hovers.value){this.owner.modifyMood(l.Feel.default,[[l.Feel.hovering,1]]);const e=this.owner.getLook(l.Look.timing);this.owner.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)&&this.owner.style.backgroundColor.setIntrinsic(this.owner.getLookOr(l.Look.backgroundColor,null),e)}},didStopHovering(){this.owner.modifyMood(l.Feel.default,[[l.Feel.hovering,void 0]]);const e=this.owner.getLook(l.Look.timing);if(this.owner.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){let t=this.owner.getLookOr(l.Look.backgroundColor,null);null!==t&&(t=t.alpha(0)),this.owner.style.backgroundColor.setIntrinsic(t,e)}}})],y=[i.EventHandler({eventType:"click",handle(e){e.stopPropagation(),this.owner.callObservers("buttonDidPress",this.owner)}})],u(null,null,n,{kind:"field",name:"iconLayout",static:!1,private:!1,access:{has:e=>"iconLayout"in e,get:e=>e.iconLayout,set:(e,t)=>{e.iconLayout=t}}},m,b),u(null,null,h,{kind:"field",name:"iconColor",static:!1,private:!1,access:{has:e=>"iconColor"in e,get:e=>e.iconColor,set:(e,t)=>{e.iconColor=t}}},V,b),u(null,null,c,{kind:"field",name:"graphics",static:!1,private:!1,access:{has:e=>"graphics"in e,get:e=>e.graphics,set:(e,t)=>{e.graphics=t}}},T,b),u(null,null,d,{kind:"field",name:"icons",static:!1,private:!1,access:{has:e=>"icons"in e,get:e=>e.icons,set:(e,t)=>{e.icons=t}}},C,b),u(null,null,w,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}}},k,b),u(null,null,p,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}}},L,b),u(null,null,f,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}}},D,b),u(null,null,y,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}}},S,b),e})(),V=(()=>{var e;let t,a,h,c=[],d=[],w=[],p=[];return e=class extends n.HtmlView{constructor(e){super(e),this.disclosure=(v(this,c),v(this,d,void 0)),this.collapsedColor=v(this,w,void 0),this.expandedColor=v(this,p,void 0),this.initDisclosureButton()}initDisclosureButton(){this.setIntrinsic({classList:["disclosure-button"],style:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1,flexShrink:0,cursor:"pointer"}});this.appendChild(n.SvgView,"icon").attributes.setIntrinsic({width:24,height:24,viewBox:"0 0 24 24"}).appendChild("polygon","arrow").attributes.setIntrinsic({points:"0 4 -6 -2 -4.59 -3.41 0 1.17 4.59 -3.41 6 -2",transform:s.Transform.translate(12,12).rotate(s.Angle.deg(0))})}get icon(){return this.getChild("icon")}get arrow(){return this.icon.getChild("arrow")}needsDisplay(e){return 0==(this.flags&r.View.NeedsLayout)&&(e&=~r.View.NeedsLayout),e}onLayout(){super.onLayout();const e=this.disclosure.getPhaseOr(1),t=this.collapsedColor.value,l=this.expandedColor.value;if(null!==t&&null!==l&&this.arrow.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=t.interpolateTo(l);this.arrow.attributes.fill.setIntrinsic(i(e))}const n=s.Transform.translate(12,12).rotate(s.Angle.deg(-180*e));this.arrow.attributes.transform.setIntrinsic(n)}},t=[o.ExpansionAnimator({inherits:!0,updateFlags:r.View.NeedsLayout})],a=[l.ThemeAnimator({valueType:o.Color,look:l.Look.textColor,inherits:!0,updateFlags:r.View.NeedsLayout})],h=[l.ThemeAnimator({valueType:o.Color,look:l.Look.accentColor,inherits:!0,updateFlags:r.View.NeedsLayout})],u(null,null,t,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}}},d,c),u(null,null,a,{kind:"field",name:"collapsedColor",static:!1,private:!1,access:{has:e=>"collapsedColor"in e,get:e=>e.collapsedColor,set:(e,t)=>{e.collapsedColor=t}}},w,c),u(null,null,h,{kind:"field",name:"expandedColor",static:!1,private:!1,access:{has:e=>"expandedColor"in e,get:e=>e.expandedColor,set:(e,t)=>{e.expandedColor=t}}},p,c),e})();class T{constructor(e,t,i,s,l,n,r,o,a,h,c,d,w,u,v){this.key=e,this.grow=t,this.shrink=i,this.basis=s,this.align=l,this.inAlign=n,this.outAlign=r,this.overlap=o,this.overpad=a,this.presence=h,this.inPresence=c,this.outPresence=d,this.width=w,this.left=u,this.right=v}withKey(e){return this.copy(e,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,this.overlap,this.overpad,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withFlex(e,t,i){return i=void 0!==i?s.Length.fromLike(i):this.basis,this.copy(this.key,e,t,i,this.align,this.inAlign,this.outAlign,this.overlap,this.overpad,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withAlign(e,t,i){return void 0===t&&(t=this.inAlign),void 0===i&&(i=this.outAlign),this.copy(this.key,this.grow,this.shrink,this.basis,e,t,i,this.overlap,this.overpad,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withOverlap(e){return this.copy(this.key,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,e,this.overpad,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withOverpad(e){return e=s.Length.fromLike(e),this.copy(this.key,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,this.overlap,e,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withPresence(e,t,i){return e=void 0===e?this.presence:o.Presence.fromLike(e),t=void 0===t?this.inPresence:o.Presence.fromLike(t),i=void 0===i?this.outPresence:o.Presence.fromLike(i),this.copy(this.key,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,this.overlap,this.overpad,e,t,i,this.width,this.left,this.right)}resized(e,t,i){return null!==e&&(e=s.Length.fromLike(e)),null!==t&&(t=s.Length.fromLike(t)),null!==i&&(i=s.Length.fromLike(i)),this.copy(this.key,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,this.overlap,this.overpad,this.presence,this.inPresence,this.outPresence,e,t,i)}copy(e,t,i,s,l,n,r,o,a,h,c,d,w,u,v){return new T(e,t,i,s,l,n,r,o,a,h,c,d,w,u,v)}interpolateTo(e){return e instanceof T?C(this,e):null}equivalentTo(e,i){return this===e||e instanceof T&&(this.key===e.key&&t.Equivalent(this.grow,e.grow,i)&&t.Equivalent(this.shrink,e.shrink,i)&&this.basis.equivalentTo(e.basis,i)&&t.Equivalent(this.align,e.align,i)&&t.Equivalent(this.inAlign,e.inAlign,i)&&t.Equivalent(this.outAlign,e.outAlign,i)&&this.overlap===e.overlap&&this.overpad.equivalentTo(e.overpad,i)&&this.presence.equivalentTo(e.presence,i)&&t.Equivalent(this.inPresence,e.inPresence,i)&&t.Equivalent(this.outPresence,e.outPresence,i))}equals(e){return this===e||e instanceof T&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equals(e.basis)&&this.align===e.align&&this.inAlign===e.inAlign&&this.outAlign===e.outAlign&&this.overlap===e.overlap&&this.overpad.equals(e.overpad)&&this.presence.equals(e.presence)&&t.Equals(this.inPresence,e.inPresence)&&t.Equals(this.outPresence,e.outPresence)&&t.Equals(this.width,e.width)&&t.Equals(this.left,e.left)&&t.Equals(this.right,e.right))}debug(e){return e=e.write("ToolLayout").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis).write(41),.5===this.align&&this.inAlign===this.align&&this.outAlign===this.align||(e=e.write(46).write("withAlign").write(40).debug(this.align).write(", ").debug(this.inAlign).write(", ").debug(this.outAlign).write(41)),void 0!==this.overlap&&(e=e.write(46).write("withOverlap").write(40).debug(this.overlap).write(41)),this.overpad.equals(s.Length.zero())||(e=e.write(46).write("withOverpad").write(40).debug(this.overpad).write(41)),this.presence.presented&&null!==this.inPresence&&this.inPresence.dismissed&&null!==this.outPresence&&this.outPresence.dismissed||(e=e.write(46).write("withPresence").write(40).debug(this.presence).write(", ").debug(this.inPresence).write(", ").debug(this.outPresence).write(41)),null===this.width&&null===this.left&&null===this.right||(e=e.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(41)),e}toString(){return h.Format.debug(this)}static create(e,t,i,l,n,r,a,h,c,d,w,u){return void 0===t&&(t=0),void 0===i&&(i=1),l=void 0!==l?s.Length.fromLike(l):s.Length.zero(),void 0===n&&(n=.5),void 0===r&&(r=n),void 0===a&&(a=n),c=void 0!==c?s.Length.fromLike(c):s.Length.zero(),d=void 0!==d?o.Presence.fromLike(d):o.Presence.presented(),w=void 0===w?o.Presence.dismissed():o.Presence.fromLike(w),u=void 0===u?o.Presence.dismissed():o.Presence.fromLike(u),new T(e,t,i,l,n,r,a,h,c,d,w,u,null,null,null)}static fromLike(e){if(null==e||e instanceof T)return e;if("object"==typeof e&&null!==e)return T.fromInit(e);throw new TypeError(""+e)}static fromInit(e){let t=e.key;void 0===t&&(t="");let i=e.grow;void 0===i&&(i=0);let l=e.shrink;void 0===l&&(l=1);let n=e.basis;n=void 0!==n?s.Length.fromLike(n):s.Length.zero();let r=e.align;void 0===r&&(r=.5);let a=e.inAlign;void 0===a&&(a=r);let h=e.outAlign;void 0===h&&(h=r);const c=e.overlap;let d=e.overpad;d=void 0!==d?s.Length.fromLike(d):s.Length.zero();let w=e.presence;w=void 0!==w?o.Presence.fromLike(w):o.Presence.presented();let u=e.inPresence;u=void 0===u?o.Presence.presented():o.Presence.fromLike(u);let v=e.outPresence;v=void 0===v?o.Presence.presented():o.Presence.fromLike(v);let p=e.width;p=null!=p?s.Length.fromLike(p):null;let g=e.left;g=null!=g?s.Length.fromLike(g):null;let f=e.right;return f=null!=f?s.Length.fromLike(f):null,new T(t,i,l,n,r,a,h,c,d,w,u,v,p,g,f)}}const C=function(e){const i=function(e,l){const n=function(e){const t=n.key,i=n.growInterpolator(e),s=n.shrinkInterpolator(e),l=n.basisInterpolator(e),r=n.alignInterpolator(e),o=n.inAlignInterpolator(e),a=n.outAlignInterpolator(e),h=n.overlapInterpolator(0===e?0:1),c=n.overpadInterpolator(e),d=n.presenceInterpolator(e),w=n.inPresenceInterpolator(e),u=n.outPresenceInterpolator(e),v=n.widthInterpolator(e),p=n.leftInterpolator(e),g=n.rightInterpolator(e);return new T(t,i,s,l,r,o,a,h,c,d,w,u,v,p,g)};Object.setPrototypeOf(n,i.prototype),n.key=l.key,n.growInterpolator=t.Interpolator(e.grow,l.grow),n.shrinkInterpolator=t.Interpolator(e.shrink,l.shrink),n.basisInterpolator=e.basis.interpolateTo(l.basis),n.alignInterpolator=t.Interpolator(e.align,l.align),n.inAlignInterpolator=t.Interpolator(e.inAlign,l.inAlign),n.outAlignInterpolator=t.Interpolator(e.outAlign,l.outAlign),n.overlapInterpolator=t.Interpolator(e.overlap,l.overlap),n.overpadInterpolator=e.overpad.interpolateTo(l.overpad),n.presenceInterpolator=e.presence.interpolateTo(l.presence),n.inPresenceInterpolator=t.Interpolator(e.inPresence,l.inPresence),n.outPresenceInterpolator=t.Interpolator(e.outPresence,l.outPresence);const r=e.width,o=l.width;if(e.align!==l.align&&r instanceof s.PxLength&&o instanceof s.PxLength){const e=r.value<o.value?0:1;n.widthInterpolator=t.StepInterpolator(r,o,e)}else n.widthInterpolator=t.Interpolator(r,o);return n.leftInterpolator=t.Interpolator(e.left,l.left),n.rightInterpolator=t.Interpolator(e.right,l.right),n};return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,0,{get(){const e=this.key,t=this.growInterpolator[0],i=this.shrinkInterpolator[0],s=this.basisInterpolator[0],l=this.alignInterpolator[0],n=this.inAlignInterpolator[0],r=this.outAlignInterpolator[0],o=this.overlapInterpolator[0],a=this.overpadInterpolator[0],h=this.presenceInterpolator[0],c=this.inPresenceInterpolator[0],d=this.outPresenceInterpolator[0],w=this.widthInterpolator[0],u=this.leftInterpolator[0],v=this.rightInterpolator[0];return new T(e,t,i,s,l,n,r,o,a,h,c,d,w,u,v)},configurable:!0}),Object.defineProperty(i.prototype,1,{get(){const e=this.key,t=this.growInterpolator[1],i=this.shrinkInterpolator[1],s=this.basisInterpolator[1],l=this.alignInterpolator[1],n=this.inAlignInterpolator[1],r=this.outAlignInterpolator[1],o=this.overlapInterpolator[1],a=this.overpadInterpolator[1],h=this.presenceInterpolator[1],c=this.inPresenceInterpolator[1],d=this.outPresenceInterpolator[1],w=this.widthInterpolator[1],u=this.leftInterpolator[1],v=this.rightInterpolator[1];return new T(e,t,i,s,l,n,r,o,a,h,c,d,w,u,v)},configurable:!0}),i.prototype.equals=function(e){return this===e||e instanceof i&&(this.key===e.key&&this.growInterpolator.equals(e.growInterpolator)&&this.shrinkInterpolator.equals(e.shrinkInterpolator)&&this.basisInterpolator.equals(e.basisInterpolator)&&this.alignInterpolator.equals(e.alignInterpolator)&&this.inAlignInterpolator.equals(e.inAlignInterpolator)&&this.outAlignInterpolator.equals(e.outAlignInterpolator)&&this.overlapInterpolator.equals(e.overlapInterpolator)&&this.overpadInterpolator.equals(e.overpadInterpolator)&&this.presenceInterpolator.equals(e.presenceInterpolator)&&this.inPresenceInterpolator.equals(e.inPresenceInterpolator)&&this.outPresenceInterpolator.equals(e.outPresenceInterpolator)&&this.widthInterpolator.equals(e.widthInterpolator)&&this.leftInterpolator.equals(e.leftInterpolator)&&this.rightInterpolator.equals(e.rightInterpolator))},i}(t.Interpolator);class k{constructor(e,t,i,s,l){this.width=e,this.left=t,this.right=i,this.spacing=s,this.tools=l}getTool(e){const t=this.tools;for(let i=0;i<t.length;i+=1){const s=t[i];if(e===s.key)return s}return null}resized(e,i,l,n){if(e=s.Length.fromLike(e),void 0===i?i=this.left:null!==i&&(i=s.Length.fromLike(i)),void 0===l?l=this.right:null!==l&&(l=s.Length.fromLike(l)),void 0===n?n=this.spacing:null!==n&&(n=s.Length.fromLike(n)),t.Equals(this.width,e)&&t.Equals(this.left,i)&&t.Equals(this.right,l)&&t.Equals(this.spacing,n))return this;{const t=this.tools,s=t.length,r=new Array(s),o=e.pxValue(),a=null!==i?i.pxValue(o):0,h=null!==l?l.pxValue(o):0,c=null!==n?n.pxValue(o):0;let d=0,w=0,u=a+h,v=a,p=0;for(let e=0;e<s;e+=1){const i=t[e];0!==p&&(u+=c,v+=c);const s=i.basis.pxValue(o);r[e]=i.resized(s,v,o-s-v),d+=i.grow,w+=i.shrink,u+=s,v+=s,p+=1}if(u<o&&d>0){const e=o-u;let t=a,i=0;for(let l=0;l<s;l+=1){const s=r[l];0!==i&&(t+=c);const n=s.basis.pxValue(o)+e*(s.grow/d);r[l]=s.resized(n,t,o-n-t),t+=n,i+=1}}else if(u>o&&w>0){const e=u-o;let t=a,i=0;for(let l=0;l<s;l+=1){const s=r[l];0!==i&&(t+=c);const n=s.basis.pxValue(o)-e*(s.shrink/w);r[l]=s.resized(n,t,o-n-t),t+=n,i+=1}}return new k(e,i,l,n,r)}}interpolateTo(e){return e instanceof k?L(this,e):null}equivalentTo(e,t){if(this===e)return!0;if(e instanceof k){const i=this.tools,s=e.tools,l=i.length;if(l===s.length){for(let e=0;e<l;e+=1)if(!i[e].equivalentTo(s[e],t))return!1;return!0}}return!1}equals(e){return this===e||e instanceof k&&(t.Equals(this.width,e.width)&&t.Equals(this.left,e.left)&&t.Equals(this.right,e.right)&&t.Equals(this.spacing,e.spacing)&&t.Arrays.equal(this.tools,e.tools))}debug(e){e=e.write("BarLayout").write(46).write("of").write(40);for(let t=0;t<this.tools.length;t+=1)0!==t&&(e=e.write(", ")),e=e.debug(this.tools[t]);return e=e.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.spacing||(e=e.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.spacing).write(41)),e}toString(){return h.Format.debug(this)}static of(...e){const t=e.length,i=new Array(t);for(let s=0;s<t;s+=1)i[s]=T.fromLike(e[s]);return new k(null,null,null,null,i)}static create(e){return new k(null,null,null,null,e)}static fromLike(e){if(null==e||e instanceof k)return e;if("object"==typeof e&&null!==e)return k.fromInit(e);throw new TypeError(""+e)}static fromInit(e){let t=e.width;t=null!=t?s.Length.fromLike(t):null;let i=e.left;i=null!=i?s.Length.fromLike(i):null;let l=e.right;l=null!=l?s.Length.fromLike(l):null;let n=e.spacing;n=null!=n?s.Length.fromLike(n):null;const r=e.tools.length,o=new Array(r);for(let t=0;t<r;t+=1)o[t]=T.fromLike(e.tools[t]);return new k(t,i,l,n,o)}}const L=function(e){const i=function(e,s){const l=function(e){const t=l.widthInterpolator(e),i=l.leftInterpolator(e),s=l.rightInterpolator(e),n=l.spacingInterpolator(e),r=l.toolInterpolators,o=new Array;for(let t=0;t<r.length;t+=1)o.push(r[t](e));return new k(t,i,s,n,o)};Object.setPrototypeOf(l,i.prototype),l.widthInterpolator=t.Interpolator(e.width,s.width),l.leftInterpolator=t.Interpolator(e.left,s.left),l.rightInterpolator=t.Interpolator(e.right,s.right),l.spacingInterpolator=t.Interpolator(e.spacing,s.spacing);const n=e.tools,r=s.tools,a=new Array;for(let e=0;e<n.length;e+=1){let t=n[e],i=s.getTool(t.key);null!==i||t.presence.dismissed||null===t.outPresence?null!==i&&t.presence.dismissed&&(t=t.withPresence(t.presence.asPresenting())):(i=t.withPresence(t.outPresence),i=i.withAlign(i.outAlign),t=t.withPresence(t.presence.asDismissing())),null!==i&&a.push(t.interpolateTo(i))}for(let t=0;t<r.length;t+=1){let i=r[t],s=e.getTool(i.key);if(null===s){const e=null!==i.inPresence?i.inPresence:i.presence;s=i.withPresence(e.asPresenting()),i=i.withPresence(o.Presence.presented()),s=s.withAlign(s.inAlign),a.push(s.interpolateTo(i))}}return l.toolInterpolators=a,l};return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,0,{get(){const e=this.widthInterpolator[0],t=this.leftInterpolator[0],i=this.rightInterpolator[0],s=this.spacingInterpolator[0],l=this.toolInterpolators,n=new Array;for(let e=0;e<l.length;e+=1)n.push(l[e][0]);return new k(e,t,i,s,n)},configurable:!0}),Object.defineProperty(i.prototype,1,{get(){const e=this.widthInterpolator[1],t=this.leftInterpolator[1],i=this.rightInterpolator[1],s=this.spacingInterpolator[1],l=this.toolInterpolators,n=new Array;for(let e=0;e<l.length;e+=1)n.push(l[e][1]);return new k(e,t,i,s,n)},configurable:!0}),i.prototype.equals=function(e){if(this===e)return!0;if(e instanceof i&&this.widthInterpolator.equals(e.widthInterpolator)&&this.leftInterpolator.equals(e.leftInterpolator)&&this.rightInterpolator.equals(e.rightInterpolator)&&this.spacingInterpolator.equals(e.spacingInterpolator)){const t=this.toolInterpolators.length;if(t===e.toolInterpolators.length){for(let i=0;i<t;i+=1)if(!this.toolInterpolators[i].equals(e.toolInterpolators[i]))return!1;return!0}}return!1},i}(t.Interpolator);let D=(()=>{var e;let t,l,o=[],a=[],h=[];return e=class extends n.HtmlView{constructor(e){super(e),this.xAlign=(v(this,o),v(this,a,void 0)),this.effectiveWidth=v(this,h,void 0),this.initTool()}initTool(){this.classList.add("tool")}},t=[i.Animator({valueType:Number,value:.5,updateFlags:r.View.NeedsLayout})],l=[c.ConstraintProperty({valueType:s.Length,value:null})],u(null,null,t,{kind:"field",name:"xAlign",static:!1,private:!1,access:{has:e=>"xAlign"in e,get:e=>e.xAlign,set:(e,t)=>{e.xAlign=t}}},a,o),u(null,null,l,{kind:"field",name:"effectiveWidth",static:!1,private:!1,access:{has:e=>"effectiveWidth"in e,get:e=>e.effectiveWidth,set:(e,t)=>{e.effectiveWidth=t}}},h,o),e})(),S=(()=>{var e;let t,i,s=[],l=[],o=[];return e=class extends D{constructor(){super(...arguments),this.content=(v(this,s),v(this,l,void 0)),this.gesture=v(this,o,void 0)}initTool(){super.initTool(),this.setIntrinsic({classList:["tool-title"],style:{overflowX:"hidden"}})}onLayout(){super.onLayout(),this.layoutTool()}layoutTool(){const e=this.content.view;if(null===e)return;const t=e.style.width.pxValue(),i=this.style.width.pxValue();e.style.setIntrinsic({left:(0!==i?i-t:t)*this.xAlign.value,top:0,height:this.style.height.value,lineHeight:this.style.height.value}),null===this.effectiveWidth.value&&0!==t&&this.effectiveWidth.set(t)}didPress(e,t){this.callObservers("viewDidPress",e,t,this)}didLongPress(e){this.callObservers("viewDidLongPress",e,this)}},t=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,initView(e){e.style.setIntrinsic({position:"relative",left:0,top:0})},willAttachView(e){this.owner.callObservers("viewWillAttachContent",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachContent",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text(e),t}return super.fromLike(e)},createView:()=>n.HtmlView.fromTag("span").style.setIntrinsic({display:"block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflowX:"hidden",overflowY:"hidden"})})],i=[r.PositionGesture({bindsOwner:!0,didPress(e,t){!e.defaultPrevented&&this.owner.clientBounds.contains(e.x,e.y)&&this.owner.didPress(e,t)},didLongPress(e){e.defaultPrevented||this.owner.didLongPress(e)}})],u(null,null,t,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}}},l,s),u(null,null,i,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}}},o,s),e})(),I=(()=>{var e;let t,s,n,h,c,d,w,g,f,y=[],b=[],m=[],V=[],T=[],C=[],k=[],L=[],S=[];return e=class extends D{constructor(){super(...arguments),this.xAlign=(v(this,y),v(this,b,void 0)),this.iconLayout=v(this,m,void 0),this.graphics=v(this,V,void 0),this.svg=v(this,T,void 0),this.hovers=v(this,C,void 0),this.hover=v(this,k,void 0),this.glows=v(this,L,void 0),this.gesture=v(this,S,void 0)}initTool(){super.initTool(),this.setIntrinsic({classList:["tool-button"],style:{boxSizing:"border-box",borderRadius:4,overflow:"hidden",userSelect:"none",cursor:"pointer",backgroundColor:l.Look.backgroundColor}})}get iconColor(){return l.ThemeAnimator.getter()}onApplyTheme(e,t,s){if(super.onApplyTheme(e,t,s),!this.graphics.derived){const l=this.graphics.value;if(l instanceof a.Icon){const n=l.withTheme(e,t);this.graphics.setState(n,!!l.isThemed()&&s,i.Affinity.Reflexive)}}}onResize(){super.onResize(),this.requireUpdate(r.View.NeedsLayout)}needsDisplay(e){return 0==(this.flags&r.View.NeedsLayout)&&(e&=~r.View.NeedsLayout),e}onLayout(){super.onLayout(),this.layoutTool()}layoutTool(){const e=this.svg.view;if(null===e||!e.attributes.width.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.height.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.viewBox.hasAffinity(i.Affinity.Intrinsic))return;const t=this.style.width.pxValue(),s=this.style.height.pxValue();e.attributes.setIntrinsic({width:t,height:s,viewBox:"0 0 "+t+" "+s}),this.effectiveWidth.set(t)}glow(e){if(e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0),void 0===e.detail){const t="mouse"===e.inputType?0:100;e.detail=this.prependChild(p),e.detail.glow(e.x,e.y,void 0,t)}}didPress(e,t){this.callObservers("viewDidPress",e,t,this)}didLongPress(e){this.callObservers("viewDidLongPress",e,this)}},t=[i.Animator({valueType:Number,value:.5,updateFlags:r.View.NeedsLayout})],s=[i.Animator({valueType:a.IconLayout,value:null,updateFlags:r.View.NeedsLayout})],n=[l.ThemeAnimator({valueType:o.Color,value:null,updateFlags:r.View.NeedsLayout,didSetState(e){const t=null!==this.timing&&this.timing;this.owner.graphics.setState(this.owner.graphics.state,t,i.Affinity.Reflexive)}})],h=[l.ThemeAnimator({extends:a.IconGraphicsAnimator,valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,didSetValue(e,t){this.owner.callObservers("viewDidSetGraphics",e,this.owner)}})],c=[r.ViewRef({viewType:a.SvgIconView,viewKey:!0,binds:!0,init(){this.insertView()},initView(e){e.style.position.set("absolute"),e.iconLayout.setInherits(!0),e.iconColor.setInherits(!0),e.graphics.setInherits(!0)}})],d=[i.Property({valueType:Boolean,value:!0,inherits:!0})],w=[o.FocusAnimator({value:o.Focus.unfocused(),get transition(){return this.owner.getLookOr(l.Look.timing,null)},didSetValue(e,t){this.owner.modifyMood(l.Feel.default,[[l.Feel.transparent,1-e.phase]],!1)},init(){this.owner.modifyMood(l.Feel.default,[[l.Feel.hovering,1],[l.Feel.translucent,1],[l.Feel.transparent,1-this.value.phase]],!1)}})],g=[i.Property({valueType:Boolean,value:!0,inherits:!0})],f=[r.PositionGesture({bindsOwner:!0,observes:!0,viewDidUnmount(){this.owner.hover.unfocus(!1)},didStartHovering(){this.owner.hovers.value&&this.owner.hover.focus(!1)},didStopHovering(){this.owner.hovers.value&&this.owner.hover.unfocus()},didBeginPress(e,t){this.owner.glows.value&&this.owner.glow(e)},didMovePress(e,t){e.isRunaway()?this.cancelPress(e,t):this.owner.clientBounds.contains(e.x,e.y)||(e.clearHoldTimer(),this.beginHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didEndPress(e,t){this.owner.clientBounds.contains(e.x,e.y)?e.detail instanceof p&&e.detail.pulse(e.x,e.y):(this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didCancelPress(e,t){this.owner.clientBounds.contains(e.x,e.y)||this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0)},didPress(e,t){!e.defaultPrevented&&this.owner.clientBounds.contains(e.x,e.y)&&this.owner.didPress(e,t)},didLongPress(e){e.defaultPrevented||this.owner.didLongPress(e)}})],u(e,null,n,{kind:"getter",name:"iconColor",static:!1,private:!1,access:{has:e=>"iconColor"in e,get:e=>e.iconColor}},null,y),u(null,null,t,{kind:"field",name:"xAlign",static:!1,private:!1,access:{has:e=>"xAlign"in e,get:e=>e.xAlign,set:(e,t)=>{e.xAlign=t}}},b,y),u(null,null,s,{kind:"field",name:"iconLayout",static:!1,private:!1,access:{has:e=>"iconLayout"in e,get:e=>e.iconLayout,set:(e,t)=>{e.iconLayout=t}}},m,y),u(null,null,h,{kind:"field",name:"graphics",static:!1,private:!1,access:{has:e=>"graphics"in e,get:e=>e.graphics,set:(e,t)=>{e.graphics=t}}},V,y),u(null,null,c,{kind:"field",name:"svg",static:!1,private:!1,access:{has:e=>"svg"in e,get:e=>e.svg,set:(e,t)=>{e.svg=t}}},T,y),u(null,null,d,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}}},C,y),u(null,null,w,{kind:"field",name:"hover",static:!1,private:!1,access:{has:e=>"hover"in e,get:e=>e.hover,set:(e,t)=>{e.hover=t}}},k,y),u(null,null,g,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}}},L,y),u(null,null,f,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}}},S,y),e})(),A=(()=>{var e;let t,i,a,h,c,d,w=[],p=[],g=[],f=[],y=[],b=[],m=[];return e=class extends D{constructor(){super(...arguments),this.input=(v(this,w),v(this,p,void 0)),this.stylesheet=v(this,g,void 0),this.inputRule=v(this,f,void 0),this.inputFocusRule=v(this,y,void 0),this.inputPlaceholderRule=v(this,b,void 0),this.inputSearchCancelButtonRule=v(this,m,void 0)}initTool(){super.initTool(),this.classList.add("tool-search")}onLayout(){super.onLayout(),this.layoutTool()}layoutTool(){const e=this.input.view;if(null===e)return;const t=this.style.width.pxValue(),i=this.style.height.pxValue(),s=e.style.width.pxValue(),l=t-s,n=i-e.style.height.pxValue();e.style.setIntrinsic({left:(0!==t?l:s)*this.xAlign.value,top:.5*n}),this.effectiveWidth.set(s)}},t=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,init(){this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this)},initView(e){e.style.setIntrinsic({position:"relative",left:0,top:0,width:s.Length.pct(100),height:30})},willAttachView(e){this.owner.callObservers("viewWillAttachInput",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachInput",e,this.owner)},didAttachView(e){e.addEventListener("input",this.onInput),e.addEventListener("keydown",this.onKeyDown)},willDetachView(e){e.removeEventListener("input",this.onInput),e.removeEventListener("keydown",this.onKeyDown)},onInput(e){const t=this.view;if(null!==t){const e=t.node.value;this.owner.callObservers("viewDidUpdateSearch",e,t,this.owner)}},onKeyDown(e){const t=this.view;if(null!==t)if("Enter"===e.key){const e=t.node.value;this.owner.callObservers("viewDidSubmitSearch",e,t,this.owner)}else"Escape"===e.key&&this.owner.callObservers("viewDidCancelSearch",t,this.owner)},createView:()=>n.HtmlView.fromTag("input").setIntrinsic({attributes:{type:"search"},style:{paddingTop:3,paddingRight:15,paddingBottom:3,paddingLeft:15,userSelect:"none"}})})],i=[r.ViewRef({viewType:n.StyleView,viewKey:!0,binds:!0})],a=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"input",init(){this.style.setIntrinsic({appearance:"none",borderWidth:1,borderStyle:"solid",borderColor:l.Look.borderColor,borderRadius:10,outlineWidth:0,outlineStyle:"none",outlineColor:o.Color.transparent(),backgroundColor:o.Color.transparent(),color:l.Look.textColor}),this.setStyle("transition","border 100ms ease-out")}})],h=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"input:focus",init(){this.style.setIntrinsic({borderWidth:2,borderColor:l.Look.focusColor}),this.setStyle("transition","border 100ms ease-out")}})],c=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"input::placeholder",init(){this.style.color.setIntrinsic(l.Look.placeholderColor)}})],d=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"input::-webkit-search-cancel-button",init(){this.setStyle("-webkit-appearance","none")}})],u(null,null,t,{kind:"field",name:"input",static:!1,private:!1,access:{has:e=>"input"in e,get:e=>e.input,set:(e,t)=>{e.input=t}}},p,w),u(null,null,i,{kind:"field",name:"stylesheet",static:!1,private:!1,access:{has:e=>"stylesheet"in e,get:e=>e.stylesheet,set:(e,t)=>{e.stylesheet=t}}},g,w),u(null,null,a,{kind:"field",name:"inputRule",static:!1,private:!1,access:{has:e=>"inputRule"in e,get:e=>e.inputRule,set:(e,t)=>{e.inputRule=t}}},f,w),u(null,null,h,{kind:"field",name:"inputFocusRule",static:!1,private:!1,access:{has:e=>"inputFocusRule"in e,get:e=>e.inputFocusRule,set:(e,t)=>{e.inputFocusRule=t}}},y,w),u(null,null,c,{kind:"field",name:"inputPlaceholderRule",static:!1,private:!1,access:{has:e=>"inputPlaceholderRule"in e,get:e=>e.inputPlaceholderRule,set:(e,t)=>{e.inputPlaceholderRule=t}}},b,w),u(null,null,d,{kind:"field",name:"inputSearchCancelButtonRule",static:!1,private:!1,access:{has:e=>"inputSearchCancelButtonRule"in e,get:e=>e.inputSearchCancelButtonRule,set:(e,t)=>{e.inputSearchCancelButtonRule=t}}},m,w),e})(),O=(()=>{var e;let t,s,l=[],n=[],r=[];return e=class extends d.Controller{constructor(){super(...arguments),this.tool=(v(this,l),v(this,n,void 0)),this.layout=v(this,r,void 0)}},t=[d.TraitViewRef({viewType:D,observesView:!0,willAttachView(e){this.owner.callObservers("controllerWillAttachToolView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachToolView",e,this.owner)},viewDidPress(e,t){this.owner.callObservers("controllerDidPressToolView",e,t,this.owner)},viewDidLongPress(e){this.owner.callObservers("controllerDidLongPressToolView",e,this.owner)}})],s=[i.Property({valueType:T,value:null,didSetValue(e){this.owner.callObservers("controllerDidSetToolLayout",e,this.owner)}})],u(null,null,t,{kind:"field",name:"tool",static:!1,private:!1,access:{has:e=>"tool"in e,get:e=>e.tool,set:(e,t)=>{e.tool=t}}},n,l),u(null,null,s,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}}},r,l),e})(),x=(()=>{var e;let t,i,s=[],l=[],o=[];return e=class extends O{constructor(){super(...arguments),this.tool=(v(this,s),v(this,l,void 0)),this.content=v(this,o,void 0)}},t=[d.TraitViewRef({extends:!0,viewType:S,observesView:!0,initView(e){this.owner.content.setView(e.content.view)},deinitView(e){this.owner.content.setView(null)},viewWillAttachContent(e){this.owner.content.setView(e)},viewDidDetachContent(e){this.owner.content.setView(null)}})],i=[r.ViewRef({viewType:n.HtmlView,willAttachView(e){this.owner.callObservers("controllerWillAttachToolContentView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachToolContentView",e,this.owner)}})],u(null,null,t,{kind:"field",name:"tool",static:!1,private:!1,access:{has:e=>"tool"in e,get:e=>e.tool,set:(e,t)=>{e.tool=t}}},l,s),u(null,null,i,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}}},o,s),e})(),P=(()=>{var e;let t,i=[],s=[];return e=class extends O{constructor(){super(...arguments),this.tool=(v(this,i),v(this,s,void 0))}},t=[d.TraitViewRef({extends:!0,viewType:I,observesView:!0,viewDidSetGraphics(e){this.owner.callObservers("controllerDidSetToolIcon",e,this.owner)}})],u(null,null,t,{kind:"field",name:"tool",static:!1,private:!1,access:{has:e=>"tool"in e,get:e=>e.tool,set:(e,t)=>{e.tool=t}}},s,i),e})(),B=(()=>{var e;let t,i,s=[],l=[],o=[];return e=class extends O{constructor(){super(...arguments),this.tool=(v(this,s),v(this,l,void 0)),this.input=v(this,o,void 0)}},t=[d.TraitViewRef({extends:!0,viewType:A,observesView:!0,initView(e){this.owner.input.setView(e.input.view)},deinitView(e){this.owner.input.setView(null)},viewWillAttachInput(e){this.owner.input.setView(e)},viewDidDetachInput(e){this.owner.input.setView(null)},viewDidUpdateSearch(e,t){this.owner.callObservers("controllerDidUpdateSearch",e,t,this.owner)},viewDidSubmitSearch(e,t){this.owner.callObservers("controllerDidSubmitSearch",e,t,this.owner)},viewDidCancelSearch(e){this.owner.callObservers("controllerDidCancelSearch",e,this.owner)}})],i=[r.ViewRef({viewType:n.HtmlView,willAttachView(e){this.owner.callObservers("controllerWillAttachToolInputView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachToolInputView",e,this.owner)}})],u(null,null,t,{kind:"field",name:"tool",static:!1,private:!1,access:{has:e=>"tool"in e,get:e=>e.tool,set:(e,t)=>{e.tool=t}}},l,s),u(null,null,i,{kind:"field",name:"input",static:!1,private:!1,access:{has:e=>"input"in e,get:e=>e.input,set:(e,t)=>{e.input=t}}},o,s),e})(),R=(()=>{var e;let t,o,a,h,c,d,w=[],p=[],g=[],f=[],y=[],b=[];return e=class extends n.HtmlView{constructor(e){super(e),this.placement=(v(this,w),v(this,p,void 0)),this.layout=v(this,g,void 0),this.barHeight=v(this,f,void 0),this.toolSpacing=v(this,y,void 0),this.tools=v(this,b,void 0),this.initBar()}initBar(){this.setIntrinsic({classList:["bar"],style:{position:"relative",overflow:"hidden",userSelect:"none"}}),this.modifyMood(l.Feel.default,[[l.Feel.primary,1]])}get edgeInsets(){return i.Property.getter()}getTool(e,t){void 0===t&&(t=D);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateTool(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setTool(e,t){this.setChild(e,t)}onResize(){super.onResize(),this.resizeBar()}resizeBar(){const e=this.placement.value;"top"===e?this.resizeBarTop():"bottom"===e?this.resizeBarBottom():"none"===e&&this.resizeBarNone()}resizeBarTop(){this.classList.remove("bar-bottom"),this.classList.add("bar-top");const e=this.edgeInsets.value;let t=this.barHeight.value;null!==t&&(t=t.plus(e.insetTop),this.style.height.setIntrinsic(t));const i=this.layout.derived?null:this.layout.state;if(null!=i){const t=this.style.width.pxState(),s=e.insetLeft,l=e.insetRight,n=this.toolSpacing.getValue().pxValue(t),r=i.resized(t,s,l,n);this.layout.set(r)}}resizeBarBottom(){this.classList.remove("bar-top"),this.classList.add("bar-bottom");const e=this.edgeInsets.value;let t=this.barHeight.value;null!==t&&(t=t.plus(e.insetBottom),this.style.height.setIntrinsic(t));const i=this.layout.derived?null:this.layout.state;if(null!=i){const t=this.style.width.pxState(),s=e.insetLeft,l=e.insetRight,n=this.toolSpacing.getValue().pxValue(t),r=i.resized(t,s,l,n);this.layout.set(r)}}resizeBarNone(){this.classList.remove("bar-top"),this.classList.remove("bar-bottom");const e=this.layout.derived?null:this.layout.state;if(null!=e){const t=this.style.width.pxState(),i=this.toolSpacing.getValue().pxValue(t),s=e.resized(t,0,0,i);this.layout.set(s)}}displayChildren(e,t){0!=(e&r.View.NeedsLayout)?this.layoutChildren(e,t):super.displayChildren(e,t)}layoutChildren(e,t){const l=this.placement.value,n=this.edgeInsets.value,r="top"===l?s.Length.px(n.insetTop):null,o="bottom"===l?s.Length.px(n.insetBottom):null,a=this.barHeight.value,h=this.layout.value;super.displayChildren(e,(function(e,s){if(e instanceof D){const t=e.key,s=null!==h&&void 0!==t?h.getTool(t):null;null!==s?(e.xAlign.setIntrinsic(s.align),e.style.setIntrinsic({display:s.presence.dismissed?"none":"flex",left:s.left,top:r,bottom:o,width:null!==s.width&&0!==s.width.value?s.width:null,height:a,opacity:1!==s.presence.phase?s.presence.phase:void 0}),e.style.pointerEvents.setState(s.presence.dismissing?"none":void 0,i.Affinity.Transient),s.presence.dismissed&&this.callObservers("viewDidDismissTool",e,s,this)):(e.style.setIntrinsic({display:"none",left:null,top:null,bottom:null,width:null,height:null,opacity:void 0}),e.style.pointerEvents.setState(void 0,i.Affinity.Transient))}t.call(this,e,s)}))}didLayout(){this.layoutTools(),super.didLayout()}layoutTools(){const e=this.layout.value,t=null!==e?e.tools:null,i=null!==t?t.length:0;for(let e=0;e<i;e+=1){const i=t[e],s=this.getChild(i.key);if(s instanceof D)if(void 0!==i.overlap){const e=this.getChild(i.overlap);if(e instanceof D){const t=s.node.offsetLeft,l=s.node.offsetLeft;let n=e.effectiveWidth.value;null!==n&&(n=n.plus(i.overpad)),t<=l?s.style.setIntrinsic({paddingLeft:null,paddingRight:n}):s.style.setIntrinsic({paddingLeft:n,paddingRight:null})}else s.style.setIntrinsic({paddingLeft:null,paddingRight:null})}else s.style.setIntrinsic({paddingLeft:null,paddingRight:null})}}},t=[i.Property({valueType:String,value:"none",updateFlags:r.View.NeedsResize|r.View.NeedsLayout,didSetValue(e){this.owner.callObservers("viewDidSetPlacement",e,this.owner),this.owner.barHeight.applyEdgeInsets(this.owner.edgeInsets.value),this.owner.edgeInsets.decohereOutlets()}})],o=[i.Animator({valueType:k,value:null,inherits:!0,updateFlags:r.View.NeedsLayout,didSetValue(e,t){null!==e&&null===e.width&&this.owner.requireUpdate(r.View.NeedsResize),this.owner.callObservers("viewDidSetBarLayout",e,this.owner)},transformState(e){return null!==e&&null===e.width&&(e=this.resized(e)),e},resized(e){const t=this.value;return null!==t&&null!==t.width&&(e=e.resized(t.width,t.left,t.right,t.spacing)),e}})],a=[l.ThemeConstraintAnimator({valueType:s.Length,value:null,updateFlags:r.View.NeedsResize,didSetValue(e){this.owner.callObservers("viewDidSetBarHeight",e,this.owner),this.applyEdgeInsets(this.owner.edgeInsets.value)},applyEdgeInsets(e){let t=this.value;if(null!==t){const i=this.owner.placement.value;"top"===i?t=t.plus(e.insetTop):"bottom"===i&&(t=t.plus(e.insetBottom)),this.owner.style.height.setIntrinsic(t)}}})],h=[i.Property({valueType:s.Length,value:s.Length.zero(),updateFlags:r.View.NeedsResize})],c=[i.Property({extends:!0,didSetValue(e){this.owner.barHeight.applyEdgeInsets(e)},getOutletValue(e){let t=this.value,i=t.insetTop;const s=t.insetRight;let l=t.insetBottom;const n=t.insetLeft,r=this.owner.placement.value;return"top"===r&&0!==l?(l=0,t={insetTop:i,insetRight:s,insetBottom:l,insetLeft:n}):"bottom"===r&&0!==i&&(i=0,t={insetTop:i,insetRight:s,insetBottom:l,insetLeft:n}),t}})],d=[r.ViewSet({viewType:D,binds:!0,initView(e){e.style.setIntrinsic({display:"none",position:"absolute",left:0,width:0,height:this.owner.barHeight.value})},willAttachView(e,t){this.owner.callObservers("viewWillAttachTool",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachTool",e,this.owner)}})],u(e,null,c,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets}},null,w),u(null,null,t,{kind:"field",name:"placement",static:!1,private:!1,access:{has:e=>"placement"in e,get:e=>e.placement,set:(e,t)=>{e.placement=t}}},p,w),u(null,null,o,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}}},g,w),u(null,null,a,{kind:"field",name:"barHeight",static:!1,private:!1,access:{has:e=>"barHeight"in e,get:e=>e.barHeight,set:(e,t)=>{e.barHeight=t}}},f,w),u(null,null,h,{kind:"field",name:"toolSpacing",static:!1,private:!1,access:{has:e=>"toolSpacing"in e,get:e=>e.toolSpacing,set:(e,t)=>{e.toolSpacing=t}}},y,w),u(null,null,d,{kind:"field",name:"tools",static:!1,private:!1,access:{has:e=>"tools"in e,get:e=>e.tools,set:(e,t)=>{e.tools=t}}},b,w),e})(),W=(()=>{var e;let t,i,s=[],n=[],o=[];return e=class extends d.Controller{constructor(){super(...arguments),this.bar=(v(this,s),v(this,n,void 0)),this.tools=v(this,o,void 0)}createLayout(){const e=new Array,t=this.tools.controllers;for(const i in t){const s=t[i].layout.value;null!==s&&e.push(s)}return k.create(e)}updateLayout(){const e=this.bar.view;if(null===e)return;const t=this.createLayout();if(null===t)return;const i=e.getLookOr(l.Look.timing,l.Mood.navigating,!1);e.layout.set(t,i),e.requireUpdate(r.View.NeedsResize,!0)}getTool(e,t){void 0===t&&(t=O);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateTool(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setTool(e,t){this.setChild(e,t)}getToolView(e,t){const i=this.bar.view;return null!==i?i.getTool(e,t):null}getOrCreateToolView(e,t){let i=this.bar.view;if(null===i){if(i=this.bar.createView(),null===i)throw new Error("no bar view");this.bar.setView(i)}return i.getOrCreateTool(e,t)}setToolView(e,t){let i=this.bar.view;if(null===i){if(i=this.bar.createView(),null===i)throw new Error("no bar view");this.bar.setView(i)}i.setTool(e,t)}onAssemble(){super.onAssemble(),this.updateLayout()}},t=[d.TraitViewRef({viewType:R,observesView:!0,initView(e){const t=this.owner.tools.controllers;for(const i in t){const s=t[i],l=s.tool.view;null!==l&&null===l.parent&&s.tool.insertView(e)}},willAttachView(e){this.owner.callObservers("controllerWillAttachBarView",e,this.owner)},didAttachView(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachView(e){this.owner.callObservers("controllerDidDetachBarView",e,this.owner)},viewDidSetBarLayout(e){this.owner.callObservers("controllerDidSetBarLayout",e,this.owner)},viewDidDismissTool(e,t,i){e.remove()}})],i=[d.TraitViewControllerSet({controllerType:O,binds:!0,observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,willAttachController(e){this.owner.callObservers("controllerWillAttachTool",e,this.owner)},didAttachController(e){const t=e.tool.view;null!==t&&this.attachToolView(t,e),this.owner.requireUpdate(d.Controller.NeedsAssemble)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble),this.owner.callObservers("controllerDidDetachTool",e,this.owner)},controllerWillAttachToolView(e,t){this.owner.callObservers("controllerWillAttachToolView",e,t,this.owner),this.attachToolView(e,t)},controllerDidDetachToolView(e,t){this.detachToolView(e,t),this.owner.callObservers("controllerDidDetachToolView",e,t,this.owner)},attachToolView(e,t){if(e instanceof S){const i=e.content.view;null!==i&&this.attachToolContentView(i,t)}},detachToolView(e,t){if(e instanceof S){const i=e.content.view;null!==i&&this.detachToolContentView(i,t)}e.remove()},controllerDidSetToolLayout(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble),this.owner.callObservers("controllerDidSetToolLayout",e,t,this.owner)},controllerWillAttachToolContentView(e,t){this.attachToolContentView(e,t),this.owner.callObservers("controllerWillAttachToolContentView",e,t,this.owner)},controllerDidDetachToolContentView(e,t){this.owner.callObservers("controllerDidDetachToolContentView",e,t,this.owner),this.detachToolContentView(e,t)},attachToolContentView(e,t){},detachToolContentView(e,t){},controllerDidSetToolIcon(e,t){this.owner.callObservers("controllerDidSetToolIcon",e,t,this.owner)},controllerDidUpdateSearch(e,t,i){this.owner.callObservers("controllerDidUpdateSearchTool",e,t,i,this.owner)},controllerDidSubmitSearch(e,t,i){this.owner.callObservers("controllerDidSubmitSearchTool",e,t,i,this.owner)},controllerDidCancelSearch(e,t){this.owner.callObservers("controllerDidCancelSearchTool",e,t,this.owner)},controllerDidPressToolView(e,t,i){this.owner.callObservers("controllerDidPressToolView",e,t,i,this.owner)},controllerDidLongPressToolView(e,t){this.owner.callObservers("controllerDidLongPressToolView",e,t,this.owner)}})],u(null,null,t,{kind:"field",name:"bar",static:!1,private:!1,access:{has:e=>"bar"in e,get:e=>e.bar,set:(e,t)=>{e.bar=t}}},n,s),u(null,null,i,{kind:"field",name:"tools",static:!1,private:!1,access:{has:e=>"tools"in e,get:e=>e.tools,set:(e,t)=>{e.tools=t}}},o,s),e})(),H=(()=>{var e;let o,h,c,d,w,p,g,f,y,b,m,V,T,C,k=[],L=[],D=[],S=[],I=[],A=[],O=[],x=[],P=[],B=[],R=[],W=[],H=[],F=[],M=[];return e=class extends n.HtmlView{constructor(e){super(e),this.tokenState=void v(this,k),this.expandedPhase=v(this,L,void 0),this.shape=v(this,D,void 0),this.head=v(this,S,void 0),this.headGesture=v(this,I,void 0),this.headIcon=v(this,A,void 0),this.icon=v(this,O,void 0),this.body=v(this,x,void 0),this.bodyGesture=v(this,P,void 0),this.foot=v(this,B,void 0),this.footGesture=v(this,R,void 0),this.footIcon=v(this,W,void 0),this.accessory=v(this,H,void 0),this.labelContainer=v(this,F,void 0),this.label=v(this,M,void 0),this.tokenState="expanded",this.onClickHead=this.onClickHead.bind(this),this.onClickBody=this.onClickBody.bind(this),this.onClickFoot=this.onClickFoot.bind(this),this.initToken()}initToken(){this.setIntrinsic({classList:["token"],style:{position:"relative",height:32,boxSizing:"content-box",userSelect:"none"}}),this.shape.insertView()}initShape(e){e.set({classList:["shape"],style:{position:"absolute",left:0,top:0}}),this.head.insertView(e),this.headIcon.attachView(),this.body.insertView(e),this.foot.insertView(e),this.footIcon.attachView()}initHead(e){e.setIntrinsic({classList:["head"],attributes:{fillRule:"evenodd",cursor:"pointer",pointerEvents:"bounding-box"}})}initHeadIcon(e){e.setIntrinsic({classList:["head-icon"],attributes:{pointerEvents:"none"}})}initBody(e){e.setIntrinsic({classList:["body"],attributes:{cursor:"pointer",pointerEvents:"fill"}})}initFoot(e){e.setIntrinsic({classList:["foot"],attributes:{fillRule:"evenodd",cursor:"pointer",pointerEvents:"bounding-box"}})}initFootIcon(e){e.setIntrinsic({classList:["foot-icon"],attributes:{pointerEvents:"none"}})}initLabelContainer(e){e.setIntrinsic({classList:["label"],style:{display:"block",position:"absolute",left:0,top:0,overflow:"hidden",pointerEvents:"none"}})}initLabel(e){e.style.setIntrinsic({position:"absolute",top:0,bottom:0,left:0})}get expanded(){return"expanded"===this.tokenState||"expanding"===this.tokenState}get collapsed(){return"collapsed"===this.tokenState||"collapsing"===this.tokenState}get fillLook(){return l.Look.accentColor}needsProcess(e){return 0!=(e&r.View.NeedsLayout)&&(e|=r.View.NeedsAnimate),e}onLayout(){super.onLayout(),this.layoutToken()}layoutToken(){const e=this.style.paddingTop.getStateOr(s.Length.zero()).pxValue(),t=this.style.paddingRight.getStateOr(s.Length.zero()).pxValue(),i=this.style.paddingBottom.getStateOr(s.Length.zero()).pxValue(),l=this.style.paddingLeft.getStateOr(s.Length.zero()).pxValue(),n=this.node.clientHeight,r=n-e-i,o=r/2,h=Math.sqrt(4+2*o*2),c=Math.asin(h/(o+2)),d=o/2,w=o,u=o/2,v=this.expandedPhase.value,p=this.icon.value,g=this.accessory.value;let f=0,y=0;const b=this.label.view;null!==b&&(f=b.node.clientWidth,y+=d+f+w);let m=0,V=0;null!==g&&(m=2*o,V+=m+u);let T=r;0!==v&&0!==y&&(T+=2+v*y);const C=T;0!==v&&0!==V&&(T+=2+v*V);const k=T+l+t,L=n;this.style.width.setIntrinsic(T);const D=this.labelContainer.view;null!==D&&D.style.setIntrinsic({display:0!==v?"block":"none",left:l+r+2+d,top:e,width:v*f,height:r});const S=this.shape.view;null!==S&&S.attributes.setIntrinsic({width:k,height:L,viewBox:"0 0 "+k+" "+L});const I=this.head.view;if(null!==I){const t=new a.PathContext;if(t.setPrecision(3),t.arc(l+o,e+o,o,-Math.PI/2,Math.PI/2*3),t.closePath(),null!==p&&!this.icon.embossed){const i=new a.PathRenderer(t),n=new s.R2Box(l,e,l+r,e+r);p.render(i,n),this.headIcon.removeView()}I.attributes.d.setIntrinsic(t.toString())}const A=this.headIcon.view;if(null!==A)if(null!==p&&this.icon.embossed){const t=new a.PathContext;t.setPrecision(3);const i=new a.PathRenderer(t),n=new s.R2Box(l,e,l+r,e+r);p.render(i,n),A.attributes.d.setIntrinsic(t.toString()),this.headIcon.insertView()}else this.headIcon.removeView();const O=this.body.view;if(null!==O){const t=new a.PathContext;if(t.setPrecision(3),0!==v){const i=1-v;t.arc(l+o,e+o,o+2,-Math.PI/2+c,Math.PI/2-c),t.arc(l+C-o-2*i,e+o,o+2*i,Math.PI/2-i*c,-Math.PI/2+i*c,!0),t.closePath()}O.attributes.d.setIntrinsic(t.toString())}const x=this.foot.view;if(null!==x&&null!==g){const t=new a.PathContext;if(t.setPrecision(3),0!==v){const i=1-v;if(t.arc(l+C-o,e+o,o+2,-Math.PI/2+c,Math.PI/2-c),t.arc(l+T-o-2*i,e+o,o+2*i,Math.PI/2-i*c,-Math.PI/2+i*c,!0),t.closePath(),null!==g&&!this.accessory.embossed){const i=new a.PathRenderer(t),n=new s.R2Box(l+C+2,e,l+C+2+2*o,e+2*o);g.render(i,n),this.headIcon.removeView()}}x.attributes.d.setIntrinsic(t.toString())}const P=this.footIcon.view;if(null!==P)if(null!==g&&this.accessory.embossed){const t=new a.PathContext;if(t.setPrecision(3),0!==v){const i=new a.PathRenderer(t),n=new s.R2Box(l+C+2,e,l+C+2+r,e+r);g.render(i,n)}P.attributes.d.setIntrinsic(t.toString()),this.footIcon.insertView()}else this.footIcon.removeView()}expand(e){"expanded"===this.tokenState&&1===this.expandedPhase.value||(e=void 0===e||!0===e?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e),"expanding"!==this.tokenState&&(this.willExpand(),this.onExpand()),!1!==e?1!==this.expandedPhase.value?this.expandedPhase.setIntrinsic(1,e):setTimeout(this.didExpand.bind(this)):(this.expandedPhase.setIntrinsic(1),this.didExpand()))}willExpand(){this.tokenState="expanding";const e=this.labelContainer.view;null!==e&&e.style.display.setIntrinsic("block"),this.callObservers("tokenWillExpand",this)}onExpand(){}didExpand(){this.tokenState="expanded",this.requireUpdate(r.View.NeedsLayout),this.callObservers("tokenDidExpand",this)}collapse(e){"collapsed"===this.tokenState&&0===this.expandedPhase.value||(e=void 0===e||!0===e?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e),"collapsing"!==this.tokenState&&(this.willCollapse(),this.onCollapse()),!1!==e?0!==this.expandedPhase.value?this.expandedPhase.setIntrinsic(0,e):setTimeout(this.didCollapse.bind(this)):(this.expandedPhase.setIntrinsic(0),this.didCollapse()))}willCollapse(){this.tokenState="collapsing",this.callObservers("tokenWillCollapse",this)}onCollapse(){const e=this.label.view;null!==e&&e.node.blur()}didCollapse(){this.tokenState="collapsed",this.requireUpdate(r.View.NeedsLayout),this.callObservers("tokenDidCollapse",this)}toggle(e){const t=this.tokenState;"collapsed"===t||"collapsing"===t?this.expand(e):"expanded"!==t&&"expanding"!==t||this.collapse(e)}onClickHead(e){this.toggle();const t=this.label.view;null!==t&&this.expanded&&t.node.focus(),this.didPressHead()}didPressHead(){this.callObservers("tokenDidPressHead",this)}onClickBody(e){this.didPressBody()}didPressBody(){this.callObservers("tokenDidPressBody",this)}onClickFoot(e){this.didPressFoot()}didPressFoot(){this.callObservers("tokenDidPressFoot",this)}},o=[i.Animator({valueType:Number,value:1,updateFlags:r.View.NeedsLayout,didTransition(e){const t=this.owner.tokenState;"expanding"===t&&1===e?this.owner.didExpand():"collapsing"===t&&0===e&&this.owner.didCollapse()}})],h=[r.ViewRef({viewType:n.SvgView,viewKey:!0,binds:!0,didAttachView(e){this.owner.initShape(e)}})],c=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,observes:!0,didAttachView(e){this.owner.initHead(e),this.owner.headGesture.setView(e)},willDetachView(e){this.owner.headGesture.setView(null)},viewDidMount(e){e.addEventListener("click",this.owner.onClickHead)},viewWillUnmount(e){e.removeEventListener("click",this.owner.onClickHead)},viewDidApplyTheme(e,t,s,n){n.attributes.fill.setIntrinsic(e.getOr(this.owner.fillLook,t,null),s);const r=this.owner.headIcon.view;if(null!==r&&r.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getOr(this.owner.fillLook,t.updated(l.Feel.embossed,1),null);r.attributes.fill.setIntrinsic(i,s)}}})],d=[r.PositionGesture({didStartHovering(){const e=this.view;e.modifyMood(l.Feel.default,[[l.Feel.hovering,1]]);const t=e.getLook(l.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const s=this.owner.headIcon.view;if(null!==s&&s.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getLookOr(this.owner.fillLook,e.mood.getValue().updated(l.Feel.embossed,1),null);s.attributes.fill.setIntrinsic(i,t)}},didStopHovering(){const e=this.view;e.modifyMood(l.Feel.default,[[l.Feel.hovering,void 0]]);const t=e.getLook(l.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const s=this.owner.headIcon.view;if(null!==s&&s.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getLookOr(this.owner.fillLook,e.mood.getValue().updated(l.Feel.embossed,1),null);s.attributes.fill.setIntrinsic(i,t)}},didBeginPress(e,t){"mouse"!==e.inputType&&this.beginHover(e,t)},didMovePress(e,t){e.isRunaway()&&this.cancelPress(e,t)},didEndPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)},didCancelPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)}})],w=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,didAttachView(e){this.owner.initHeadIcon(e)},insertChild(e,t,i,s){const l=this.owner.shape.view;null!==l&&l.insertChild(t,this.owner.body.view,s)}})],p=[i.Property({valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,init(){this.embossed=!0}})],g=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,observes:!0,didAttachView(e){this.owner.initBody(e),this.owner.bodyGesture.setView(e)},willDetachView(e){this.owner.bodyGesture.setView(null)},viewDidMount(e){e.addEventListener("click",this.owner.onClickBody)},viewWillUnmount(e){e.removeEventListener("click",this.owner.onClickBody)},viewDidApplyTheme(e,t,s,n){n.attributes.fill.setIntrinsic(e.getOr(this.owner.fillLook,t,null),s);const r=this.owner.label.view;null!==r&&r.style.color.hasAffinity(i.Affinity.Intrinsic)&&r.style.color.setIntrinsic(e.getOr(l.Look.backgroundColor,t,null),s)}})],f=[r.PositionGesture({didStartHovering(){const e=this.view;e.modifyMood(l.Feel.default,[[l.Feel.hovering,1]]);const t=e.getLook(l.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const s=this.owner.label.view;null!==s&&s.style.color.hasAffinity(i.Affinity.Intrinsic)&&s.style.color.setIntrinsic(e.getLookOr(l.Look.backgroundColor,null),t)},didStopHovering(){const e=this.view;e.modifyMood(l.Feel.default,[[l.Feel.hovering,void 0]]);const t=e.getLook(l.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const s=this.owner.label.view;null!==s&&s.style.color.hasAffinity(i.Affinity.Intrinsic)&&s.style.color.setIntrinsic(e.getLookOr(l.Look.backgroundColor,null),t)},didBeginPress(e,t){"mouse"!==e.inputType&&this.beginHover(e,t)},didMovePress(e,t){e.isRunaway()&&this.cancelPress(e,t)},didEndPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)},didCancelPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)}})],y=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,observes:!0,didAttachView(e){this.owner.initFoot(e),this.owner.footGesture.setView(e)},willDetachView(e){this.owner.footGesture.setView(null)},viewDidMount(e){e.addEventListener("click",this.owner.onClickFoot)},viewWillUnmount(e){e.removeEventListener("click",this.owner.onClickFoot)},viewDidApplyTheme(e,t,s,n){n.attributes.fill.setIntrinsic(e.getOr(this.owner.fillLook,t,null),s);const r=this.owner.footIcon.view;if(null!==r&&r.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getOr(this.owner.fillLook,t.updated(l.Feel.embossed,1),null);r.attributes.fill.setIntrinsic(i,s)}}})],b=[r.PositionGesture({didStartHovering(){const e=this.view;e.modifyMood(l.Feel.default,[[l.Feel.hovering,1]]);const t=e.getLook(l.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const s=this.owner.footIcon.view;if(null!==s&&s.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getLookOr(this.owner.fillLook,e.mood.getValue().updated(l.Feel.embossed,1),null);s.attributes.fill.setIntrinsic(i,t)}},didStopHovering(){const e=this.view;e.modifyMood(l.Feel.default,[[l.Feel.hovering,void 0]]);const t=e.getLook(l.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const s=this.owner.footIcon.view;if(null!==s&&s.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getLookOr(this.owner.fillLook,e.mood.getValue().updated(l.Feel.embossed,1),null);s.attributes.fill.setIntrinsic(i,t)}},didBeginPress(e,t){"mouse"!==e.inputType&&this.beginHover(e,t)},didMovePress(e,t){e.isRunaway()&&this.cancelPress(e,t)},didEndPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)},didCancelPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)}})],m=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,didAttachView(e){this.owner.initFootIcon(e)},insertChild(e,t,i,s){const l=this.owner.shape.view;null!==l&&l.appendChild(t,s)}})],V=[i.Property({valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,init(){this.embossed=!0}})],T=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,didAttachView(e){this.owner.initLabelContainer(e)}})],C=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,didAttachView(e){if(null===e.parent){this.owner.labelContainer.insertView();const t=this.owner.labelContainer.view;null!==t&&t.appendChild(e)}this.owner.initLabel(e)}})],u(null,null,o,{kind:"field",name:"expandedPhase",static:!1,private:!1,access:{has:e=>"expandedPhase"in e,get:e=>e.expandedPhase,set:(e,t)=>{e.expandedPhase=t}}},L,k),u(null,null,h,{kind:"field",name:"shape",static:!1,private:!1,access:{has:e=>"shape"in e,get:e=>e.shape,set:(e,t)=>{e.shape=t}}},D,k),u(null,null,c,{kind:"field",name:"head",static:!1,private:!1,access:{has:e=>"head"in e,get:e=>e.head,set:(e,t)=>{e.head=t}}},S,k),u(null,null,d,{kind:"field",name:"headGesture",static:!1,private:!1,access:{has:e=>"headGesture"in e,get:e=>e.headGesture,set:(e,t)=>{e.headGesture=t}}},I,k),u(null,null,w,{kind:"field",name:"headIcon",static:!1,private:!1,access:{has:e=>"headIcon"in e,get:e=>e.headIcon,set:(e,t)=>{e.headIcon=t}}},A,k),u(null,null,p,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}}},O,k),u(null,null,g,{kind:"field",name:"body",static:!1,private:!1,access:{has:e=>"body"in e,get:e=>e.body,set:(e,t)=>{e.body=t}}},x,k),u(null,null,f,{kind:"field",name:"bodyGesture",static:!1,private:!1,access:{has:e=>"bodyGesture"in e,get:e=>e.bodyGesture,set:(e,t)=>{e.bodyGesture=t}}},P,k),u(null,null,y,{kind:"field",name:"foot",static:!1,private:!1,access:{has:e=>"foot"in e,get:e=>e.foot,set:(e,t)=>{e.foot=t}}},B,k),u(null,null,b,{kind:"field",name:"footGesture",static:!1,private:!1,access:{has:e=>"footGesture"in e,get:e=>e.footGesture,set:(e,t)=>{e.footGesture=t}}},R,k),u(null,null,m,{kind:"field",name:"footIcon",static:!1,private:!1,access:{has:e=>"footIcon"in e,get:e=>e.footIcon,set:(e,t)=>{e.footIcon=t}}},W,k),u(null,null,V,{kind:"field",name:"accessory",static:!1,private:!1,access:{has:e=>"accessory"in e,get:e=>e.accessory,set:(e,t)=>{e.accessory=t}}},H,k),u(null,null,T,{kind:"field",name:"labelContainer",static:!1,private:!1,access:{has:e=>"labelContainer"in e,get:e=>e.labelContainer,set:(e,t)=>{e.labelContainer=t}}},F,k),u(null,null,C,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}}},M,k),e})(),F=(()=>{var e;let t,i,s,a=[],h=[],c=[],d=[];return e=class extends H{constructor(e){super(e),this.stylesheet=(v(this,a),v(this,h,void 0)),this.placeholderRule=v(this,c,void 0),this.label=v(this,d,void 0),this.onInputUpdate=this.onInputUpdate.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputKey=this.onInputKey.bind(this)}initToken(){super.initToken(),this.classList.add("input-token"),this.label.attachView()}initLabel(e){super.initLabel(e),e.style.setIntrinsic({padding:0,borderStyle:"none",boxSizing:"border-box",backgroundColor:o.Color.transparent(),appearance:"none",outlineStyle:"none",pointerEvents:"auto"})}get placeholderLook(){return l.Look.placeholderColor}onApplyTheme(e,t,i){super.onApplyTheme(e,t,i),this.placeholderRule.style.color.setIntrinsic(e.getOr(this.placeholderLook,t,null),i);const s=this.label.view;null!==s&&s.style.font.setIntrinsic(e.getOr(l.Look.font,t,null),!1)}onInputUpdate(e){const t=this.label.view;null!==t&&this.didUpdateInput(t)}didUpdateInput(e){this.callObservers("tokenDidUpdateInput",e,this)}onInputChange(e){const t=this.label.view;null!==t&&this.didChangeInput(t)}didChangeInput(e){this.callObservers("tokenDidChangeInput",e,this)}onInputKey(e){const t=this.label.view;null!==t&&"Enter"===e.key&&this.didAcceptInput(t)}didAcceptInput(e){this.callObservers("tokenDidAcceptInput",e,this)}},t=[r.ViewRef({viewType:n.StyleView,viewKey:!0,binds:!0,init(){this.insertView()}})],i=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"::placeholder"})],s=[r.ViewRef({viewType:n.HtmlView.forTag("input"),observes:!0,didAttachView(e){if(null===e.parent){this.owner.labelContainer.insertView();const t=this.owner.labelContainer.view;null!==t&&t.appendChild(e)}this.owner.initLabel(e)},viewDidMount(e){e.addEventListener("input",this.owner.onInputUpdate),e.addEventListener("change",this.owner.onInputChange),e.addEventListener("keydown",this.owner.onInputKey)},viewWillUnmount(e){e.removeEventListener("input",this.owner.onInputUpdate),e.removeEventListener("change",this.owner.onInputChange),e.removeEventListener("keydown",this.owner.onInputKey)}})],u(null,null,t,{kind:"field",name:"stylesheet",static:!1,private:!1,access:{has:e=>"stylesheet"in e,get:e=>e.stylesheet,set:(e,t)=>{e.stylesheet=t}}},h,a),u(null,null,i,{kind:"field",name:"placeholderRule",static:!1,private:!1,access:{has:e=>"placeholderRule"in e,get:e=>e.placeholderRule,set:(e,t)=>{e.placeholderRule=t}}},c,a),u(null,null,s,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}}},d,a),e})();class M{constructor(e,t,i,s,l,n,r,o,a,h,c){this.key=e,this.grow=t,this.shrink=i,this.basis=s,this.optional=l,this.persistent=n,this.textColor=r,this.width=o,this.left=a,this.right=h,this.hidden=c}withKey(e){return this.copy(e,this.grow,this.shrink,this.basis,this.optional,this.persistent,this.textColor,this.width,this.left,this.right,this.hidden)}withFlex(e,t,i){return i=void 0!==i?s.Length.fromLike(i):this.basis,this.copy(this.key,e,t,i,this.optional,this.persistent,this.textColor,this.width,this.left,this.right,this.hidden)}asOptional(e){return this.copy(this.key,this.grow,this.shrink,this.basis,e,this.persistent,this.textColor,this.width,this.left,this.right,this.hidden)}asPersistent(e){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,e,this.textColor,this.width,this.left,this.right,this.hidden)}withTextColor(e){return e=l.ColorLook.fromLike(e),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.persistent,e,this.width,this.left,this.right,this.hidden)}asHidden(e){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.persistent,this.textColor,this.width,this.left,this.right,e)}resized(e,t,i,l){return null!==e&&(e=s.Length.fromLike(e)),null!==t&&(t=s.Length.fromLike(t)),null!==i&&(i=s.Length.fromLike(i)),void 0===l&&(l=this.hidden),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.persistent,this.textColor,e,t,i,l)}copy(e,t,i,s,l,n,r,o,a,h,c){return new M(e,t,i,s,l,n,r,o,a,h,c)}equivalentTo(e,i){return this===e||e instanceof M&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equivalentTo(e.basis,i)&&this.optional===e.optional&&this.persistent===e.persistent&&t.Equivalent(this.textColor,e.textColor,i))}equals(e){return this===e||e instanceof M&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equals(e.basis)&&this.optional===e.optional&&this.persistent===e.persistent&&t.Equals(this.textColor,e.textColor)&&t.Equals(this.width,e.width)&&t.Equals(this.left,e.left)&&t.Equals(this.right,e.right)&&this.hidden===e.hidden)}debug(e){return e=e.write("ColLayout").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis).write(41),this.optional&&(e=e.write(46).write("asOptional").write(40).debug(this.optional).write(41)),this.persistent&&(e=e.write(46).write("asPersistent").write(40).debug(this.persistent).write(41)),this.textColor&&(e=e.write(46).write("withTextColor").write(40).debug(this.textColor).write(41)),(null!==this.width||null!==this.left||null!==this.right||this.hidden)&&(e=e.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.hidden).write(41)),e}toString(){return h.Format.debug(this)}static create(e,t,i,n,r,o,a){return void 0===t&&(t=0),void 0===i&&(i=1),n=void 0!==n?s.Length.fromLike(n):s.Length.zero(),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===a&&(a=null),null!==a&&(a=l.ColorLook.fromLike(a)),new M(e,t,i,n,r,o,a,null,null,null,!1)}static fromLike(e){if(null==e||e instanceof M)return e;if("object"==typeof e&&null!==e)return M.fromInit(e);throw new TypeError(""+e)}static fromInit(e){let t=e.key;void 0===t&&(t="");let i=e.grow;void 0===i&&(i=0);let n=e.shrink;void 0===n&&(n=1);let r=e.basis;r=void 0!==r?s.Length.fromLike(r):s.Length.zero();let o=e.optional;void 0===o&&(o=!1);let a=e.persistent;void 0===a&&(a=!1);let h=e.textColor;void 0===h&&(h=null),null!==h&&(h=l.ColorLook.fromLike(h));let c=e.width;c=null!=c?s.Length.fromLike(c):null;let d=e.left;d=null!=d?s.Length.fromLike(d):null;let w=e.right;w=null!=w?s.Length.fromLike(w):null;let u=e.hidden;return void 0===u&&(u=!1),new M(t,i,n,r,o,a,h,c,d,w,u)}}class N{constructor(e,t,i,s,l){this.width=e,this.left=t,this.right=i,this.colSpacing=s,this.cols=l}getCol(e){const t=this.cols;for(let i=0;i<t.length;i+=1){const s=t[i];if(e===s.key)return s}return null}resized(e,i,l,n){if(e=s.Length.fromLike(e),void 0===i?i=this.left:null!==i&&(i=s.Length.fromLike(i)),void 0===l?l=this.right:null!==l&&(l=s.Length.fromLike(l)),void 0===n?n=this.colSpacing:null!==n&&(n=s.Length.fromLike(n)),t.Equals(this.width,e)&&t.Equals(this.left,i)&&t.Equals(this.right,l)&&t.Equals(this.colSpacing,n))return this;{const t=this.cols,s=t.length,r=new Array(s),o=e.pxValue(),a=null!==i?i.pxValue(o):0,h=null!==l?l.pxValue(o):0,c=null!==n?n.pxValue(o):0;let d=0,w=0,u=0,v=a+h,p=a;for(let e=0;e<s;e+=1){0!==e&&(v+=c,p+=c);const i=t[e],s=i.basis.pxValue(o);r[e]=i.resized(s,p,o-s-p,!1),d+=i.grow,w+=i.shrink,i.optional&&(u+=1),v+=s,p+=s}if(v>o&&u>0){let e=s-1;for(;e>=0&&u>0;){const t=r[e],i=t.width.pxValue();if(t.optional&&(r[e]=t.resized(0,p,o-p,!0),d-=t.grow,w-=t.shrink,u-=1,v-=i),p-=i,0!==e&&(v-=c,p-=c),v<=o)break;e-=1}for(e+=1;e<s;){const t=r[e];if(!t.optional){v+=c,p+=c;const i=t.basis.pxValue(o);r[e]=t.resized(i,p,o-i-p),p+=i}e+=1}}if(v<o&&d>0){const e=o-v;let t=a,i=0;for(let l=0;l<s;l+=1){const s=r[l];if(s.hidden)r[l]=s.resized(0,t+c,o-t-c);else{0!==i&&(t+=c);const n=s.basis.pxValue(o)+e*(s.grow/d);r[l]=s.resized(n,t,o-n-t),t+=n,i+=1}}}else if(v>o&&w>0){const e=v-o;let t=a,i=0;for(let l=0;l<s;l+=1){const s=r[l];if(s.hidden)r[l]=s.resized(0,t+c,o-t-c);else{0!==i&&(t+=c);const n=s.basis.pxValue(o)-e*(s.shrink/w);r[l]=s.resized(n,t,o-n-t),t+=n,i+=1}}}return new N(e,i,l,n,r)}}equivalentTo(e,t){if(this===e)return!0;if(e instanceof N){const i=this.cols,s=e.cols,l=i.length;if(l===s.length){for(let e=0;e<l;e+=1)if(!i[e].equivalentTo(s[e],t))return!1;return!0}}return!1}equals(e){return this===e||e instanceof N&&(t.Equals(this.width,e.width)&&t.Equals(this.left,e.left)&&t.Equals(this.right,e.right)&&t.Equals(this.colSpacing,e.colSpacing)&&t.Arrays.equal(this.cols,e.cols))}debug(e){e=e.write("TableLayout").write(46).write("of").write(40);for(let t=0;t<this.cols.length;t+=1)0!==t&&(e=e.write(", ")),e=e.debug(this.cols[t]);return e=e.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.colSpacing||(e=e.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.colSpacing).write(41)),e}toString(){return h.Format.debug(this)}static of(...e){const t=e.length,i=new Array(t);for(let s=0;s<t;s+=1)i[s]=M.fromLike(e[s]);return new N(null,null,null,null,i)}static create(e){return new N(null,null,null,null,e)}static fromLike(e){if(null==e||e instanceof N)return e;if("object"==typeof e&&null!==e)return N.fromInit(e);throw new TypeError(""+e)}static fromInit(e){let t=e.width;t=null!=t?s.Length.fromLike(t):null;let i=e.left;i=null!=i?s.Length.fromLike(i):null;let l=e.right;l=null!=l?s.Length.fromLike(l):null;let n=e.colSpacing;n=null!=n?s.Length.fromLike(n):null;const r=e.cols.length,o=new Array(r);for(let t=0;t<r;t+=1)o[t]=M.fromLike(e.cols[t]);return new N(t,i,l,n,o)}}let E=(()=>{var e;let t,s=[];return e=class extends n.HtmlView{constructor(e){super(e),v(this,s),this.initCell()}initCell(){this.setIntrinsic({classList:["cell"],style:{overflow:"hidden"}})}get hyperlink(){return i.Property.getter()}didPress(e,t){this.callObservers("viewDidPress",e,t,this);const s=i.Property.tryValue(this,"hyperlink");null===s||e.defaultPrevented||(e.preventDefault(),s.activate(t))}didLongPress(e){this.callObservers("viewDidLongPress",e,this)}},t=[i.Property({valueType:d.Hyperlink,value:null,didSetValue(e){null!==e?this.owner.setIntrinsic({attributes:{href:e.href,title:e.title},style:{textDecorationLine:"underline",cursor:"pointer"}}):this.owner.setIntrinsic({attributes:{href:void 0,title:void 0},style:{textDecorationLine:void 0,cursor:void 0}})}})],u(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink}},null,s),e})(),z=(()=>{var e;let t,i=[],s=[];return e=class extends E{constructor(){super(...arguments),this.content=(v(this,i),v(this,s,void 0))}initCell(){super.initCell(),this.classList.add("cell-text")}},t=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,willAttachView(e){this.owner.callObservers("viewWillAttachContent",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachContent",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text(e),t}return super.fromLike(e)},createView:()=>n.HtmlView.fromTag("span").style.setIntrinsic({alignSelf:"center",whiteSpace:"nowrap",textOverflow:"ellipsis",overflowX:"hidden",overflowY:"hidden"})})],u(null,null,t,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}}},s,i),e})(),q=(()=>{var e;let t,s,n,h,c=[],d=[],w=[],p=[];return e=class extends E{constructor(){super(...arguments),this.iconLayout=(v(this,c),v(this,d,void 0)),this.graphics=v(this,w,void 0),this.svg=v(this,p,void 0)}initCell(){super.initCell(),this.classList.add("cell-icon")}get iconColor(){return l.ThemeAnimator.getter()}onApplyTheme(e,t,s){if(super.onApplyTheme(e,t,s),!this.graphics.derived){const l=this.graphics.value;if(l instanceof a.Icon){const n=l.withTheme(e,t);this.graphics.setState(n,!!l.isThemed()&&s,i.Affinity.Reflexive)}}}onResize(){super.onResize(),this.requireUpdate(r.View.NeedsLayout)}needsDisplay(e){return 0==(this.flags&r.View.NeedsLayout)&&(e&=~r.View.NeedsLayout),e}onLayout(){super.onLayout(),this.layoutIcon()}layoutIcon(){const e=this.svg.view;if(null===e||!e.attributes.width.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.height.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.viewBox.hasAffinity(i.Affinity.Intrinsic))return;const t=this.style.width.pxValue(),s=this.style.height.pxValue();e.attributes.setIntrinsic({width:t,height:s,viewBox:"0 0 "+t+" "+s})}},t=[i.Animator({valueType:a.IconLayout,value:null,updateFlags:r.View.NeedsLayout})],s=[l.ThemeAnimator({valueType:o.Color,value:null,updateFlags:r.View.NeedsLayout,didSetState(e){const t=null!==this.timing&&this.timing;this.owner.graphics.setState(this.owner.graphics.state,t,i.Affinity.Reflexive)}})],n=[l.ThemeAnimator({extends:a.IconGraphicsAnimator,valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,didSetValue(e,t){this.owner.callObservers("viewDidSetGraphics",e,this.owner)}})],h=[r.ViewRef({viewType:a.SvgIconView,viewKey:!0,binds:!0,init(){this.insertView()},initView(e){e.style.position.set("absolute"),e.iconLayout.setInherits(!0),e.iconColor.setInherits(!0),e.graphics.setInherits(!0)}})],u(e,null,s,{kind:"getter",name:"iconColor",static:!1,private:!1,access:{has:e=>"iconColor"in e,get:e=>e.iconColor}},null,c),u(null,null,t,{kind:"field",name:"iconLayout",static:!1,private:!1,access:{has:e=>"iconLayout"in e,get:e=>e.iconLayout,set:(e,t)=>{e.iconLayout=t}}},d,c),u(null,null,n,{kind:"field",name:"graphics",static:!1,private:!1,access:{has:e=>"graphics"in e,get:e=>e.graphics,set:(e,t)=>{e.graphics=t}}},w,c),u(null,null,h,{kind:"field",name:"svg",static:!1,private:!1,access:{has:e=>"svg"in e,get:e=>e.svg,set:(e,t)=>{e.svg=t}}},p,c),e})(),U=(()=>{var e;let t,i,s=[],l=[],n=[];return e=class extends E{constructor(){super(...arguments),this.disclosure=(v(this,s),v(this,l,void 0)),this.button=v(this,n,void 0)}initCell(){super.initCell(),this.classList.add("cell-disclosure")}didPress(e,t){e.preventDefault();const i=this.disclosure.inlet;i instanceof o.ExpansionAnimator&&i.toggle(),super.didPress(e,t)}},t=[o.ExpansionAnimator({value:null,inherits:!0})],i=[r.ViewRef({viewType:V,viewKey:!0,binds:!0,init(){this.insertView()}})],u(null,null,t,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}}},l,s),u(null,null,i,{kind:"field",name:"button",static:!1,private:!1,access:{has:e=>"button"in e,get:e=>e.button,set:(e,t)=>{e.button=t}}},n,s),e})(),G=(()=>{var e;let t,s=[];return e=class extends w.Trait{get hyperlink(){return i.Property.getter()}createCellController(){return new Y}constructor(){super(...arguments),v(this,s)}},t=[i.Property({valueType:d.Hyperlink,value:null})],u(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink}},null,s),e})(),K=(()=>{var e;let t,s=[],l=[];return e=class extends G{constructor(){super(...arguments),this.content=(v(this,s),v(this,l,void 0))}createCellController(){return new Z}},t=[i.Property({valueType:String,didSetValue(e){this.owner.callObservers("traitDidSetContent",e,this.owner)}})],u(null,null,t,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}}},l,s),e})(),j=(()=>{var e;let t,s=[],l=[];return e=class extends G{constructor(){super(...arguments),this.icon=(v(this,s),v(this,l,void 0))}createCellController(){return new X}},t=[i.Property({valueType:a.Graphics,value:null,didSetValue(e){this.owner.callObservers("traitDidSetIcon",e,this.owner)}})],u(null,null,t,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}}},l,s),e})(),Y=(()=>{var e;let t,s,l=[],n=[];return e=class extends d.Controller{constructor(){super(...arguments),this.cell=(v(this,l),v(this,n,void 0))}get hyperlink(){return i.Property.getter()}},t=[i.Property({valueType:d.Hyperlink,value:null})],s=[d.TraitViewRef({traitType:G,willAttachTrait(e){this.owner.callObservers("controllerWillAttachCellTrait",e,this.owner)},initTrait(e){this.owner.hyperlink.bindInlet(e.hyperlink)},deinitTrait(e){this.owner.hyperlink.unbindInlet(e.hyperlink)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachCellTrait",e,this.owner)},viewType:E,observesView:!0,initView(e){e.hyperlink.bindInlet(this.owner.hyperlink)},willAttachView(e){this.owner.callObservers("controllerWillAttachCellView",e,this.owner)},deinitView(e){e.hyperlink.unbindInlet(this.owner.hyperlink)},didDetachView(e){this.owner.callObservers("controllerDidDetachCellView",e,this.owner)},viewDidPress(e,t,s){this.owner.callObservers("controllerDidPressCellView",e,t,s,this.owner);const l=i.Property.tryValue(this.owner,"hyperlink");null===l||e.defaultPrevented||(e.preventDefault(),l.activate(t))},viewDidLongPress(e,t){this.owner.callObservers("controllerDidLongPressCellView",e,t,this.owner)}})],u(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink}},null,l),u(null,null,s,{kind:"field",name:"cell",static:!1,private:!1,access:{has:e=>"cell"in e,get:e=>e.cell,set:(e,t)=>{e.cell=t}}},n,l),e})(),Z=(()=>{var e;let t,i,s=[],l=[],o=[];return e=class extends Y{constructor(){super(...arguments),this.cell=(v(this,s),v(this,l,void 0)),this.content=v(this,o,void 0)}setContentView(e){const t=this.cell.view;null!==t&&t.content.set(e)}},t=[d.TraitViewRef({extends:!0,traitType:K,observesTrait:!0,initTrait(e){this.owner.setContentView(e.content.value)},deinitTrait(e){this.owner.setContentView(void 0)},traitDidSetContent(e){this.owner.setContentView(e)},viewType:z,observesView:!0,initView(e){this.owner.content.setView(e.content.view);const t=this.trait;null!==t&&this.owner.setContentView(t.content.value)},deinitView(e){this.owner.content.setView(null)},viewWillAttachContent(e){this.owner.content.setView(e)},viewDidDetachContent(e){this.owner.content.setView(null)}})],i=[r.ViewRef({viewType:n.HtmlView,willAttachView(e){this.owner.callObservers("controllerWillAttachCellContentView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachCellContentView",e,this.owner)}})],u(null,null,t,{kind:"field",name:"cell",static:!1,private:!1,access:{has:e=>"cell"in e,get:e=>e.cell,set:(e,t)=>{e.cell=t}}},l,s),u(null,null,i,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}}},o,s),e})(),X=(()=>{var e;let t,i=[],s=[];return e=class extends Y{constructor(){super(...arguments),this.cell=(v(this,i),v(this,s,void 0))}setIcon(e){const t=this.cell.view;null!==t&&t.graphics.set(e)}},t=[d.TraitViewRef({extends:!0,traitType:j,observesTrait:!0,initTrait(e){this.owner.setIcon(e.icon.value)},deinitTrait(e){this.owner.setIcon(null)},traitDidSetIcon(e){this.owner.setIcon(e)},viewType:q,observesView:!0,initView(e){const t=this.trait;null!==t&&this.owner.setIcon(t.icon.value)},viewDidSetGraphics(e){this.owner.callObservers("controllerDidSetCellIcon",e,this.owner)}})],u(null,null,t,{kind:"field",name:"cell",static:!1,private:!1,access:{has:e=>"cell"in e,get:e=>e.cell,set:(e,t)=>{e.cell=t}}},s,i),e})(),_=(()=>{var e;let t,a,h,c,w,g,f,y,b,m,V,T,C=[],k=[],L=[],D=[],S=[],I=[],A=[],O=[],x=[],P=[],B=[],R=[];return e=class extends n.HtmlView{constructor(e){super(e),this.layout=(v(this,C),v(this,k,void 0)),this.depth=v(this,L,void 0),this.rowSpacing=v(this,D,void 0),this.rowHeight=v(this,S,void 0),this.stretch=v(this,I,void 0),this.hovers=v(this,A,void 0),this.hover=v(this,O,void 0),this.highlight=v(this,x,void 0),this.cells=v(this,P,void 0),this.glows=v(this,B,void 0),this.gesture=v(this,R,void 0),this.initLeaf()}initLeaf(){this.setIntrinsic({classList:["leaf"],style:{position:"relative",overflow:"hidden",backgroundColor:l.Look.backgroundColor}}),this.modifyMood(l.Feel.default,[[l.Feel.transparent,1],[l.Feel.hovering,0]],!1)}getCell(e,t){void 0===t&&(t=E);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateCell(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setCell(e,t){this.setChild(e,t)}onLayout(){this.rowHeight.recohere(this.updateTime),super.onLayout(),this.layoutLeaf()}layoutLeaf(){const e=this.rowHeight.value;null!==e&&this.style.height.setIntrinsic(e)}displayChildren(e,t){0!=(e&r.View.NeedsLayout)?this.layoutChildren(e,t):super.displayChildren(e,t)}layoutChildren(e,t){const i=this.layout.value,s=this.style.height.state,l=this.stretch.getPhaseOr(1);super.displayChildren(e,(function(e,n){if(e instanceof E){const t=e.key,n=null!==i&&void 0!==t?i.getCol(t):null;null!==n?e.style.setIntrinsic({display:n.hidden||null===n.width?"none":"flex",left:n.left,width:n.width,height:s,color:n.textColor,opacity:n.persistent?void 0:l}):e.style.setIntrinsic({display:"none",left:null,width:null,height:null,color:null,opacity:void 0})}t.call(this,e,n)}))}glow(e){if(e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0),void 0===e.detail){const t="mouse"===e.inputType?0:100;e.detail=this.prependChild(p),e.detail.glow(e.x,e.y,void 0,t)}}get hyperlink(){return i.Property.getter()}didPress(e,t){if(e.defaultPrevented)return;this.callObservers("viewDidPress",e,t,this);const s=i.Property.tryValue(this,"hyperlink");null===s||e.defaultPrevented||(e.preventDefault(),s.activate(t))}didLongPress(e){e.defaultPrevented||this.callObservers("viewDidLongPress",e,this)}},t=[i.Property({valueType:N,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],a=[i.Property({valueType:Number,value:0,inherits:!0,updateFlags:r.View.NeedsLayout})],h=[l.ThemeConstraintAnimator({valueType:s.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],c=[l.ThemeConstraintAnimator({valueType:s.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],w=[o.ExpansionAnimator({value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],g=[i.Property({valueType:Boolean,value:!1,inherits:!0})],f=[o.FocusAnimator({value:o.Focus.unfocused(),get transition(){return this.owner.getLookOr(l.Look.timing,null)},willFocus(){this.owner.modifyMood(l.Feel.default,[[l.Feel.transparent,0],[l.Feel.hovering,1]],!1)},willUnfocus(){this.owner.modifyMood(l.Feel.default,[[l.Feel.transparent,1-this.owner.hover.state.phase],[l.Feel.hovering,0]],!1)}})],y=[o.FocusAnimator({value:o.Focus.unfocused(),get transition(){return this.owner.getLookOr(l.Look.timing,null)},willFocus(){this.owner.callObservers("viewWillHighlight",this.owner);const e=this.owner.getLook(l.Look.timing);this.owner.modifyMood(l.Feel.default,[[l.Feel.transparent,0]],e),this.owner.style.backgroundColor.setIntrinsic(l.Look.selectionColor,e)},didFocus(){this.owner.callObservers("viewDidHighlight",this.owner)},willUnfocus(){this.owner.callObservers("viewWillUnhighlight",this.owner);const e=this.owner.getLook(l.Look.timing);this.owner.modifyMood(l.Feel.default,[[l.Feel.transparent,1-this.owner.hover.state.phase]],e),this.owner.style.backgroundColor.setIntrinsic(l.Look.backgroundColor,e)},didUnfocus(){this.owner.callObservers("viewDidUnhighlight",this.owner)}})],b=[r.ViewSet({viewType:E,binds:!0,initView(e){e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:0,width:0,height:this.owner.style.height.state})},willAttachView(e,t){this.owner.callObservers("viewWillAttachCell",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachCell",e,this.owner)}})],m=[i.Property({valueType:Boolean,value:!0,inherits:!0})],V=[i.Property({valueType:d.Hyperlink,value:null,didSetValue(e){null!==e?this.owner.setIntrinsic({attributes:{href:e.href,title:e.title},style:{cursor:"pointer"}}):this.owner.setIntrinsic({attributes:{href:void 0,title:void 0},style:{cursor:void 0}})}})],T=[r.PositionGesture({bindsOwner:!0,didBeginPress(e,t){this.owner.glows.value&&this.owner.glow(e)},didMovePress(e,t){e.isRunaway()?this.cancelPress(e,t):this.owner.clientBounds.contains(e.x,e.y)||(e.clearHoldTimer(),this.beginHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didEndPress(e,t){this.owner.clientBounds.contains(e.x,e.y)?e.detail instanceof p&&e.detail.pulse(e.x,e.y):(this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didCancelPress(e,t){this.owner.clientBounds.contains(e.x,e.y)||this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0)},didStartHovering(){this.owner.hovers.value&&this.owner.hover.focus(!1),this.owner.callObservers("viewDidEnter",this.owner)},didStopHovering(){this.owner.hovers.value&&this.owner.hover.unfocus(),this.owner.callObservers("viewDidLeave",this.owner)},didPress(e,t){if(e.defaultPrevented||!this.owner.clientBounds.contains(e.x,e.y))return;let i=e.target;for(;i instanceof Node&&i!==this.owner.node;){const s=n.NodeView.get(i);if(s instanceof E){s.didPress(e,t);break}i=i.parentNode}this.owner.didPress(e,t)},didLongPress(e){if(e.defaultPrevented)return;let t=e.target;for(;t instanceof Node&&t!==this.owner.node;){const i=n.NodeView.get(t);if(i instanceof E){i.didLongPress(e);break}t=t.parentNode}this.owner.didLongPress(e)}})],u(e,null,V,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink}},null,C),u(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}}},k,C),u(null,null,a,{kind:"field",name:"depth",static:!1,private:!1,access:{has:e=>"depth"in e,get:e=>e.depth,set:(e,t)=>{e.depth=t}}},L,C),u(null,null,h,{kind:"field",name:"rowSpacing",static:!1,private:!1,access:{has:e=>"rowSpacing"in e,get:e=>e.rowSpacing,set:(e,t)=>{e.rowSpacing=t}}},D,C),u(null,null,c,{kind:"field",name:"rowHeight",static:!1,private:!1,access:{has:e=>"rowHeight"in e,get:e=>e.rowHeight,set:(e,t)=>{e.rowHeight=t}}},S,C),u(null,null,w,{kind:"field",name:"stretch",static:!1,private:!1,access:{has:e=>"stretch"in e,get:e=>e.stretch,set:(e,t)=>{e.stretch=t}}},I,C),u(null,null,g,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}}},A,C),u(null,null,f,{kind:"field",name:"hover",static:!1,private:!1,access:{has:e=>"hover"in e,get:e=>e.hover,set:(e,t)=>{e.hover=t}}},O,C),u(null,null,y,{kind:"field",name:"highlight",static:!1,private:!1,access:{has:e=>"highlight"in e,get:e=>e.highlight,set:(e,t)=>{e.highlight=t}}},x,C),u(null,null,b,{kind:"field",name:"cells",static:!1,private:!1,access:{has:e=>"cells"in e,get:e=>e.cells,set:(e,t)=>{e.cells=t}}},P,C),u(null,null,m,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}}},B,C),u(null,null,T,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}}},R,C),e})(),J=(()=>{var e;let t,s,l=[],n=[];return e=class extends w.Trait{constructor(){super(...arguments),this.cells=(v(this,l),v(this,n,void 0))}get hyperlink(){return i.Property.getter()}getCell(e,t){void 0===t&&(t=G);const i=this.getTrait(e);return i instanceof t?i:null}getOrCreateCell(e,t){let i=this.getTrait(e,t);return null===i&&(i=t.create(),this.setTrait(e,i)),i}setCell(e,t){this.setTrait(e,t)}onStartConsuming(){super.onStartConsuming(),this.cells.consumeTraits(this)}onStopConsuming(){super.onStopConsuming(),this.cells.unconsumeTraits(this)}},t=[i.Property({valueType:d.Hyperlink,value:null})],s=[w.TraitSet({traitType:G,binds:!0,willAttachTrait(e,t){this.owner.callObservers("traitWillAttachCell",e,t,this.owner)},didAttachTrait(e,t){this.owner.consuming&&e.consume(this.owner)},willDetachTrait(e){this.owner.consuming&&e.unconsume(this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachCell",e,this.owner)},detectModel:e=>e.getTrait(G)})],u(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink}},null,l),u(null,null,s,{kind:"field",name:"cells",static:!1,private:!1,access:{has:e=>"cells"in e,get:e=>e.cells,set:(e,t)=>{e.cells=t}}},n,l),e})(),Q=(()=>{var e;let t,s,l,n=[],r=[],o=[];return e=class extends d.Controller{constructor(){super(...arguments),this.leaf=(v(this,n),v(this,r,void 0)),this.cells=v(this,o,void 0)}get hyperlink(){return i.Property.getter()}getCell(e,t){void 0===t&&(t=Y);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateCell(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setCell(e,t){this.setChild(e,t)}getCellTrait(e,t){const i=this.leaf.trait;return null!==i?i.getCell(e,t):null}getOrCreateCellTrait(e,t){const i=this.leaf.trait;if(null===i)throw new Error("no leaf trait");return i.getOrCreateCell(e,t)}setCellTrait(e,t){const i=this.leaf.trait;if(null===i)throw new Error("no leaf trait");i.setCell(e,t)}getCellView(e,t){const i=this.leaf.view;return null!==i?i.getCell(e,t):null}getOrCreateCellView(e,t){let i=this.leaf.view;if(null===i){if(i=this.leaf.createView(),null===i)throw new Error("no leaf view");this.leaf.setView(i)}return i.getOrCreateCell(e,t)}setCellView(e,t){let i=this.leaf.view;if(null===i){if(i=this.leaf.createView(),null===i)throw new Error("no leaf view");this.leaf.setView(i)}i.setCell(e,t)}},t=[i.Property({valueType:d.Hyperlink,value:null})],s=[d.TraitViewRef({traitType:J,observesTrait:!0,willAttachTrait(e){this.owner.callObservers("controllerWillAttachLeafTrait",e,this.owner)},didAttachTrait(e){this.owner.cells.addTraits(e.cells.traits)},initTrait(e){this.owner.hyperlink.bindInlet(e.hyperlink)},deinitTrait(e){this.owner.hyperlink.unbindInlet(e.hyperlink)},willDetachTrait(e){this.owner.cells.deleteTraits(e.cells.traits)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachLeafTrait",e,this.owner)},traitWillAttachCell(e,t){this.owner.cells.addTrait(e,t)},traitDidDetachCell(e){this.owner.cells.deleteTrait(e)},viewType:_,observesView:!0,initView(e){const t=this.owner.cells.controllers;for(const i in t){const s=t[i],l=s.cell.view;if(null!==l&&null===l.parent){const t=s.cell.trait;null!==t&&s.cell.insertView(e,void 0,void 0,t.key)}}},willAttachView(e){this.owner.callObservers("controllerWillAttachLeafView",e,this.owner),e.hyperlink.bindInlet(this.owner.hyperlink)},didDetachView(e){e.hyperlink.unbindInlet(this.owner.hyperlink),this.owner.callObservers("controllerDidDetachLeafView",e,this.owner)},viewWillHighlight(e){this.owner.callObservers("controllerWillHighlightLeafView",e,this.owner)},viewDidHighlight(e){this.owner.callObservers("controllerDidHighlightLeafView",e,this.owner)},viewWillUnhighlight(e){this.owner.callObservers("controllerWillUnhighlightLeafView",e,this.owner)},viewDidUnhighlight(e){this.owner.callObservers("controllerDidUnhighlightLeafView",e,this.owner)},viewDidEnter(e){this.owner.callObservers("controllerDidEnterLeafView",e,this.owner)},viewDidLeave(e){this.owner.callObservers("controllerDidLeaveLeafView",e,this.owner)},viewDidPress(e,t,i){this.owner.callObservers("controllerDidPressLeafView",e,t,i,this.owner)},viewDidLongPress(e,t){this.owner.callObservers("controllerDidLongPressLeafView",e,t,this.owner)}})],l=[d.TraitViewControllerSet({controllerType:Y,binds:!0,observes:!0,get parentView(){return this.owner.leaf.view},getTraitViewRef:e=>e.cell,willAttachController(e){this.owner.callObservers("controllerWillAttachCell",e,this.owner)},didAttachController(e){const t=e.cell.trait;null!==t&&this.attachCellTrait(t,e);const i=e.cell.view;null!==i&&this.attachCellView(i,e)},willDetachController(e){const t=e.cell.view;null!==t&&this.detachCellView(t,e);const i=e.cell.trait;null!==i&&this.detachCellTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCell",e,this.owner)},controllerWillAttachCellTrait(e,t){this.owner.callObservers("controllerWillAttachCellTrait",e,t,this.owner),this.attachCellTrait(e,t)},controllerDidDetachCellTrait(e,t){this.detachCellTrait(e,t),this.owner.callObservers("controllerDidDetachCellTrait",e,t,this.owner)},attachCellTrait(e,t){},detachCellTrait(e,t){},controllerWillAttachCellView(e,t){this.owner.callObservers("controllerWillAttachCellView",e,t,this.owner),this.attachCellView(e,t)},controllerDidDetachCellView(e,t){this.detachCellView(e,t),this.owner.callObservers("controllerDidDetachCellView",e,t,this.owner)},attachCellView(e,t){if(e instanceof z){const i=e.content.view;null!==i&&this.attachCellContentView(i,t)}},detachCellView(e,t){if(e instanceof z){const i=e.content.view;null!==i&&this.detachCellContentView(i,t)}e.remove()},controllerDidPressCellView(e,t,i,s){this.owner.callObservers("controllerDidPressCellView",e,t,i,s,this.owner)},controllerDidLongPressCellView(e,t,i){this.owner.callObservers("controllerDidLongPressCellView",e,t,i,this.owner)},controllerWillAttachCellContentView(e,t){this.attachCellContentView(e,t),this.owner.callObservers("controllerWillAttachCellContentView",e,t,this.owner)},controllerDidDetachCellContentView(e,t){this.owner.callObservers("controllerDidDetachCellContentView",e,t,this.owner),this.detachCellContentView(e,t)},attachCellContentView(e,t){},detachCellContentView(e,t){},controllerDidSetCellIcon(e,t){this.owner.callObservers("controllerDidSetCellIcon",e,t,this.owner)},createController(e){return void 0!==e?e.createCellController():super.createController()}})],u(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink}},null,n),u(null,null,s,{kind:"field",name:"leaf",static:!1,private:!1,access:{has:e=>"leaf"in e,get:e=>e.leaf,set:(e,t)=>{e.leaf=t}}},r,n),u(null,null,l,{kind:"field",name:"cells",static:!1,private:!1,access:{has:e=>"cells"in e,get:e=>e.cells,set:(e,t)=>{e.cells=t}}},o,n),e})(),$=(()=>{var e;let t,a,h,c,d,w,p,g,f,y,b,m,V,T,C,k=[],L=[],D=[],S=[],I=[],A=[],O=[],x=[],P=[],B=[],R=[],W=[],H=[],F=[],M=[],E=[];return e=class extends n.HtmlView{constructor(e){super(e),this.layout=(v(this,k),v(this,L,void 0)),this.depth=v(this,D,void 0),this.rowSpacing=v(this,S,void 0),this.rowHeight=v(this,I,void 0),this.hovers=v(this,A,void 0),this.glows=v(this,O,void 0),this.leaf=v(this,x,void 0),this.head=v(this,P,void 0),this.tree=v(this,B,void 0),this.foot=v(this,R,void 0),this.expansion=v(this,W,void 0),this.expanding=v(this,H,void 0),this.disclosure=v(this,F,void 0),this.disclosing=v(this,M,void 0),this.visibleFrame=v(this,E,void 0),this.initRow()}initRow(){this.setIntrinsic({classList:["row"],style:{position:"relative"}})}getCell(e,t){const i=this.leaf.view;return null!==i?i.getCell(e,t):null}getOrCreateCell(e,t){const i=this.leaf.insertView();if(null===i)throw new Error("no leaf view");return i.getOrCreateCell(e,t)}setCell(e,t){const i=this.leaf.insertView();if(null===i)throw new Error("no leaf view");i.setCell(e,t)}detectVisibleFrame(){const e=this.rowHeight.getValueOr(s.Length.zero()).pxValue(),t=this.visibleFrame.value;if(null!==t){const i=this.style.left.pxState(),l=this.style.top.pxState();return new s.R2Box(t.xMin-i-0,t.yMin-l-e,t.xMax-i+0,t.yMax-l+e)}{const t=this.node.getBoundingClientRect(),i=-t.x-0,l=-t.y-e,n=window.innerWidth-t.x+0,r=window.innerHeight-t.y+e;return new s.R2Box(i,l,n,r)}}onProcess(e){super.onProcess(e);const t=this.detectVisibleFrame();this.visibleFrame.setOutletValue(t)}needsProcess(e){return 0!=(e&r.View.NeedsResize)&&(e|=r.View.NeedsScroll),e}onDisplay(e){super.onDisplay(e);const t=this.detectVisibleFrame();this.visibleFrame.setOutletValue(t)}onLayout(){this.rowHeight.recohere(this.updateTime),super.onLayout(),this.resizeRow();const e=this.leaf.view;null!==e&&this.layoutLeaf(e)}resizeRow(){const e=this.layout.derived?null:this.layout.value;if(null===e)return;const t=this.layout.inletValue;let i;i=null!=t&&null!==t.width?t.width.pxValue():this.style.width.pxState();const s=e.resized(i,0,0);this.layout.set(s)}layoutLeaf(e){const t=this.layout.value,i=null!==t?t.width:null,s=this.getLook(l.Look.timing);e.style.top.setIntrinsic(0,s),e.style.width.setIntrinsic(i)}didLayout(){this.layoutRow(),super.didLayout()}layoutRow(){const e=this.layout.value,t=null!==e?e.width:null,l=this.rowSpacing.getValueOr(s.Length.zero()).pxValue(),n=this.disclosure.getValue(),r=this.disclosing.getPhaseOr(1)*this.expanding.getPhaseOr(1);let o=0,a=0;const h=this.leaf.view;null!==h&&(h.style.width.setIntrinsic(t),h.style.display.setIntrinsic("flex"),o=h.style.height.pxValue(),a=h.style.height.pxState());const c=this.head.view;null!==c&&(n.collapsed?c.style.display.setIntrinsic("none"):(c.style.top.setIntrinsic(o),c.style.width.setIntrinsic(t),c.style.height.setIntrinsic(l),c.style.opacity.setIntrinsic(r),c.style.display.setIntrinsic("block")));let d=0,w=0;const u=this.tree.view;null!==u&&(n.collapsed?u.style.display.setIntrinsic("none"):(u.style.top.setIntrinsic(o+l*r),u.style.width.setIntrinsic(t),u.style.display.setIntrinsic("block"),d=u.style.height.pxValue(),d+=l*r,w=u.style.height.pxState(),w+=l));const v=this.foot.view;if(null!==v&&(n.collapsed?v.style.display.setIntrinsic("none"):(v.style.top.setIntrinsic(o+d),v.style.width.setIntrinsic(t),v.style.height.setIntrinsic(l),v.style.opacity.setIntrinsic(r),v.style.display.setIntrinsic("block"))),this.style.height.hasAffinity(i.Affinity.Intrinsic)){const e=o+d,t=a+w;this.style.height.setInterpolatedValue(s.Length.px(e),s.Length.px(t))}}onCull(){super.onCull(),this.style.display.setIntrinsic("none")}onUncull(){super.onUncull(),this.style.display.setIntrinsic("block")}},t=[i.Property({valueType:N,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],a=[i.Property({valueType:Number,value:0,inherits:!0,updateFlags:r.View.NeedsLayout,didSetValue(e,t){const i=this.owner.tree.view;null!==i&&i.depth.setIntrinsic(e+1)}})],h=[l.ThemeConstraintAnimator({valueType:s.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],c=[l.ThemeConstraintAnimator({valueType:s.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],d=[i.Property({valueType:Boolean,value:!1,inherits:!0})],w=[i.Property({valueType:Boolean,value:!0,inherits:!0})],p=[r.ViewRef({viewType:_,viewKey:!0,binds:!0,observes:!0,initView(e){const t=this.owner.layout.value;e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:0,width:null!==t?t.width:null,zIndex:1})},willAttachView(e){this.owner.callObservers("viewWillAttachLeaf",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachLeaf",e,this.owner)},viewWillHighlight(e){this.owner.callObservers("viewWillHighlightLeaf",e,this.owner)},viewDidHighlight(e){this.owner.callObservers("viewDidHighlightLeaf",e,this.owner)},viewWillUnhighlight(e){this.owner.callObservers("viewWillUnhighlightLeaf",e,this.owner)},viewDidUnhighlight(e){this.owner.callObservers("viewDidUnhighlightLeaf",e,this.owner)},viewDidEnter(e){this.owner.callObservers("viewDidEnterLeaf",e,this.owner)},viewDidLeave(e){this.owner.callObservers("viewDidLeaveLeaf",e,this.owner)},viewDidPress(e,t,i){this.owner.callObservers("viewDidPressLeaf",e,t,i,this.owner)},viewDidLongPress(e,t){this.owner.callObservers("viewDidLongPressLeaf",e,t,this.owner)}})],g=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,initView(e){const t=this.owner.layout.value;e.setIntrinsic({classList:["head"],style:{display:"none",position:"absolute",left:0,top:this.owner.rowHeight.state,width:null!==t?t.width:null,height:this.owner.rowSpacing.state,backgroundColor:l.Look.accentColor,opacity:this.owner.disclosing.getPhaseOr(1)*this.owner.expanding.getPhaseOr(1),zIndex:1}})}})],f=[r.ViewRef({get viewType(){return pe},viewKey:!0,binds:!0,initView(e){const t=this.owner.layout.value;e.setIntrinsic({classList:["tree"],style:{display:this.owner.disclosure.collapsed?"none":"block",position:"absolute",left:0,width:null!==t?t.width:null,zIndex:0}}),e.depth.setIntrinsic(this.owner.depth.value+1)},willAttachView(e){this.owner.callObservers("viewWillAttachTree",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachTree",e,this.owner)}})],y=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,initView(e){const t=this.owner.layout.value;e.setIntrinsic({classList:["foot"],style:{display:"none",position:"absolute",left:0,top:this.owner.rowHeight.state,width:null!==t?t.width:null,height:this.owner.rowSpacing.state,backgroundColor:l.Look.borderColor,opacity:this.owner.disclosing.getPhaseOr(1)*this.owner.expanding.getPhaseOr(1),zIndex:1}})}})],b=[o.ExpansionAnimator({value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],m=[o.ExpansionAnimator({value:o.Expansion.expanded(),inherits:!0,updateFlags:r.View.NeedsLayout})],V=[o.ExpansionAnimator({value:o.Expansion.collapsed(),get transition(){return this.owner.getLookOr(l.Look.timing,null)},willExpand(){this.owner.callObservers("viewWillExpand",this.owner);const e=this.owner.tree.view;null!==e&&e.style.display.setIntrinsic("block")},didExpand(){this.owner.callObservers("viewDidExpand",this.owner)},willCollapse(){this.owner.callObservers("viewWillCollapse",this.owner)},didCollapse(){const e=this.owner.tree.view;null!==e&&e.style.display.setIntrinsic("none"),this.owner.callObservers("viewDidCollapse",this.owner)},didSetValue(e,t){0!==e.direction?this.owner.disclosing.setIntrinsic(e):this.owner.disclosing.setAffinity(i.Affinity.Transient);const s=this.owner.getRoot(pe);null!==s&&s.requireUpdate(r.View.NeedsLayout)}})],T=[o.ExpansionAnimator({value:o.Expansion.collapsed(),inherits:!0,updateFlags:r.View.NeedsLayout})],C=[i.Property({valueType:s.R2Box,value:null,inherits:!0,init(){this.outletValue=null},getOutletValue(e){return this.outletValue},setOutletValue(e){const t=this.outletValue;this.equalValues(e,t)||(this.outletValue=e,this.decohereOutlets())}})],u(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}}},L,k),u(null,null,a,{kind:"field",name:"depth",static:!1,private:!1,access:{has:e=>"depth"in e,get:e=>e.depth,set:(e,t)=>{e.depth=t}}},D,k),u(null,null,h,{kind:"field",name:"rowSpacing",static:!1,private:!1,access:{has:e=>"rowSpacing"in e,get:e=>e.rowSpacing,set:(e,t)=>{e.rowSpacing=t}}},S,k),u(null,null,c,{kind:"field",name:"rowHeight",static:!1,private:!1,access:{has:e=>"rowHeight"in e,get:e=>e.rowHeight,set:(e,t)=>{e.rowHeight=t}}},I,k),u(null,null,d,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}}},A,k),u(null,null,w,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}}},O,k),u(null,null,p,{kind:"field",name:"leaf",static:!1,private:!1,access:{has:e=>"leaf"in e,get:e=>e.leaf,set:(e,t)=>{e.leaf=t}}},x,k),u(null,null,g,{kind:"field",name:"head",static:!1,private:!1,access:{has:e=>"head"in e,get:e=>e.head,set:(e,t)=>{e.head=t}}},P,k),u(null,null,f,{kind:"field",name:"tree",static:!1,private:!1,access:{has:e=>"tree"in e,get:e=>e.tree,set:(e,t)=>{e.tree=t}}},B,k),u(null,null,y,{kind:"field",name:"foot",static:!1,private:!1,access:{has:e=>"foot"in e,get:e=>e.foot,set:(e,t)=>{e.foot=t}}},R,k),u(null,null,b,{kind:"field",name:"expansion",static:!1,private:!1,access:{has:e=>"expansion"in e,get:e=>e.expansion,set:(e,t)=>{e.expansion=t}}},W,k),u(null,null,m,{kind:"field",name:"expanding",static:!1,private:!1,access:{has:e=>"expanding"in e,get:e=>e.expanding,set:(e,t)=>{e.expanding=t}}},H,k),u(null,null,V,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}}},F,k),u(null,null,T,{kind:"field",name:"disclosing",static:!1,private:!1,access:{has:e=>"disclosing"in e,get:e=>e.disclosing,set:(e,t)=>{e.disclosing=t}}},M,k),u(null,null,C,{kind:"field",name:"visibleFrame",static:!1,private:!1,access:{has:e=>"visibleFrame"in e,get:e=>e.visibleFrame,set:(e,t)=>{e.visibleFrame=t}}},E,k),e})(),ee=(()=>{var e;let t,i=[],s=[];return e=class extends J{constructor(){super(...arguments),this.tree=(v(this,i),v(this,s,void 0))}},t=[w.TraitRef({get traitType(){return ge},binds:!0,willAttachTrait(e){this.owner.callObservers("traitWillAttachTree",e,this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachTree",e,this.owner)},detectModel:e=>e.getTrait(ge),detectTrait:e=>e instanceof ge?e:null})],u(null,null,t,{kind:"field",name:"tree",static:!1,private:!1,access:{has:e=>"tree"in e,get:e=>e.tree,set:(e,t)=>{e.tree=t}}},s,i),e})(),te=(()=>{var e;let t,i,s=[],l=[],n=[];return e=class extends Q{constructor(){super(...arguments),this.row=(v(this,s),v(this,l,void 0)),this.tree=v(this,n,void 0)}},t=[d.TraitViewRef({traitType:ee,observesTrait:!0,initTrait(e){null===this.owner.leaf.trait&&this.owner.leaf.setTrait(e);const t=e.tree.trait;null!==t&&this.owner.tree.setTrait(t)},deinitTrait(e){const t=e.tree.trait;null!==t&&this.owner.tree.deleteTrait(t),this.owner.leaf.trait===e&&this.owner.leaf.setTrait(null)},willAttachTrait(e){this.owner.callObservers("controllerWillAttachRowTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachRowTrait",e,this.owner)},traitWillAttachTree(e){this.owner.tree.setTrait(e)},traitDidDetachTree(e){this.owner.tree.deleteTrait(e)},viewType:$,observesView:!0,initView(e){if(null===this.owner.leaf.view){const t=e.leaf.insertView();this.owner.leaf.setView(t)}const t=this.owner.tree.controller;null!==t&&t.table.insertView(e)},willAttachView(e){this.owner.callObservers("controllerWillAttachRowView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachRowView",e,this.owner)},viewWillExpand(e){this.owner.callObservers("controllerWillExpandRowView",e,this.owner)},viewDidExpand(e){this.owner.callObservers("controllerDidExpandRowView",e,this.owner)},viewWillCollapse(e){this.owner.callObservers("controllerWillCollapseRowView",e,this.owner)},viewDidCollapse(e){this.owner.callObservers("controllerDidCollapseRowView",e,this.owner)},viewWillAttachTree(e){const t=this.owner.tree.controller;null!==t&&t.table.setView(e)}})],i=[d.TraitViewControllerRef({get controllerType(){return fe},binds:!0,observes:!0,get parentView(){return this.owner.row.view},getTraitViewRef:e=>e.table,initController(e){const t=e.table.trait;null!==t&&this.attachTreeTrait(t,e);const i=e.table.view;null!==i&&this.attachTreeView(i,e);const s=this.owner.row.trait;if(null!==s){const t=s.tree.trait;null!==t&&e.table.setTrait(t)}},deinitController(e){const t=e.table.trait;null!==t&&this.detachTreeTrait(t,e);const i=e.table.view;null!==i&&this.detachTreeView(i,e)},willAttachController(e){this.owner.callObservers("controllerWillAttachTree",e,this.owner)},didDetachController(e){this.owner.callObservers("controllerDidDetachTree",e,this.owner)},controllerWillAttachTreeTrait(e,t){this.owner.callObservers("controllerWillAttachTreeTrait",e,t,this.owner),this.attachTreeTrait(e,t)},controllerDidDetachTreeTrait(e,t){this.detachTreeTrait(e,t),this.owner.callObservers("controllerDidDetachTreeTrait",e,t,this.owner)},attachTreeTrait(e,t){},detachTreeTrait(e,t){},controllerWillAttachTableView(e,t){this.owner.callObservers("controllerWillAttachTreeView",e,t,this.owner),this.attachTreeView(e,t)},controllerDidDetachTableView(e,t){this.detachTreeView(e,t),this.owner.callObservers("controllerDidDetachTreeView",e,t,this.owner)},attachTreeView(e,t){},detachTreeView(e,t){e.remove()},detectController:e=>e instanceof fe?e:null})],u(null,null,t,{kind:"field",name:"row",static:!1,private:!1,access:{has:e=>"row"in e,get:e=>e.row,set:(e,t)=>{e.row=t}}},l,s),u(null,null,i,{kind:"field",name:"tree",static:!1,private:!1,access:{has:e=>"tree"in e,get:e=>e.tree,set:(e,t)=>{e.tree=t}}},n,s),e})();class ie extends n.HtmlView{constructor(e){super(e),this.initCol()}initCol(){this.setIntrinsic({classList:["col"],style:{overflow:"hidden"}})}didPress(e,t){this.callObservers("viewDidPress",e,t,this)}didLongPress(e){this.callObservers("viewDidLongPress",e,this)}}let se=(()=>{var e;let t,i=[],s=[];return e=class extends ie{constructor(){super(...arguments),this.label=(v(this,i),v(this,s,void 0))}initCol(){super.initCol(),this.classList.add("col-text")}},t=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,willAttachView(e){this.owner.callObservers("viewWillAttachLabel",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachLabel",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text(e),t}return super.fromLike(e)},createView:()=>n.HtmlView.fromTag("span").style.setIntrinsic({alignSelf:"center",whiteSpace:"nowrap",textOverflow:"ellipsis",overflowX:"hidden",overflowY:"hidden",color:l.Look.legendColor})})],u(null,null,t,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}}},s,i),e})(),le=(()=>{var e;let t,s,n,h,c=[],d=[],w=[],p=[];return e=class extends ie{constructor(){super(...arguments),this.iconLayout=(v(this,c),v(this,d,void 0)),this.graphics=v(this,w,void 0),this.svg=v(this,p,void 0)}initCol(){super.initCol(),this.classList.add("col-icon")}get iconColor(){return l.ThemeAnimator.getter()}onApplyTheme(e,t,s){if(super.onApplyTheme(e,t,s),!this.graphics.derived){const l=this.graphics.value;if(l instanceof a.Icon){const n=l.withTheme(e,t);this.graphics.setState(n,!!l.isThemed()&&s,i.Affinity.Reflexive)}}}onResize(){super.onResize(),this.requireUpdate(r.View.NeedsLayout)}needsDisplay(e){return 0==(this.flags&r.View.NeedsLayout)&&(e&=~r.View.NeedsLayout),e}onLayout(){super.onLayout(),this.layoutIcon()}layoutIcon(){const e=this.svg.view;if(null===e||!e.attributes.width.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.height.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.viewBox.hasAffinity(i.Affinity.Intrinsic))return;const t=this.style.width.pxValue(),s=this.style.height.pxValue();e.attributes.setIntrinsic({width:t,height:s,viewBox:"0 0 "+t+" "+s})}},t=[i.Animator({valueType:a.IconLayout,value:null,updateFlags:r.View.NeedsLayout})],s=[l.ThemeAnimator({valueType:o.Color,value:null,updateFlags:r.View.NeedsLayout,didSetState(e){const t=null!==this.timing&&this.timing;this.owner.graphics.setState(this.owner.graphics.state,t,i.Affinity.Reflexive)}})],n=[l.ThemeAnimator({extends:a.IconGraphicsAnimator,valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,didSetValue(e,t){this.owner.callObservers("viewDidSetGraphics",e,this.owner)}})],h=[r.ViewRef({viewType:a.SvgIconView,viewKey:!0,binds:!0,init(){this.insertView()},initView(e){e.style.position.set("absolute"),e.iconLayout.setInherits(!0),e.iconColor.setInherits(!0),e.graphics.setInherits(!0)}})],u(e,null,s,{kind:"getter",name:"iconColor",static:!1,private:!1,access:{has:e=>"iconColor"in e,get:e=>e.iconColor}},null,c),u(null,null,t,{kind:"field",name:"iconLayout",static:!1,private:!1,access:{has:e=>"iconLayout"in e,get:e=>e.iconLayout,set:(e,t)=>{e.iconLayout=t}}},d,c),u(null,null,n,{kind:"field",name:"graphics",static:!1,private:!1,access:{has:e=>"graphics"in e,get:e=>e.graphics,set:(e,t)=>{e.graphics=t}}},w,c),u(null,null,h,{kind:"field",name:"svg",static:!1,private:!1,access:{has:e=>"svg"in e,get:e=>e.svg,set:(e,t)=>{e.svg=t}}},p,c),e})(),ne=(()=>{var e;let t,i,s=[],l=[],n=[];return e=class extends ie{constructor(){super(...arguments),this.disclosure=(v(this,s),v(this,l,void 0)),this.button=v(this,n,void 0)}initCol(){super.initCol(),this.classList.add("col-disclosure")}didPress(e,t){e.preventDefault();const i=this.disclosure.inlet;i instanceof o.ExpansionAnimator&&i.toggle(),super.didPress(e,t)}},t=[o.ExpansionAnimator({value:null,inherits:!0,inheritName:"expansion"})],i=[r.ViewRef({viewType:V,viewKey:!0,binds:!0,init(){this.insertView()}})],u(null,null,t,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}}},l,s),u(null,null,i,{kind:"field",name:"button",static:!1,private:!1,access:{has:e=>"button"in e,get:e=>e.button,set:(e,t)=>{e.button=t}}},n,s),e})(),re=(()=>{var e;let t,s=[],l=[];return e=class extends w.Trait{constructor(){super(...arguments),this.layout=(v(this,s),v(this,l,void 0))}createColController(){return new he}},t=[i.Property({valueType:M,value:null,didSetValue(e){this.owner.callObservers("traitDidSetLayout",e,this.owner)}})],u(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}}},l,s),e})(),oe=(()=>{var e;let t,s=[],l=[];return e=class extends re{constructor(){super(...arguments),this.label=(v(this,s),v(this,l,void 0))}createColController(){return new ce}},t=[i.Property({valueType:String,didSetValue(e){this.owner.callObservers("traitDidSetLabel",e,this.owner)}})],u(null,null,t,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}}},l,s),e})(),ae=(()=>{var e;let t,s=[],l=[];return e=class extends re{constructor(){super(...arguments),this.icon=(v(this,s),v(this,l,void 0))}createColController(){return new de}},t=[i.Property({valueType:a.Graphics,value:null,didSetValue(e){this.owner.callObservers("traitDidSetIcon",e,this.owner)}})],u(null,null,t,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}}},l,s),e})(),he=(()=>{var e;let t,i=[],s=[];return e=class extends d.Controller{constructor(){super(...arguments),this.col=(v(this,i),v(this,s,void 0))}},t=[d.TraitViewRef({traitType:re,observesTrait:!0,willAttachTrait(e){this.owner.callObservers("controllerWillAttachColTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachColTrait",e,this.owner)},traitDidSetLayout(e){this.owner.callObservers("controllerDidSetColLayout",e,this.owner)},viewType:ie,observesView:!0,willAttachView(e){this.owner.callObservers("controllerWillAttachColView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachColView",e,this.owner)},viewDidPress(e,t,i){this.owner.callObservers("controllerDidPressColView",e,t,i,this.owner)},viewDidLongPress(e,t){this.owner.callObservers("controllerDidLongPressColView",e,t,this.owner)}})],u(null,null,t,{kind:"field",name:"col",static:!1,private:!1,access:{has:e=>"col"in e,get:e=>e.col,set:(e,t)=>{e.col=t}}},s,i),e})(),ce=(()=>{var e;let t,i,s=[],l=[],o=[];return e=class extends he{constructor(){super(...arguments),this.col=(v(this,s),v(this,l,void 0)),this.label=v(this,o,void 0)}setLabelView(e){const t=this.col.view;null!==t&&t.label.set(e)}},t=[d.TraitViewRef({extends:!0,traitType:oe,observesTrait:!0,initTrait(e){this.owner.setLabelView(e.label.value)},deinitTrait(e){this.owner.setLabelView(void 0)},traitDidSetLabel(e){this.owner.setLabelView(e)},viewType:se,observesView:!0,initView(e){this.owner.label.setView(e.label.view);const t=this.trait;null!==t&&this.owner.setLabelView(t.label.value)},deinitView(e){this.owner.label.setView(null)},viewWillAttachLabel(e){this.owner.label.setView(e)},viewDidDetachLabel(e){this.owner.label.setView(null)}})],i=[r.ViewRef({viewType:n.HtmlView,willAttachView(e){this.owner.callObservers("controllerWillAttachColLabelView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachColLabelView",e,this.owner)}})],u(null,null,t,{kind:"field",name:"col",static:!1,private:!1,access:{has:e=>"col"in e,get:e=>e.col,set:(e,t)=>{e.col=t}}},l,s),u(null,null,i,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}}},o,s),e})(),de=(()=>{var e;let t,i=[],s=[];return e=class extends he{constructor(){super(...arguments),this.col=(v(this,i),v(this,s,void 0))}setIcon(e){const t=this.col.view;null!==t&&t.graphics.set(e)}},t=[d.TraitViewRef({extends:!0,traitType:ae,observesTrait:!0,initTrait(e){this.owner.setIcon(e.icon.value)},deinitTrait(e){this.owner.setIcon(null)},traitDidSetIcon(e){this.owner.setIcon(e)},viewType:le,observesView:!0,initView(e){const t=this.trait;null!==t&&this.owner.setIcon(t.icon.value)},viewDidSetGraphics(e){this.owner.callObservers("controllerDidSetColIcon",e,this.owner)}})],u(null,null,t,{kind:"field",name:"col",static:!1,private:!1,access:{has:e=>"col"in e,get:e=>e.col,set:(e,t)=>{e.col=t}}},s,i),e})(),we=(()=>{var e;let t,a,h,c,d,w,p,g=[],f=[],y=[],b=[],m=[],V=[],T=[],C=[];return e=class extends n.HtmlView{constructor(e){super(e),this.layout=(v(this,g),v(this,f,void 0)),this.depth=v(this,y,void 0),this.rowSpacing=v(this,b,void 0),this.rowHeight=v(this,m,void 0),this.stretch=v(this,V,void 0),this.cols=v(this,T,void 0),this.gesture=v(this,C,void 0),this.initHeader()}initHeader(){this.setIntrinsic({classList:["header"],style:{position:"relative",overflow:"hidden"}})}getCol(e,t){void 0===t&&(t=ie);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateCol(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setCol(e,t){this.setChild(e,t)}onLayout(){super.onLayout(),this.layoutHeader()}layoutHeader(){this.rowHeight.recohere(this.updateTime);const e=this.rowHeight.value;null!==e&&this.style.height.setIntrinsic(e)}displayChildren(e,t){0!=(e&r.View.NeedsLayout)?this.layoutChildren(e,t):super.displayChildren(e,t)}layoutChildren(e,t){const i=this.layout.value,s=this.style.height.state,l=this.stretch.getPhaseOr(1);super.displayChildren(e,(function(e,n){if(e instanceof ie){const t=e.key,n=null!==i&&void 0!==t?i.getCol(t):null;null!==n?e.style.setIntrinsic({display:n.hidden||null===n.width?"none":"flex",left:n.left,width:n.width,height:s,color:n.textColor,opacity:n.persistent?void 0:l}):e.style.setIntrinsic({display:"none",left:null,width:null,height:null,color:null,opacity:void 0})}t.call(this,e,n)}))}},t=[i.Property({valueType:N,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],a=[i.Property({valueType:Number,value:0,inherits:!0,updateFlags:r.View.NeedsLayout})],h=[l.ThemeConstraintAnimator({valueType:s.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],c=[l.ThemeConstraintAnimator({valueType:s.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],d=[o.ExpansionAnimator({value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],w=[r.ViewSet({viewType:ie,binds:!0,initView(e){e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:0,width:0,height:this.owner.style.height.state})},willAttachView(e,t){this.owner.callObservers("viewWillAttachCol",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachCol",e,this.owner)}})],p=[r.PositionGesture({bindsOwner:!0,didPress(e,t){if(this.owner.clientBounds.contains(e.x,e.y)){if(!e.defaultPrevented){let i=e.target;for(;i instanceof Node&&i!==this.owner.node;){const s=n.NodeView.get(i);if(s instanceof ie){s.didPress(e,t);break}i=i.parentNode}}e.defaultPrevented||this.owner.callObservers("viewDidPress",e,t,this.owner)}},didLongPress(e){if(!e.defaultPrevented){let t=e.target;for(;t instanceof Node&&t!==this.owner.node;){const i=n.NodeView.get(t);if(i instanceof ie){i.didLongPress(e);break}t=t.parentNode}}e.defaultPrevented||this.owner.callObservers("viewDidLongPress",e,this.owner)}})],u(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}}},f,g),u(null,null,a,{kind:"field",name:"depth",static:!1,private:!1,access:{has:e=>"depth"in e,get:e=>e.depth,set:(e,t)=>{e.depth=t}}},y,g),u(null,null,h,{kind:"field",name:"rowSpacing",static:!1,private:!1,access:{has:e=>"rowSpacing"in e,get:e=>e.rowSpacing,set:(e,t)=>{e.rowSpacing=t}}},b,g),u(null,null,c,{kind:"field",name:"rowHeight",static:!1,private:!1,access:{has:e=>"rowHeight"in e,get:e=>e.rowHeight,set:(e,t)=>{e.rowHeight=t}}},m,g),u(null,null,d,{kind:"field",name:"stretch",static:!1,private:!1,access:{has:e=>"stretch"in e,get:e=>e.stretch,set:(e,t)=>{e.stretch=t}}},V,g),u(null,null,w,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}}},T,g),u(null,null,p,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}}},C,g),e})(),ue=(()=>{var e;let t,i=[],s=[];return e=class extends w.Trait{constructor(){super(...arguments),this.cols=(v(this,i),v(this,s,void 0))}getCol(e,t){void 0===t&&(t=re);const i=this.getTrait(e);return i instanceof t?i:null}getOrCreateCol(e,t){let i=this.getTrait(e,t);return null===i&&(i=t.create(),this.setTrait(e,i)),i}setCol(e,t){this.setTrait(e,t)}onStartConsuming(){super.onStartConsuming(),this.cols.consumeTraits(this)}onStopConsuming(){super.onStopConsuming(),this.cols.unconsumeTraits(this)}},t=[w.TraitSet({traitType:re,binds:!0,willAttachTrait(e,t){this.owner.callObservers("traitWillAttachCol",e,t,this.owner)},didAttachTrait(e){this.owner.consuming&&e.consume(this.owner)},willDetachTrait(e){this.owner.consuming&&e.unconsume(this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachCol",e,this.owner)},detectModel:e=>e.getTrait(re)})],u(null,null,t,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}}},s,i),e})(),ve=(()=>{var e;let t,i,s=[],l=[],n=[];return e=class extends d.Controller{constructor(){super(...arguments),this.header=(v(this,s),v(this,l,void 0)),this.cols=v(this,n,void 0)}getCol(e,t){void 0===t&&(t=he);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateCol(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setCol(e,t){this.setChild(e,t)}getColTrait(e,t){const i=this.header.trait;return null!==i?i.getCol(e,t):null}getOrCreateColTrait(e,t){const i=this.header.trait;if(null===i)throw new Error("no header trait");return i.getOrCreateCol(e,t)}setColTrait(e,t){const i=this.header.trait;if(null===i)throw new Error("no header trait");i.setCol(e,t)}getColView(e,t){const i=this.header.view;return null!==i?i.getCol(e,t):null}getOrCreateColView(e,t){let i=this.header.view;if(null===i){if(i=this.header.createView(),null===i)throw new Error("no header view");this.header.setView(i)}return i.getOrCreateCol(e,t)}setColView(e,t){let i=this.header.view;if(null===i){if(i=this.header.createView(),null===i)throw new Error("no header view");this.header.setView(i)}i.setCol(e,t)}},t=[d.TraitViewRef({traitType:ue,observesTrait:!0,willAttachTrait(e){this.owner.callObservers("controllerWillAttachHeaderTrait",e,this.owner)},didAttachTrait(e){this.owner.cols.addTraits(e.cols.traits)},willDetachTrait(e){this.owner.cols.deleteTraits(e.cols.traits)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachHeaderTrait",e,this.owner)},traitWillAttachCol(e,t){this.owner.cols.addTrait(e,t)},traitDidDetachCol(e){this.owner.cols.deleteTrait(e)},viewType:we,observesView:!0,initView(e){const t=this.owner.cols.controllers;for(const i in t){const s=t[i],l=s.col.view;if(null!==l&&null===l.parent){const t=s.col.trait;null!==t&&s.col.insertView(e,void 0,void 0,t.key)}}},insertChildView(e,t,i,s){e.prependChild(t,s)},willAttachView(e){this.owner.callObservers("controllerWillAttachHeaderView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachHeaderView",e,this.owner)},viewDidPress(e,t,i){this.owner.callObservers("controllerDidPressHeaderView",e,t,i,this.owner)},viewDidLongPress(e,t){this.owner.callObservers("controllerDidLongPressHeaderView",e,t,this.owner)}})],i=[d.TraitViewControllerSet({controllerType:he,binds:!0,observes:!0,get parentView(){return this.owner.header.view},getTraitViewRef:e=>e.col,willAttachController(e){this.owner.callObservers("controllerWillAttachCol",e,this.owner)},didAttachController(e){const t=e.col.trait;null!==t&&this.attachColTrait(t,e);const i=e.col.view;null!==i&&this.attachColView(i,e)},willDetachController(e){const t=e.col.view;null!==t&&this.detachColView(t,e);const i=e.col.trait;null!==i&&this.detachColTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCol",e,this.owner)},controllerWillAttachColTrait(e,t){this.owner.callObservers("controllerWillAttachColTrait",e,t,this.owner),this.attachColTrait(e,t)},controllerDidDetachColTrait(e,t){this.detachColTrait(e,t),this.owner.callObservers("controllerDidDetachColTrait",e,t,this.owner)},attachColTrait(e,t){},detachColTrait(e,t){},controllerWillAttachColView(e,t){this.owner.callObservers("controllerWillAttachColView",e,t,this.owner),this.attachColView(e,t)},controllerDidDetachColView(e,t){this.detachColView(e,t),this.owner.callObservers("controllerDidDetachColView",e,t,this.owner)},controllerDidSetColLayout(e,t){this.owner.callObservers("controllerDidSetColLayout",e,t,this.owner)},attachColView(e,t){if(e instanceof se){const i=e.label.view;null!==i&&this.attachColLabelView(i,t)}},detachColView(e,t){if(e instanceof se){const i=e.label.view;null!==i&&this.detachColLabelView(i,t)}e.remove()},controllerDidPressColView(e,t,i,s){this.owner.callObservers("controllerDidPressColView",e,t,i,s,this.owner)},controllerDidLongPressColView(e,t,i){this.owner.callObservers("controllerDidLongPressColView",e,t,i,this.owner)},controllerWillAttachColLabelView(e,t){this.owner.callObservers("controllerWillAttachColLabelView",e,t,this.owner),this.attachColLabelView(e,t)},controllerDidDetachColLabelView(e,t){this.detachColLabelView(e,t),this.owner.callObservers("controllerDidDetachColLabelView",e,t,this.owner)},attachColLabelView(e,t){},detachColLabelView(e,t){},controllerDidSetColIcon(e,t){this.owner.callObservers("controllerDidSetColIcon",e,t,this.owner)},createController(e){return void 0!==e?e.createColController():super.createController()}})],u(null,null,t,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}}},l,s),u(null,null,i,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}}},n,s),e})(),pe=(()=>{var e;let t,a,h,c,d,w,p,g,f,y,b,m,V,T,C=[],k=[],L=[],D=[],S=[],I=[],A=[],O=[],x=[],P=[],B=[],R=[],W=[],H=[],F=[];return e=class extends n.HtmlView{constructor(e){super(e),this.layout=(v(this,C),v(this,k,void 0)),this.depth=v(this,L,void 0),this.rowSpacing=v(this,D,void 0),this.rowHeight=v(this,S,void 0),this.hovers=v(this,I,void 0),this.glows=v(this,A,void 0),this.expansion=v(this,O,void 0),this.expanding=v(this,x,void 0),this.disclosure=v(this,P,void 0),this.disclosing=v(this,B,void 0),this.stretch=v(this,R,void 0),this.header=v(this,W,void 0),this.rows=v(this,H,void 0),this.visibleFrame=v(this,F,void 0),this.visibleViews=[],this.initTable()}initTable(){this.setIntrinsic({classList:["table"],style:{position:"relative",backgroundColor:l.Look.backgroundColor,boxSizing:"border-box"}})}getRow(e,t){void 0===t&&(t=$);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateRow(e,t){void 0===t&&(t=$);let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setRow(e,t){this.setChild(e,t)}detectVisibleFrame(){const e=this.rowHeight.getValueOr(s.Length.zero()).pxValue(),t=this.visibleFrame.value;if(null!==t){const i=this.style.left.pxState(),l=this.style.top.pxState();return new s.R2Box(t.xMin-i-0,t.yMin-l-e,t.xMax-i+0,t.yMax-l+e)}{const t=this.node.getBoundingClientRect(),i=-t.x-0,l=-t.y-e,n=window.innerWidth-t.x+0,r=window.innerHeight-t.y+e;return new s.R2Box(i,l,n,r)}}needsProcess(e){return 0!=(e&r.View.NeedsResize)&&(e|=r.View.NeedsScroll),e}onResize(){super.onResize(),this.resizeTable()}resizeTable(){const e=this.layout.derived?null:this.layout.value;if(null!==e){const t=this.layout.inletValue;let i=null;null!=t&&null!==t.width&&(i=t.width.pxValue()),null===i&&(i=this.style.width.pxState());const s=this.edgeInsets.value,l=this.style.paddingLeft.pxState(),n=this.style.paddingRight.pxState();let r=null!==s?s.insetLeft:0;r+=l;let o=null!==s?s.insetRight:0;o+=n;const a=e.resized(i,r,o);this.layout.set(a)}}processVisibleViews(e,t){const i=this.visibleViews;let s=0;for(;s<i.length;){const l=i[s];t.call(this,l,e),0==(l.flags&r.View.RemovingFlag)?s+=1:(l.setFlags(l.flags&~r.View.RemovingFlag),this.removeChild(l))}}processChildren(e,t){this.culled||(0!=(e&r.View.NeedsScroll)?this.scrollChildren(e,t):this.processVisibleViews(e,t))}scrollChildren(e,t){const l=this.rowHeight.getValue().pxValue(),r=this.rowSpacing.getValue().pxValue(l),o=this.expanding.getPhaseOr(1),a=this.disclosing.getPhaseOr(1),h=this.visibleViews;h.length=0;const c=this.detectVisibleFrame();this.visibleFrame.setOutletValue(c);let d=0,w=0,u=0;super.processChildren(e,(function(e,l){let v;if((e instanceof $||e instanceof we)&&(0!==u&&(d+=e instanceof $?r*a*o:r*a,w+=r),e.style.top.hasAffinity(i.Affinity.Intrinsic)&&e.style.top.setInterpolatedValue(s.Length.px(d),s.Length.px(w))),e instanceof n.HtmlView){const t=e.style.top.state,i=e.style.height.state;if(null!==t&&null!==i){const s=c.yMin,l=c.yMax,n=t.pxValue(),r=n+i.pxValue();v=0!==a&&(e instanceof we||0!==o)&&s<=r&&n<=l&&n!==r,e.style.display.setIntrinsic(v?"flex":"none"),e.setCulled(!v)}else v=!0}else v=!0;v&&(h.push(e),t.call(this,e,l)),(e instanceof $||e instanceof we)&&(d+=e instanceof $?e.style.height.pxValue()*a*o:e.style.height.pxValue()*a,w+=e.style.height.pxState(),u+=1)}))}displayVisibleViews(e,t){const i=this.visibleViews;let s=0;for(;s<i.length;){const l=i[s];t.call(this,l,e),0==(l.flags&r.View.RemovingFlag)?s+=1:(l.setFlags(l.flags&~r.View.RemovingFlag),this.removeChild(l))}}displayChildren(e,t){0!=(e&r.View.NeedsLayout)?this.layoutChildren(e,t):this.displayVisibleViews(e,t)}layoutChildren(e,t){this.rowHeight.recohere(this.updateTime),this.resizeTable();const r=this.layout.value,o=null!==r?r.width:null,a=this.rowHeight.getValue().pxValue(),h=this.rowSpacing.getValue().pxValue(a),c=this.expanding.getPhaseOr(1),d=this.disclosure.getPhaseOr(1),w=this.disclosing.getPhaseOr(1),u=this.disclosing.tweening?null:this.getLook(l.Look.timing),v=this.visibleViews;v.length=0;const p=this.detectVisibleFrame();this.visibleFrame.setOutletValue(p);let g=0,f=0,y=0;super.displayChildren(e,(function(e,l){let r;if((e instanceof $||e instanceof we)&&(0!==y&&(g+=e instanceof $?h*w*c:h*w,f+=h),e.style.top.hasAffinity(i.Affinity.Intrinsic)&&(g!==f||"none"===e.style.display.value?e.style.top.setInterpolatedValue(s.Length.px(g),s.Length.px(f)):e.style.top.setIntrinsic(f,u)),e.style.width.setIntrinsic(o)),e instanceof n.HtmlView){const t=e.style.top.state,i=e.style.height.state;if(null!==t&&null!==i){const s=p.yMin,l=p.yMax,n=t.pxValue(),o=n+i.pxValue();r=0!==w&&(e instanceof we||0!==c)&&s<=o&&n<=l&&n!==o}else r=!0;e instanceof $?e.style.opacity.setIntrinsic(d*c):e.style.opacity.setIntrinsic(d),e.style.display.setIntrinsic(r?"flex":"none"),e.setCulled(!r)}else r=!0;r&&v.push(e),t.call(this,e,l),(e instanceof $||e instanceof we)&&(g+=e instanceof $?e.style.height.pxValue()*w*c:e.style.height.pxValue()*w,f+=e.style.height.pxState(),y+=1)})),this.style.height.hasAffinity(i.Affinity.Intrinsic)&&this.style.height.setInterpolatedValue(s.Length.px(g),s.Length.px(f))}},t=[i.Property({valueType:N,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],a=[i.Property({valueType:Number,value:0,inherits:!0,updateFlags:r.View.NeedsLayout,didSetValue(e,t){this.owner.modifyTheme(l.Feel.default,[[l.Feel.nested,0!==e?1:void 0]],!1)}})],h=[l.ThemeConstraintAnimator({valueType:s.Length,value:s.Length.zero(),inherits:!0,updateFlags:r.View.NeedsLayout})],c=[l.ThemeConstraintAnimator({valueType:s.Length,value:s.Length.px(24),inherits:!0,updateFlags:r.View.NeedsLayout})],d=[i.Property({valueType:Boolean,value:!1,inherits:!0})],w=[i.Property({valueType:Boolean,value:!0,inherits:!0})],p=[o.ExpansionAnimator({value:o.Expansion.expanded(),get transition(){return this.owner.getLookOr(l.Look.timing,null)},willExpand(){this.owner.callObservers("viewWillExpand",this.owner)},didExpand(){this.owner.callObservers("viewDidExpand",this.owner)},willCollapse(){this.owner.callObservers("viewWillCollapse",this.owner)},didCollapse(){this.owner.callObservers("viewDidCollapse",this.owner)},didSetValue(e,t){1!==e.phase?this.owner.expanding.setIntrinsic(e):this.owner.expanding.setAffinity(i.Affinity.Transient);const s=this.owner.getRoot(pe);null!==s?s.requireUpdate(r.View.NeedsLayout):this.owner.requireUpdate(r.View.NeedsLayout)}})],g=[o.ExpansionAnimator({value:o.Expansion.expanded(),inherits:!0})],f=[o.ExpansionAnimator({value:null,inherits:!0})],y=[o.ExpansionAnimator({value:o.Expansion.expanded(),inherits:!0})],b=[o.ExpansionAnimator({value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],m=[r.ViewRef({viewType:we,viewKey:!0,binds:!0,initView(e){const t=this.owner.layout.value;e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:null,width:null!==t?t.width:null}),e.setCulled(!0)},willAttachView(e){this.owner.callObservers("viewWillAttachHeader",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachHeader",e,this.owner)},insertChild(e,t,i,s){e.prependChild(t,s)}})],V=[r.ViewSet({viewType:$,binds:!0,observes:!0,initView(e){const t=this.owner.layout.value;e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:null,width:null!==t?t.width:null}),e.setCulled(!0)},willAttachView(e,t){this.owner.callObservers("viewWillAttachRow",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachRow",e,this.owner)},viewWillAttachLeaf(e,t){this.owner.callObservers("viewWillAttachLeaf",e,t)},viewDidDetachLeaf(e,t){this.owner.callObservers("viewDidDetachLeaf",e,t)},viewDidEnterLeaf(e,t){this.owner.callObservers("viewDidEnterLeaf",e,t)},viewDidLeaveLeaf(e,t){this.owner.callObservers("viewDidLeaveLeaf",e,t)},viewDidPressLeaf(e,t,i,s){this.owner.callObservers("viewDidPressLeaf",e,t,i,s)},viewDidLongPressLeaf(e,t,i){this.owner.callObservers("viewDidLongPressLeaf",e,t,i)},viewWillAttachTree(e,t){this.owner.callObservers("viewWillAttachTree",e,t)},viewDidDetachTree(e,t){this.owner.callObservers("viewDidDetachTree",e,t)},viewWillHighlightLeaf(e,t){this.owner.callObservers("viewWillHighlightLeaf",e,t)},viewDidHighlightLeaf(e,t){this.owner.callObservers("viewDidHighlightLeaf",e,t)},viewWillUnhighlightLeaf(e,t){this.owner.callObservers("viewWillUnhighlightLeaf",e,t)},viewDidUnhighlightLeaf(e,t){this.owner.callObservers("viewDidUnhighlightLeaf",e,t)},viewWillExpand(e){this.owner.callObservers("viewWillExpandRow",e)},viewDidExpand(e){this.owner.callObservers("viewDidExpandRow",e)},viewWillCollapse(e){this.owner.callObservers("viewWillCollapseRow",e)},viewDidCollapse(e){this.owner.callObservers("viewDidCollapseRow",e)}})],T=[i.Property({valueType:s.R2Box,value:null,inherits:!0,init(){this.outletValue=null},getOutletValue(e){return this.outletValue},setOutletValue(e){const t=this.outletValue;this.equalValues(e,t)||(this.outletValue=e,this.decohereOutlets())}})],u(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}}},k,C),u(null,null,a,{kind:"field",name:"depth",static:!1,private:!1,access:{has:e=>"depth"in e,get:e=>e.depth,set:(e,t)=>{e.depth=t}}},L,C),u(null,null,h,{kind:"field",name:"rowSpacing",static:!1,private:!1,access:{has:e=>"rowSpacing"in e,get:e=>e.rowSpacing,set:(e,t)=>{e.rowSpacing=t}}},D,C),u(null,null,c,{kind:"field",name:"rowHeight",static:!1,private:!1,access:{has:e=>"rowHeight"in e,get:e=>e.rowHeight,set:(e,t)=>{e.rowHeight=t}}},S,C),u(null,null,d,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}}},I,C),u(null,null,w,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}}},A,C),u(null,null,p,{kind:"field",name:"expansion",static:!1,private:!1,access:{has:e=>"expansion"in e,get:e=>e.expansion,set:(e,t)=>{e.expansion=t}}},O,C),u(null,null,g,{kind:"field",name:"expanding",static:!1,private:!1,access:{has:e=>"expanding"in e,get:e=>e.expanding,set:(e,t)=>{e.expanding=t}}},x,C),u(null,null,f,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}}},P,C),u(null,null,y,{kind:"field",name:"disclosing",static:!1,private:!1,access:{has:e=>"disclosing"in e,get:e=>e.disclosing,set:(e,t)=>{e.disclosing=t}}},B,C),u(null,null,b,{kind:"field",name:"stretch",static:!1,private:!1,access:{has:e=>"stretch"in e,get:e=>e.stretch,set:(e,t)=>{e.stretch=t}}},R,C),u(null,null,m,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}}},W,C),u(null,null,V,{kind:"field",name:"rows",static:!1,private:!1,access:{has:e=>"rows"in e,get:e=>e.rows,set:(e,t)=>{e.rows=t}}},H,C),u(null,null,T,{kind:"field",name:"visibleFrame",static:!1,private:!1,access:{has:e=>"visibleFrame"in e,get:e=>e.visibleFrame,set:(e,t)=>{e.visibleFrame=t}}},F,C),e})(),ge=(()=>{var e;let t,l,n,r,o,a=[],h=[],c=[],d=[],p=[],g=[];return e=class extends w.Trait{constructor(){super(...arguments),this.layout=(v(this,a),v(this,h,void 0)),this.colSpacing=v(this,c,void 0),this.header=v(this,d,void 0),this.cols=v(this,p,void 0),this.rows=v(this,g,void 0)}createLayout(){const e=[],t=this.cols.traits;for(const i in t){const s=t[i].layout.value;null!==s&&e.push(s)}const i=this.colSpacing.value;return new N(null,null,null,i,e)}updateLayout(){const e=this.createLayout();this.layout.setIntrinsic(e)}onStartConsuming(){super.onStartConsuming(),this.cols.consumeTraits(this),this.rows.consumeTraits(this)}onStopConsuming(){super.onStopConsuming(),this.rows.unconsumeTraits(this),this.cols.unconsumeTraits(this)}},t=[i.Property({valueType:N,value:null,didSetValue(e){this.owner.callObservers("traitDidSetTableLayout",e,this.owner)}})],l=[i.Property({valueType:s.Length,value:null,didSetValue(e,t){this.owner.updateLayout()}})],n=[w.TraitRef({traitType:ue,binds:!0,willAttachTrait(e){this.owner.callObservers("traitWillAttachHeader",e,this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachHeader",e,this.owner)},detectTrait:e=>e instanceof ue?e:null})],r=[w.TraitSet({traitType:re,binds:!0,observes:!0,willAttachTrait(e,t){this.owner.callObservers("traitWillAttachCol",e,t,this.owner)},didAttachTrait(e){this.owner.updateLayout(),this.owner.consuming&&e.consume(this.owner)},willDetachTrait(e){this.owner.consuming&&e.unconsume(this.owner)},didDetachTrait(e){this.owner.updateLayout(),this.owner.callObservers("traitDidDetachCol",e,this.owner)},traitDidSetLayout(e){this.owner.updateLayout()},detectModel:e=>e.getTrait(re)})],o=[w.TraitSet({traitType:ee,binds:!0,willAttachTrait(e,t){this.owner.callObservers("traitWillAttachRow",e,t,this.owner)},didAttachTrait(e){this.owner.consuming&&e.consume(this.owner)},willDetachTrait(e){this.owner.consuming&&e.unconsume(this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachRow",e,this.owner)},detectModel:e=>e.getTrait(ee),detectTrait:e=>null})],u(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}}},h,a),u(null,null,l,{kind:"field",name:"colSpacing",static:!1,private:!1,access:{has:e=>"colSpacing"in e,get:e=>e.colSpacing,set:(e,t)=>{e.colSpacing=t}}},c,a),u(null,null,n,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}}},d,a),u(null,null,r,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}}},p,a),u(null,null,o,{kind:"field",name:"rows",static:!1,private:!1,access:{has:e=>"rows"in e,get:e=>e.rows,set:(e,t)=>{e.rows=t}}},g,a),e})(),fe=(()=>{var e;let t,i,s,l,n=[],r=[],o=[],a=[],h=[];return e=class extends d.Controller{constructor(){super(...arguments),this.table=(v(this,n),v(this,r,void 0)),this.header=v(this,o,void 0),this.cols=v(this,a,void 0),this.rows=v(this,h,void 0)}layoutTable(e,t){t.layout.setIntrinsic(e)}},t=[d.TraitViewRef({traitType:ge,observesTrait:!0,willAttachTrait(e){this.owner.callObservers("controllerWillAttachTableTrait",e,this.owner)},didAttachTrait(e){const t=e.header.trait;null!==t&&this.owner.header.setTrait(t);const i=e.cols.traits;for(const e in i){const t=i[e];this.owner.cols.addTrait(t,null,t.key)}this.owner.rows.addTraits(e.rows.traits);const s=this.view;if(null!==s){const t=e.layout.value;null!==t&&this.owner.layoutTable(t,s)}},willDetachTrait(e){this.owner.rows.deleteTraits(e.rows.traits),this.owner.cols.deleteTraits(e.cols.traits);const t=e.header.trait;null!==t&&this.owner.header.deleteTrait(t)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachTableTrait",e,this.owner)},traitDidSetTableLayout(e){this.owner.callObservers("controllerDidSetTableLayout",e,this.owner)},traitWillAttachHeader(e){this.owner.header.setTrait(e)},traitDidDetachHeader(e){this.owner.header.deleteTrait(e)},traitWillAttachCol(e,t){this.owner.cols.addTrait(e,t,e.key)},traitDidDetachCol(e){this.owner.cols.deleteTrait(e)},traitWillAttachRow(e,t){this.owner.rows.addTrait(e,t)},traitDidDetachRow(e){this.owner.rows.deleteTrait(e)},viewType:pe,observesView:!0,initView(e){const t=this.owner.header.controller;null!==t&&(t.header.insertView(e),null===e.header.view&&e.header.setView(t.header.view));const i=this.owner.rows.controllers;for(const t in i){const s=i[t],l=s.row.view;if(null!==l&&null===l.parent){const t=this.owner.rows.getTargetView(s);s.row.insertView(e,void 0,t)}}const s=this.trait;if(null!==s){const t=s.layout.value;null!==t&&this.owner.layoutTable(t,e)}},willAttachView(e){this.owner.callObservers("controllerWillAttachTableView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachTableView",e,this.owner)},viewWillAttachHeader(e){const t=this.owner.header.controller;null!==t&&t.header.setView(e)},viewDidDetachHeader(e){const t=this.owner.header.controller;null!==t&&t.header.setView(null)},viewWillExpand(e){this.owner.callObservers("controllerWillExpandTableView",e,this.owner)},viewDidExpand(e){this.owner.callObservers("controllerDidExpandTableView",e,this.owner)},viewWillCollapse(e){this.owner.callObservers("controllerWillCollapseTableView",e,this.owner)},viewDidCollapse(e){this.owner.callObservers("controllerDidCollapseTableView",e,this.owner)}})],i=[d.TraitViewControllerRef({controllerType:ve,binds:!0,observes:!0,get parentView(){return this.owner.table.view},getTraitViewRef:e=>e.header,initController(e){const t=this.owner.table.trait;if(null!==t){const i=t.header.trait;null!==i&&e.header.setTrait(i)}},willAttachController(e){this.owner.callObservers("controllerWillAttachHeader",e,this.owner)},didAttachController(e){const t=e.header.trait;null!==t&&this.attachHeaderTrait(t,e);const i=e.header.view;null!==i&&this.attachHeaderView(i,e)},willDetachController(e){const t=e.header.view;null!==t&&this.detachHeaderView(t,e);const i=e.header.trait;null!==i&&this.detachHeaderTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachHeader",e,this.owner)},controllerWillAttachHeaderTrait(e,t){this.owner.callObservers("controllerWillAttachHeaderTrait",e,this.owner),this.attachHeaderTrait(e,t)},controllerDidDetachHeaderTrait(e,t){this.detachHeaderTrait(e,t),this.owner.callObservers("controllerDidDetachHeaderTrait",e,this.owner)},attachHeaderTrait(e,t){},detachHeaderTrait(e,t){},controllerWillAttachHeaderView(e,t){this.owner.callObservers("controllerWillAttachHeaderView",e,this.owner),this.attachHeaderView(e,t)},controllerDidDetachHeaderView(e,t){this.detachHeaderView(e,t),this.owner.callObservers("controllerDidDetachHeaderView",e,this.owner)},attachHeaderView(e,t){const i=this.owner.table.view;null!==i&&null===i.header.view&&i.header.setView(e)},detachHeaderView(e,t){e.remove()},controllerDidPressHeaderView(e,t,i){this.owner.callObservers("controllerDidPressHeaderView",e,t,i,this.owner)},controllerDidLongPressHeaderView(e,t){this.owner.callObservers("controllerDidLongPressHeaderView",e,t,this.owner)},detectController:e=>e instanceof ve?e:null})],s=[d.TraitViewControllerSet({controllerType:he,binds:!0,observes:!0,getTraitViewRef:e=>e.col,willAttachController(e){this.owner.callObservers("controllerWillAttachCol",e,this.owner)},didAttachController(e){const t=e.col.trait;null!==t&&this.attachColTrait(t,e);const i=e.col.view;null!==i&&this.attachColView(i,e)},willDetachController(e){const t=e.col.trait;null!==t&&this.detachColTrait(t,e);const i=e.col.view;null!==i&&this.detachColView(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCol",e,this.owner)},controllerWillAttachColTrait(e,t){this.owner.callObservers("controllerWillAttachColTrait",e,t,this.owner),this.attachColTrait(e,t)},controllerDidDetachColTrait(e,t){this.detachColTrait(e,t),this.owner.callObservers("controllerDidDetachColTrait",e,t,this.owner)},attachColTrait(e,t){},detachColTrait(e,t){},controllerDidSetColLayout(e,t){this.owner.callObservers("controllerDidSetColLayout",e,t,this.owner)},controllerWillAttachColView(e,t){this.owner.callObservers("controllerWillAttachColView",e,t,this.owner),this.attachColView(e,t)},controllerDidDetachColView(e,t){this.detachColView(e,t),this.owner.callObservers("controllerDidDetachColView",e,t,this.owner)},attachColView(e,t){if(e instanceof se){const i=e.label.view;null!==i&&this.attachColLabelView(i,t)}},detachColView(e,t){if(e instanceof se){const i=e.label.view;null!==i&&this.detachColLabelView(i,t)}e.remove()},controllerDidPressColView(e,t,i,s){this.owner.callObservers("controllerDidPressColView",e,t,i,s,this.owner)},controllerDidLongPressColView(e,t,i){this.owner.callObservers("controllerDidLongPressColView",e,t,i,this.owner)},controllerWillAttachColLabelView(e,t){this.owner.callObservers("controllerWillAttachColLabelView",e,t,this.owner),this.attachColLabelView(e,t)},controllerDidDetachColLabelView(e,t){this.detachColLabelView(e,t),this.owner.callObservers("controllerDidDetachColLabelView",e,t,this.owner)},attachColLabelView(e,t){},detachColLabelView(e,t){},controllerDidSetColIcon(e,t){this.owner.callObservers("controllerDidSetColIcon",e,t,this.owner)}})],l=[d.TraitViewControllerSet({controllerType:te,binds:!0,observes:!0,get parentView(){return this.owner.table.view},getTraitViewRef:e=>e.row,willAttachController(e){this.owner.callObservers("controllerWillAttachRow",e,this.owner)},didAttachController(e){const t=e.row.trait;null!==t&&this.attachRowTrait(t,e);const i=e.row.view;null!==i&&this.attachRowView(i,e)},willDetachController(e){const t=e.row.view;null!==t&&this.detachRowView(t,e);const i=e.row.trait;null!==i&&this.detachRowTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachRow",e,this.owner)},controllerDidAttachParent(e,t){const i=this.owner.table.view,s=t.row.view;if(null!==i&&null!==s){const e=t.getNextSibling(te),l=null!==e?e.row.view:null;i.reinsertChild(s,l)}},controllerWillAttachRowTrait(e,t){this.owner.callObservers("controllerWillAttachRowTrait",e,t,this.owner),this.attachRowTrait(e,t)},controllerDidDetachRowTrait(e,t){this.detachRowTrait(e,t),this.owner.callObservers("controllerDidDetachRowTrait",e,t,this.owner)},attachRowTrait(e,t){},detachRowTrait(e,t){},controllerWillAttachRowView(e,t){this.owner.callObservers("controllerWillAttachRowView",e,t,this.owner),this.attachRowView(e,t)},controllerDidDetachRowView(e,t){this.detachRowView(e,t),this.owner.callObservers("controllerDidDetachRowView",e,t,this.owner)},attachRowView(e,t){},detachRowView(e,t){e.remove()},controllerWillAttachLeafTrait(e,t){this.owner.callObservers("controllerWillAttachLeafTrait",e,t,this.owner),this.attachLeafTrait(e,t)},controllerDidDetachLeafTrait(e,t){this.detachLeafTrait(e,t),this.owner.callObservers("controllerDidDetachLeafTrait",e,t,this.owner)},attachLeafTrait(e,t){},detachLeafTrait(e,t){},controllerWillAttachLeafView(e,t){this.owner.callObservers("controllerWillAttachLeafView",e,t,this.owner),this.attachLeafView(e,t)},controllerDidDetachLeafView(e,t){this.detachLeafView(e,t),this.owner.callObservers("controllerDidDetachLeafView",e,t,this.owner)},attachLeafView(e,t){},detachLeafView(e,t){},controllerWillAttachCell(e,t){this.owner.callObservers("controllerWillAttachCell",e,t,this.owner),this.attachCell(e,t)},controllerDidDetachCell(e,t){this.detachCell(e,t),this.owner.callObservers("controllerDidDetachCell",e,t,this.owner)},attachCell(e,t){const i=e.cell.trait;null!==i&&this.attachCellTrait(i,e,t);const s=e.cell.view;null!==s&&this.attachCellView(s,e,t)},detachCell(e,t){const i=e.cell.trait;null!==i&&this.detachCellTrait(i,e,t);const s=e.cell.view;null!==s&&this.detachCellView(s,e,t)},controllerWillAttachCellTrait(e,t,i){this.owner.callObservers("controllerWillAttachCellTrait",e,t,i,this.owner),this.attachCellTrait(e,t,i)},controllerDidDetachCellTrait(e,t,i){this.detachCellTrait(e,t,i),this.owner.callObservers("controllerDidDetachCellTrait",e,t,i,this.owner)},attachCellTrait(e,t,i){},detachCellTrait(e,t,i){},controllerWillAttachCellView(e,t,i){this.owner.callObservers("controllerWillAttachCellView",e,t,i,this.owner),this.attachCellView(e,t,i)},controllerDidDetachCellView(e,t,i){this.detachCellView(e,t,i),this.owner.callObservers("controllerDidDetachCellView",e,t,i,this.owner)},attachCellView(e,t,i){if(e instanceof z){const s=e.content.view;null!==s&&this.attachCellContentView(s,t,i)}},detachCellView(e,t,i){if(e instanceof z){const s=e.content.view;null!==s&&this.detachCellContentView(s,t,i)}},controllerWillAttachCellContentView(e,t,i){this.owner.callObservers("controllerWillAttachCellContentView",e,t,i,this.owner),this.attachCellContentView(e,t,i)},controllerDidDetachCellContentView(e,t,i){this.detachCellContentView(e,t,i),this.owner.callObservers("controllerDidDetachCellContentView",e,t,i,this.owner)},attachCellContentView(e,t,i){},detachCellContentView(e,t,i){},controllerDidSetCellIcon(e,t,i){this.owner.callObservers("controllerDidSetCellIcon",e,t,i,this.owner)},controllerWillAttachTree(e,t){this.owner.callObservers("controllerWillAttachTree",e,t,this.owner),this.attachTree(e,t)},controllerDidDetachTree(e,t){this.detachTree(e,t),this.owner.callObservers("controllerDidDetachTree",e,t,this.owner)},attachTree(e,t){const i=e.table.trait;null!==i&&this.attachTreeTrait(i,e,t);const s=e.table.view;null!==s&&this.attachTreeView(s,e,t)},detachTree(e,t){const i=e.table.trait;null!==i&&this.detachTreeTrait(i,e,t);const s=e.table.view;null!==s&&this.detachTreeView(s,e,t)},controllerWillAttachTreeTrait(e,t,i){this.owner.callObservers("controllerWillAttachTreeTrait",e,t,i,this.owner),this.attachTreeTrait(e,t,i)},controllerDidDetachTreeTrait(e,t,i){this.detachTreeTrait(e,t,i),this.owner.callObservers("controllerDidDetachTreeTrait",e,t,i,this.owner)},attachTreeTrait(e,t,i){},detachTreeTrait(e,t,i){},controllerWillAttachTreeView(e,t,i){this.owner.callObservers("controllerWillAttachTreeView",e,t,i,this.owner),this.attachTreeView(e,t,i)},controllerDidDetachTreeView(e,t,i){this.detachTreeView(e,t,i),this.owner.callObservers("controllerDidDetachTreeView",e,t,i,this.owner)},attachTreeView(e,t,i){},detachTreeView(e,t,i){},controllerWillExpandRowView(e,t){this.owner.callObservers("controllerWillExpandRowView",e,t,this.owner)},controllerDidExpandRowView(e,t){this.owner.callObservers("controllerDidExpandRowView",e,t,this.owner)},controllerWillCollapseRowView(e,t){this.owner.callObservers("controllerWillCollapseRowView",e,t,this.owner)},controllerDidCollapseRowView(e,t){this.owner.callObservers("controllerDidCollapseRowView",e,t,this.owner)}})],u(null,null,t,{kind:"field",name:"table",static:!1,private:!1,access:{has:e=>"table"in e,get:e=>e.table,set:(e,t)=>{e.table=t}}},r,n),u(null,null,i,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}}},o,n),u(null,null,s,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}}},a,n),u(null,null,l,{kind:"field",name:"rows",static:!1,private:!1,access:{has:e=>"rows"in e,get:e=>e.rows,set:(e,t)=>{e.rows=t}}},h,n),e})(),ye=(()=>{var e;let s,r,a,h,c=[],d=[],w=[],p=[];return e=class e extends n.HtmlView{constructor(t){super(t),this.displayState=void v(this,c),this.backgroundColor=v(this,d,void 0),this.click=v(this,w,void 0),this.syntheticClick=v(this,p,void 0),this.displayState=e.HiddenState,this.initScrim()}initScrim(){this.setIntrinsic({classList:["scrim"],style:{display:"none",position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"auto",cursor:"pointer",backgroundColor:o.Color.black(0)}})}setDisplayState(e){this.displayState=e}isShown(){switch(this.displayState){case e.ShownState:case e.ShowingState:case e.ShowState:return!0;default:return!1}}isHidden(){switch(this.displayState){case e.HiddenState:case e.HidingState:case e.HideState:return!0;default:return!1}}show(i,s){this.isHidden()&&(s=void 0===s||!0===s?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(s),this.setDisplayState(e.ShowState),!1!==s?(this.style.backgroundColor.setIntrinsic(o.Color.black(0)),this.style.backgroundColor.setIntrinsic(o.Color.black(i),s)):(this.willShowScrim(),this.style.backgroundColor.setIntrinsic(o.Color.black(i)),this.didShowScrim()))}willShowScrim(){this.setDisplayState(e.ShowingState),this.style.display.setIntrinsic("block")}didShowScrim(){this.setDisplayState(e.ShownState)}hide(i){this.isShown()&&(i=void 0===i||!0===i?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(i),this.setDisplayState(e.HideState),!1!==i?this.style.backgroundColor.setIntrinsic(o.Color.black(0),i):(this.willHideScrim(),this.style.backgroundColor.setIntrinsic(o.Color.black(0)),this.didHideScrim()))}willHideScrim(){this.setDisplayState(e.HidingState)}didHideScrim(){this.setDisplayState(e.HiddenState),this.style.display.setIntrinsic("none")}get modal(){return i.Provider.getter()}serviceDidSetModality(t,i,s){if(0!==t){const s=.5*t;0===i?this.show(s):(this.style.backgroundColor.setIntrinsic(o.Color.black(s)),this.displayState===e.ShowingState&&this.didShowScrim())}else this.hide()}},s=[i.Animator({inherits:!0,get parent(){return this.owner.style.backgroundColor},willTransition(){const e=this.owner.displayState;e===ye.ShowState?this.owner.willShowScrim():e===ye.HideState&&this.owner.willHideScrim()},didTransition(){const e=this.owner.displayState;e===ye.ShowingState?this.owner.didShowScrim():e===ye.HidingState&&this.owner.didHideScrim()}})],r=[i.Provider({extends:!0,observes:!0,didAttachService(e,t){this.owner.serviceDidSetModality(e.modality.value,0,e),super.didAttachService(e,t)},willDetachService(e){super.willDetachService(e),this.owner.hide(!1)}})],a=[i.EventHandler({initEventType:()=>"undefined"!=typeof PointerEvent?"pointerup":"undefined"!=typeof TouchEvent?"touchend":"click",handle(e){const t=this.owner.modal.service;null!==t&&t.displaceModals()}})],h=[i.EventHandler({eventType:"click",enabled:"undefined"!=typeof PointerEvent||"undefined"!=typeof TouchEvent,handle(e){e.preventDefault(),e.stopPropagation()}})],u(e,null,r,{kind:"getter",name:"modal",static:!1,private:!1,access:{has:e=>"modal"in e,get:e=>e.modal}},null,c),u(null,null,s,{kind:"field",name:"backgroundColor",static:!1,private:!1,access:{has:e=>"backgroundColor"in e,get:e=>e.backgroundColor,set:(e,t)=>{e.backgroundColor=t}}},d,c),u(null,null,a,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}}},w,c),u(null,null,h,{kind:"field",name:"syntheticClick",static:!1,private:!1,access:{has:e=>"syntheticClick"in e,get:e=>e.syntheticClick,set:(e,t)=>{e.syntheticClick=t}}},p,c),e.HiddenState=0,e.HidingState=1,e.HideState=2,e.ShownState=3,e.ShowingState=4,e.ShowState=5,e})(),be=(()=>{var e;let a,h,c,d,w,p,g,f,y,b,m,V=[],T=[],C=[],k=[],L=[],D=[],S=[],I=[],A=[],O=[],x=[],P=[];return e=class extends n.HtmlView{constructor(e){super(e),this.backgroundColor=(v(this,V),v(this,T,void 0)),this.placementGap=v(this,C,void 0),this.arrowWidth=v(this,k,void 0),this.arrowHeight=v(this,L,void 0),this.source=v(this,D,void 0),this.presence=v(this,S,void 0),this.modality=v(this,I,void 0),this.placement=v(this,A,void 0),this.placementFrame=v(this,O,void 0),this.dropdown=v(this,x,void 0),this.click=v(this,P,void 0),this.sourceFrame=null,this.currentPlacement="none",this.initArrow()}initArrow(){const e=this.createArrow();null!==e&&this.prependChild(e,"arrow")}createArrow(){return n.HtmlView.fromTag("div").setIntrinsic({classList:["popover-arrow"],style:{display:"none",position:"absolute",width:0,height:0}})}needsProcess(e){return 0!=(e&(r.View.NeedsScroll|r.View.NeedsAnimate))&&this.requireUpdate(r.View.NeedsLayout),e}onLayout(){super.onLayout(),this.place()}place(e=!1){const t=this.source.view,i=this.sourceFrame,s=null!==t?t.popoverFrame:null;if(null===s||0===this.placement.value.length||!e&&s.equals(i))return"none";this.sourceFrame=null;const l=this.placePopover(t,s),r=this.getChild("arrow");return r instanceof n.HtmlView&&this.placeArrow(t,s,r,l),l}placePopover(e,t){const s=this.node,l=s.offsetParent;if(null===l)return"none";const n=s.clientWidth,r=s.clientHeight,o=l.getBoundingClientRect(),a=o.left,h=o.top,c=t.left-window.pageXOffset-a,d=t.right-window.pageXOffset-a,w=t.top-window.pageYOffset-h,u=t.bottom-window.pageYOffset-h,v=t.width,p=t.height,g=c+v/2,f=w+p/2,y=this.placementFrame.value,b=null!==y?y.left:0,m=(null!==y?y.right:window.innerWidth)-a,V=null!==y?y.top:0,T=(null!==y?y.bottom:window.innerHeight)-h,C=c-b-window.pageXOffset,k=m-c-v,L=w-V-window.pageYOffset,D=T-w-p,S=this.dropdown.value,I=this.arrowHeight.getValue().pxValue(),A=this.placementGap.getValue().pxValue();let O;const x=this.placement.value;for(let e=0;e<x.length;e+=1){const t=x[e];if("above"===t||"below"===t||"over"===t){O=t;break}if("top"===t&&r+I+A<=L){O=t;break}if("bottom"===t&&r+I+A<=D){O=t;break}if("left"===t&&n+I+A<=C){O=t;break}if("right"===t&&n+I+A<=k){O=t;break}}if(void 0===O){O="none";for(let e=0;e<x.length;e+=1){const t=x[e];if("top"===t&&L>=D){O=t;break}if("bottom"===t&&D>=L){O=t;break}if("left"===t&&C>=k){O=t;break}if("right"===t&&k>=C){O=t;break}}}let P=s.offsetLeft,B=s.offsetTop,R=null,W=null;const H=this.style.width.pxValue(),F=this.style.height.pxValue();let M=H,N=F;const E=this.style.maxWidth.pxState(),z=this.style.maxHeight.pxState();let q=E,U=z;return"above"===O?(P=Math.round(b),B=Math.round(V),R=Math.round((null!==y?y.width:window.innerWidth)-m),M=Math.round(Math.max(0,m-b)),N=null,q=null,U=Math.round(Math.max(0,T-V))):"below"===O?(P=Math.round(b),B=Math.round(T-r),R=Math.round(m-(null!==y?y.width:window.innerWidth)),M=Math.round(Math.max(0,m-b)),N=null,q=null,U=Math.round(Math.max(0,T-V))):"over"===O?(P=Math.round(b),B=Math.round(V),R=Math.round(m-(null!==y?y.width:window.innerWidth)),W=Math.round(T-(null!==y?y.height:window.innerHeight)),M=Math.round(Math.max(0,m-b)),N=Math.round(Math.max(0,T-V)),q=null,U=null):"top"!==O||S?"bottom"!==O||S?"left"!==O||S?"right"!==O||S?"top"===O&&S?(P=Math.max(b,c),B=Math.round(Math.max(V,w-(r+A))),M=Math.round(Math.max(0,Math.min(v,m-c))),N=null,q=Math.round(Math.max(0,m-b)),U=Math.round(Math.max(0,u-V))):"bottom"===O&&S?(P=Math.max(b,c),B=Math.round(Math.max(V,u+A)),M=Math.round(Math.max(0,Math.min(v,m-c))),N=null,q=Math.round(Math.max(0,m-b)),U=Math.round(Math.max(0,T-w))):"left"===O&&S?(P=Math.round(Math.max(b,c-(n+A))),B=Math.max(V,w),M=null,N=Math.round(Math.max(0,Math.min(p,T-w))),q=Math.round(Math.max(0,d-b)),U=Math.round(Math.max(0,T-V))):"right"===O&&S&&(P=Math.round(Math.max(b,d+A)),B=Math.max(V,w),M=null,N=Math.round(Math.max(0,Math.min(p,T-w))),q=Math.round(Math.max(0,m-c)),U=Math.round(Math.max(0,T-V))):(P=Math.round(Math.max(b,d+I+A)),B=f-r/2<=V?Math.round(V):f+r/2>=T?Math.round(T-r):Math.round(f-r/2),q=Math.round(Math.max(0,m-c)),U=Math.round(Math.max(0,T-V))):(P=Math.round(Math.max(b,c-(n+I+A))),B=f-r/2<=V?Math.round(V):f+r/2>=T?Math.round(T-r):Math.round(f-r/2),q=Math.round(Math.max(0,d-b)),U=Math.round(Math.max(0,T-V))):(P=g-n/2<=b?Math.round(b):g+n/2>=m?Math.round(m-n):Math.round(g-n/2),B=Math.round(Math.max(V,u+I+A)),q=Math.round(Math.max(0,m-b)),U=Math.round(Math.max(0,T-w))):(P=g-n/2<=b?Math.round(b):g+n/2>=m?Math.round(m-n):Math.round(g-n/2),B=Math.round(Math.max(V,w-(r+I+A))),q=Math.round(Math.max(0,m-b)),U=Math.round(Math.max(0,u-V))),"none"!==O&&(P!==s.offsetLeft&&this.style.left.hasAffinity(i.Affinity.Intrinsic)||B!==s.offsetTop&&this.style.top.hasAffinity(i.Affinity.Intrinsic)||M!==H&&this.style.width.hasAffinity(i.Affinity.Intrinsic)||N!==F&&this.style.height.hasAffinity(i.Affinity.Intrinsic)||q!==E&&this.style.maxWidth.hasAffinity(i.Affinity.Intrinsic)||U!==z&&this.style.maxHeight.hasAffinity(i.Affinity.Intrinsic))&&(this.willPlacePopover(O),this.style.setIntrinsic({position:"absolute",left:P,right:R,top:B,bottom:W,width:M,height:N,maxWidth:q,maxHeight:U}),this.onPlacePopover(O),this.didPlacePopover(O)),this.currentPlacement=O,O}willPlacePopover(e){this.callObservers("popoverWillPlace",e,this)}onPlacePopover(e){}didPlacePopover(e){this.callObservers("popoverDidPlace",e,this)}placeArrow(e,t,i,l){const n=this.node,r=n.offsetParent;if(null===r)return;const a=r.getBoundingClientRect(),h=a.left,c=a.top,d=t.left-window.pageXOffset-h,w=t.top-window.pageYOffset-c,u=d+t.width/2,v=w+t.height/2,p=n.offsetLeft,g=p+n.clientWidth,f=n.offsetTop,y=f+n.clientHeight;let b=this.style.backgroundColor.value;null===b&&(b=o.Color.transparent());const m=this.style.borderRadius.get(),V=m instanceof s.Length?m.pxValue():0,T=this.arrowWidth.getValue().pxValue(),C=this.arrowHeight.getValue().pxValue(),k=p+V+T/2,L=g-V-T/2,D=f+V+T/2,S=y-V-T/2;i.style.setIntrinsic({top:null,right:null,bottom:null,left:null,borderWidth:null,borderStyle:void 0,borderColor:null,borderLeftWidth:null,borderLeftStyle:void 0,borderLeftColor:null,borderRightWidth:null,borderRightStyle:void 0,borderRightColor:null,borderTopWidth:null,borderTopStyle:void 0,borderTopColor:null,borderBottomWidth:null,borderBottomStyle:void 0,borderBottomColor:null,zIndex:100}),"none"===l||"above"===l||"below"===l||"over"===l?i.style.display.setIntrinsic("none"):Math.round(v)<=Math.round(f-C)&&k<=u&&u<=L?i.style.setIntrinsic({display:"block",top:Math.round(-C),left:Math.round(u-p-T/2),borderLeftWidth:Math.round(T/2),borderLeftStyle:"solid",borderLeftColor:o.Color.transparent(),borderRightWidth:Math.round(T/2),borderRightStyle:"solid",borderRightColor:o.Color.transparent(),borderBottomWidth:Math.round(C),borderBottomStyle:"solid",borderBottomColor:b}):Math.round(y+C)<=Math.round(v)&&k<=u&&u<=L?i.style.setIntrinsic({display:"block",bottom:Math.round(-C),left:Math.round(u-p-T/2),borderLeftWidth:Math.round(T/2),borderLeftStyle:"solid",borderLeftColor:o.Color.transparent(),borderRightWidth:Math.round(T/2),borderRightStyle:"solid",borderRightColor:o.Color.transparent(),borderTopWidth:Math.round(C),borderTopStyle:"solid",borderTopColor:b}):Math.round(u)<=Math.round(p-C)&&D<=v&&v<=S?i.style.setIntrinsic({display:"block",left:Math.round(-C),top:Math.round(v-f-T/2),borderTopWidth:Math.round(T/2),borderTopStyle:"solid",borderTopColor:o.Color.transparent(),borderBottomWidth:Math.round(T/2),borderBottomStyle:"solid",borderBottomColor:o.Color.transparent(),borderRightWidth:Math.round(C),borderRightStyle:"solid",borderRightColor:b}):Math.round(g+C)<=Math.round(u)&&D<=v&&v<=S?i.style.setIntrinsic({display:"block",right:Math.round(-C),top:Math.round(v-f-T/2),borderTopWidth:Math.round(T/2),borderTopStyle:"solid",borderTopColor:o.Color.transparent(),borderBottomWidth:Math.round(T/2),borderBottomStyle:"solid",borderBottomColor:o.Color.transparent(),borderLeftWidth:Math.round(C),borderLeftStyle:"solid",borderLeftColor:b}):i.style.display.setIntrinsic("none")}},a=[i.Animator({inherits:!0,get parent(){return this.owner.style.backgroundColor},didSetValue(e){this.owner.place()}})],h=[l.ThemeAnimator({valueType:s.Length,value:s.Length.zero()})],c=[l.ThemeAnimator({valueType:s.Length,value:s.Length.px(10)})],d=[l.ThemeAnimator({valueType:s.Length,value:s.Length.px(8)})],w=[r.ViewRef({observes:!0,willAttachView(e){this.owner.callObservers("popoverWillAttachSource",e,this.owner)},didAttachView(e){this.owner.requireUpdate(r.View.NeedsLayout)},didDetachView(e){this.owner.callObservers("popoverDidDetachSource",e,this.owner)},viewDidMount(e){this.owner.place()},viewDidResize(e){this.owner.place()},viewDidScroll(e){this.owner.place()},viewDidAnimate(e){this.owner.place()},viewDidLayout(e){this.owner.place()},viewDidProject(e){this.owner.place()},viewDidSetAttribute(e,t,i){this.owner.place()},viewDidSetStyle(e,t,i,s){this.owner.place()}})],p=[o.PresenceAnimator({value:o.Presence.dismissed(),updateFlags:r.View.NeedsLayout,get transition(){return this.owner.getLookOr(l.Look.timing,null)},didSetValue(e){const t=e.phase,i=this.owner.currentPlacement;"above"===i?this.owner.style.setIntrinsic({marginTop:(1-t)*-this.owner.node.clientHeight,opacity:void 0}):"below"===i?this.owner.style.setIntrinsic({marginTop:(1-t)*this.owner.node.clientHeight,opacity:void 0}):this.owner.style.setIntrinsic({marginTop:null,opacity:t}),this.owner.callObservers("viewDidSetPresence",e,this.owner)},willPresent(){this.owner.callObservers("viewWillPresent",this.owner),this.owner.place(),this.owner.style.visibility.setIntrinsic("visible")},didPresent(){this.owner.style.setIntrinsic({marginTop:null,opacity:void 0,pointerEvents:"auto"}),this.owner.callObservers("viewDidPresent",this.owner)},willDismiss(){this.owner.callObservers("viewWillDismiss",this.owner),this.owner.style.pointerEvents.setIntrinsic("none")},didDismiss(){this.owner.style.setIntrinsic({marginTop:null,opacity:void 0,visibility:"hidden"}),this.owner.callObservers("viewDidDismiss",this.owner)}})],g=[i.Property({valueType:Number,value:0,didSetValue(e){this.owner.callObservers("viewDidSetModality",e,this.owner)}})],f=[i.Property({value:["top","bottom","right","left"],didSetValue(e){this.owner.place()},equalValues:(e,i)=>t.Arrays.equal(e,i)})],y=[i.Property({valueType:s.R2Box,value:null,didSetValue(e){this.owner.place()},fromLike:e=>null!==e?s.R2Box.fromLike(e):null})],b=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.place()}})],m=[i.EventHandler({eventType:"click",bindsOwner:!0,handle(e){e.stopPropagation()}})],u(null,null,a,{kind:"field",name:"backgroundColor",static:!1,private:!1,access:{has:e=>"backgroundColor"in e,get:e=>e.backgroundColor,set:(e,t)=>{e.backgroundColor=t}}},T,V),u(null,null,h,{kind:"field",name:"placementGap",static:!1,private:!1,access:{has:e=>"placementGap"in e,get:e=>e.placementGap,set:(e,t)=>{e.placementGap=t}}},C,V),u(null,null,c,{kind:"field",name:"arrowWidth",static:!1,private:!1,access:{has:e=>"arrowWidth"in e,get:e=>e.arrowWidth,set:(e,t)=>{e.arrowWidth=t}}},k,V),u(null,null,d,{kind:"field",name:"arrowHeight",static:!1,private:!1,access:{has:e=>"arrowHeight"in e,get:e=>e.arrowHeight,set:(e,t)=>{e.arrowHeight=t}}},L,V),u(null,null,w,{kind:"field",name:"source",static:!1,private:!1,access:{has:e=>"source"in e,get:e=>e.source,set:(e,t)=>{e.source=t}}},D,V),u(null,null,p,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}}},S,V),u(null,null,g,{kind:"field",name:"modality",static:!1,private:!1,access:{has:e=>"modality"in e,get:e=>e.modality,set:(e,t)=>{e.modality=t}}},I,V),u(null,null,f,{kind:"field",name:"placement",static:!1,private:!1,access:{has:e=>"placement"in e,get:e=>e.placement,set:(e,t)=>{e.placement=t}}},A,V),u(null,null,y,{kind:"field",name:"placementFrame",static:!1,private:!1,access:{has:e=>"placementFrame"in e,get:e=>e.placementFrame,set:(e,t)=>{e.placementFrame=t}}},O,V),u(null,null,b,{kind:"field",name:"dropdown",static:!1,private:!1,access:{has:e=>"dropdown"in e,get:e=>e.dropdown,set:(e,t)=>{e.dropdown=t}}},x,V),u(null,null,m,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}}},P,V),e.HiddenState=0,e.HidingState=1,e.HideState=2,e.ShownState=3,e.ShowingState=4,e.ShowState=5,e})(),me=(()=>{var e;let a,h,d,w,p,g,f,y,b,m=[],V=[],T=[],C=[],k=[],L=[],D=[],S=[],I=[];return e=class extends n.HtmlView{constructor(e){super(e),this.collapsedWidth=(v(this,m),v(this,V,void 0)),this.expandedWidth=v(this,T,void 0),this.effectiveWidth=v(this,C,void 0),this.effectiveHeight=v(this,k,void 0),this.placement=v(this,L,void 0),this.presence=v(this,D,void 0),this.stretch=v(this,S,void 0),this.modality=v(this,I,void 0),this.initDrawer()}initDrawer(){this.setIntrinsic({classList:["drawer"],style:{display:"flex",overflowX:"hidden",overflowY:"auto",overscrollBehaviorY:"contain",overflowScrolling:"touch"}})}isHorizontal(){return"top"===this.placement.value||"bottom"===this.placement.value}isVertical(){return"left"===this.placement.value||"right"===this.placement.value}get edgeInsets(){return i.Property.getter()}onLayout(){super.onLayout(),this.style.display.setIntrinsic(this.presence.dismissed?"none":"flex"),this.layoutDrawer(),"mobile"===this.viewIdiom?this.style.boxShadow.setIntrinsic(this.getLookOr(l.Look.shadow,l.Mood.floating,null)):this.style.boxShadow.setIntrinsic(this.getLookOr(l.Look.shadow,null))}layoutDrawer(){const e=this.placement.value;"top"===e?this.layoutDrawerTop():"right"===e?this.layoutDrawerRight():"bottom"===e?this.layoutDrawerBottom():"left"===e&&this.layoutDrawerLeft()}layoutDrawerTop(){const e=this.presence.getPhase();this.classList.add("drawer-top"),this.classList.remove("drawer-right"),this.classList.remove("drawer-bottom"),this.classList.remove("drawer-left"),this.style.setIntrinsic({position:"fixed",width:null,height:null,left:s.Length.zero(),right:s.Length.zero(),bottom:null});const t=this.style.height.getCssValue();this.style.top.setIntrinsic(t.times(e-1)),this.effectiveWidth.setIntrinsic(this.style.width.value),this.effectiveHeight.setIntrinsic(t.times(e)),this.stretch.collapsed&&this.expand()}layoutDrawerRight(){const e=this.stretch.getPhase(),t=this.presence.getPhase();let l;if(this.classList.remove("drawer-top"),this.classList.add("drawer-right"),this.classList.remove("drawer-bottom"),this.classList.remove("drawer-left"),this.style.setIntrinsic({position:"fixed",height:null,top:s.Length.zero(),bottom:s.Length.zero(),left:null}),this.style.width.hasAffinity(i.Affinity.Intrinsic)){const t=this.collapsedWidth.getValue(),i=this.expandedWidth.getValue();l=t.times(1-e).plus(i.times(e))}else l=this.style.width.getCssValue();this.style.width.setIntrinsic(l),this.style.right.setIntrinsic(l.times(t-1)),this.effectiveWidth.setIntrinsic(l.times(t)),this.effectiveHeight.setIntrinsic(this.style.height.value)}layoutDrawerBottom(){const e=this.presence.getPhase();this.classList.remove("drawer-top"),this.classList.remove("drawer-right"),this.classList.add("drawer-bottom"),this.classList.remove("drawer-left"),this.style.setIntrinsic({position:"fixed",width:null,height:null,left:s.Length.zero(),right:s.Length.zero(),top:null});const t=this.style.height.getCssValue();this.style.bottom.setIntrinsic(t.times(e-1)),this.effectiveWidth.setIntrinsic(this.style.width.value),this.effectiveHeight.setIntrinsic(t.times(e)),this.stretch.collapsed&&this.expand()}layoutDrawerLeft(){const e=this.stretch.getPhase(),t=this.presence.getPhase();let l;if(this.classList.remove("drawer-top"),this.classList.remove("drawer-right"),this.classList.remove("drawer-bottom"),this.classList.add("drawer-left"),this.style.setIntrinsic({position:"fixed",height:null,top:s.Length.zero(),bottom:s.Length.zero(),right:null}),this.style.width.hasAffinity(i.Affinity.Intrinsic)){const t=this.collapsedWidth.getValue(),i=this.expandedWidth.getValue();l=t.times(1-e).plus(i.times(e))}else l=this.style.width.getCssValue();this.style.width.setIntrinsic(l),this.style.left.setIntrinsic(l.times(t-1)),this.effectiveWidth.setIntrinsic(l.times(t)),this.effectiveHeight.setIntrinsic(this.style.height.value)}present(e){e=void 0===e||!0===e?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e),this.presence.present(e)}dismiss(e){e=void 0===e||!0===e?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e),this.presence.dismiss(e)}expand(e){e=void 0===e||!0===e?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e),this.stretch.expand(e)}collapse(e){e=void 0===e||!0===e?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e),this.stretch.collapse(e)}toggle(e){e=void 0===e||!0===e?this.getLookOr(l.Look.timing,!1):t.Timing.fromLike(e),"mobile"===this.viewIdiom||this.isHorizontal()?this.presence.presented?this.presence.dismiss(e):(this.stretch.expand(e),this.presence.present(e),this.modal.present(this,{modal:!0})):(this.stretch.toggle(e),this.presence.present(e))}},a=[l.ThemeConstraintAnimator({valueType:s.Length,value:s.Length.px(60)})],h=[l.ThemeConstraintAnimator({valueType:s.Length,value:s.Length.px(200)})],d=[c.ConstraintProperty({valueType:s.Length,value:null,didSetValue(e,t){this.owner.callObservers("viewDidSetEffectiveWidth",e,this.owner)},toNumber:e=>null!==e?e.pxValue():0})],w=[c.ConstraintProperty({valueType:s.Length,value:null,didSetValue(e,t){this.owner.callObservers("viewDidSetEffectiveHeight",e,this.owner)},toNumber:e=>null!==e?e.pxValue():0})],p=[i.Property({valueType:String,value:"left",updateFlags:r.View.NeedsResize|r.View.NeedsLayout,didSetValue(e){this.owner.callObservers("viewDidSetPlacement",e,this.owner),this.owner.edgeInsets.decohereOutlets()}})],g=[o.PresenceAnimator({value:o.Presence.presented(),updateFlags:r.View.NeedsLayout,get transition(){return this.owner.getLookOr(l.Look.timing,null)},didSetValue(e){this.owner.callObservers("viewDidSetPresence",e,this.owner)},willPresent(){this.owner.callObservers("viewWillPresent",this.owner)},didPresent(){this.owner.callObservers("viewDidPresent",this.owner)},willDismiss(){this.owner.callObservers("viewWillDismiss",this.owner)},didDismiss(){this.owner.callObservers("viewDidDismiss",this.owner)}})],f=[o.ExpansionAnimator({value:o.Expansion.expanded(),updateFlags:r.View.NeedsResize|r.View.NeedsLayout,get transition(){return this.owner.getLookOr(l.Look.timing,null)},willExpand(){this.owner.modal.dismiss(),this.owner.callObservers("viewWillExpand",this.owner)},didExpand(){this.owner.callObservers("viewDidExpand",this.owner)},willCollapse(){this.owner.modal.dismiss(),this.owner.callObservers("viewWillCollapse",this.owner)},didCollapse(){this.owner.callObservers("viewDidCollapse",this.owner)}})],y=[i.Property({extends:!0,getOutletValue(e){let t=this.value,i=t.insetTop,s=t.insetRight,l=t.insetBottom,n=t.insetLeft;const r=this.owner.placement.value;return"top"===r&&0!==l?(l=0,t={insetTop:i,insetRight:s,insetBottom:l,insetLeft:n}):"right"===r&&0!==n?(n=0,t={insetTop:i,insetRight:s,insetBottom:l,insetLeft:n}):"bottom"===r&&0!==i?(i=0,t={insetTop:i,insetRight:s,insetBottom:l,insetLeft:n}):"left"===r&&0!==s&&(s=0,t={insetTop:i,insetRight:s,insetBottom:l,insetLeft:n}),t}})],b=[i.Property({valueType:Number,value:0,didSetValue(e){this.owner.callObservers("viewDidSetModality",e,this.owner)}})],u(e,null,y,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets}},null,m),u(null,null,a,{kind:"field",name:"collapsedWidth",static:!1,private:!1,access:{has:e=>"collapsedWidth"in e,get:e=>e.collapsedWidth,set:(e,t)=>{e.collapsedWidth=t}}},V,m),u(null,null,h,{kind:"field",name:"expandedWidth",static:!1,private:!1,access:{has:e=>"expandedWidth"in e,get:e=>e.expandedWidth,set:(e,t)=>{e.expandedWidth=t}}},T,m),u(null,null,d,{kind:"field",name:"effectiveWidth",static:!1,private:!1,access:{has:e=>"effectiveWidth"in e,get:e=>e.effectiveWidth,set:(e,t)=>{e.effectiveWidth=t}}},C,m),u(null,null,w,{kind:"field",name:"effectiveHeight",static:!1,private:!1,access:{has:e=>"effectiveHeight"in e,get:e=>e.effectiveHeight,set:(e,t)=>{e.effectiveHeight=t}}},k,m),u(null,null,p,{kind:"field",name:"placement",static:!1,private:!1,access:{has:e=>"placement"in e,get:e=>e.placement,set:(e,t)=>{e.placement=t}}},L,m),u(null,null,g,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}}},D,m),u(null,null,f,{kind:"field",name:"stretch",static:!1,private:!1,access:{has:e=>"stretch"in e,get:e=>e.stretch,set:(e,t)=>{e.stretch=t}}},S,m),u(null,null,b,{kind:"field",name:"modality",static:!1,private:!1,access:{has:e=>"modality"in e,get:e=>e.modality,set:(e,t)=>{e.modality=t}}},I,m),e})(),Ve=(()=>{var e;let s,l,n=[],r=[],o=[];return e=class e extends m{constructor(e){super(e),this.drawerView=void v(this,r),this.click=v(this,o,void 0),this.drawerView=null,this.initIcon()}initButton(){super.initButton(),this.classList.add("drawer-button")}initIcon(){this.icon.push(e.hamburgerIcon)}setDrawerView(e){this.drawerView=e}static get hamburgerIcon(){return a.VectorIcon.create(24,24,"M21,17L21,19L3,19L3,17L21,17ZM21,11L21,13L3,13L3,11L21,11ZM3,5L3,7L21,7L21,5L3,5Z")}},l=[i.EventHandler({extends:!0,handle(e){super.handle(e);const t=this.owner.drawerView;null!==t&&t.toggle()}})],s=[t.Lazy],u(e,null,s,{kind:"getter",name:"hamburgerIcon",static:!0,private:!1,access:{has:e=>"hamburgerIcon"in e,get:e=>e.hamburgerIcon}},null,n),u(null,null,l,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}}},o,r),v(e,n),e})(),Te=(()=>{var e;let t,s,a,h,c=[],d=[],w=[],p=[],g=[];return e=class extends n.HtmlView{constructor(e){super(e),this.fullBleed=(v(this,c),v(this,d,void 0)),this.sheetAlign=v(this,w,void 0),this.presence=v(this,p,void 0),this.scroll=v(this,g,void 0),this.initSheet()}initSheet(){this.setIntrinsic({classList:["sheet"],style:{position:"relative",boxSizing:"border-box",overflowX:"hidden",overflowY:"auto",overscrollBehaviorY:"contain",overflowScrolling:"touch",backgroundColor:l.Look.backgroundColor}})}present(e){this.presence.present(e)}dismiss(e){this.presence.dismiss(e)}layoutSheet(){const e=this.style.width.pxState(),t=this.sheetAlign.value,i=this.presence.value.phase;this.style.left.setIntrinsic(e*t*(1-i))}},t=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.callObservers("viewDidSetFullBleed",e,this.owner)}})],s=[i.Property({valueType:Number,value:1})],a=[o.PresenceAnimator({value:o.Presence.presented(),updateFlags:r.View.NeedsLayout,init(){this.pointerEvents=void 0,this.overflowX=void 0,this.overflowY=void 0},get transition(){return this.owner.getLookOr(l.Look.timing,l.Mood.navigating,null)},willPresent(){this.owner.callObservers("viewWillPresent",this.owner)},didPresent(){this.owner.style.pointerEvents.setState(void 0,i.Affinity.Transient),this.owner.callObservers("viewDidPresent",this.owner)},willDismiss(){this.owner.callObservers("viewWillDismiss",this.owner),this.pointerEvents=this.owner.style.pointerEvents.state,this.overflowX=this.owner.style.overflowX.state,this.overflowY=this.owner.style.overflowY.state,this.owner.style.pointerEvents.setState("none",i.Affinity.Transient),this.owner.style.overflowX.setIntrinsic("hidden"),this.owner.style.overflowY.setIntrinsic("hidden")},didDismiss(){this.owner.style.pointerEvents.setState(this.pointerEvents,i.Affinity.Transient),this.owner.style.overflowX.setIntrinsic(this.overflowX),this.owner.style.overflowY.setIntrinsic(this.overflowY),this.pointerEvents=void 0,this.overflowX=void 0,this.overflowY=void 0,this.owner.callObservers("viewDidDismiss",this.owner)}})],h=[i.EventHandler({eventType:"scroll",bindsOwner:!0,handle(e){this.owner.requireUpdate(r.View.NeedsScroll)}})],u(null,null,t,{kind:"field",name:"fullBleed",static:!1,private:!1,access:{has:e=>"fullBleed"in e,get:e=>e.fullBleed,set:(e,t)=>{e.fullBleed=t}}},d,c),u(null,null,s,{kind:"field",name:"sheetAlign",static:!1,private:!1,access:{has:e=>"sheetAlign"in e,get:e=>e.sheetAlign,set:(e,t)=>{e.sheetAlign=t}}},w,c),u(null,null,a,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}}},p,c),u(null,null,h,{kind:"field",name:"scroll",static:!1,private:!1,access:{has:e=>"scroll"in e,get:e=>e.scroll,set:(e,t)=>{e.scroll=t}}},g,c),e})(),Ce=(()=>{var e;let s,n,r,o,a,h,c,w,p,g=[],f=[],y=[],b=[],m=[],V=[],C=[],k=[],L=[],D=[];return e=class extends d.Controller{constructor(){super(...arguments),this.fullBleed=(v(this,g),v(this,f,void 0)),this.searchable=v(this,y,void 0),this.searching=v(this,b,void 0),this.sheet=v(this,m,void 0),this.back=v(this,V,void 0),this.forward=v(this,C,void 0),this.title=v(this,k,void 0),this.handle=v(this,L,void 0),this.modeTools=v(this,D,void 0)}updateSearch(e,t){}submitSearch(e,t){}},s=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.callObservers("controllerDidSetFullBleed",e,this.owner);const t=this.owner.sheet.view;null!==t&&t.fullBleed.setValue(e,i.Affinity.Inherited)}})],n=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.callObservers("controllerDidSetSearchable",e,this.owner)}})],r=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.callObservers("controllerDidSetSearching",e,this.owner)}})],o=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachSheetTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachSheetTrait",e,this.owner)},viewType:Te,observesView:!0,willAttachView(e){this.owner.callObservers("controllerWillAttachSheetView",e,this.owner)},didAttachView(e){this.owner.fullBleed.setIntrinsic(e.fullBleed.value)},didDetachView(e){this.owner.callObservers("controllerDidDetachSheetView",e,this.owner)},viewDidScroll(e){this.owner.callObservers("controllerDidScrollSheetView",e,this.owner)},viewDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)},viewWillPresent(e){this.owner.callObservers("controllerWillPresentSheetView",e,this.owner)},viewDidPresent(e){this.owner.callObservers("controllerDidPresentSheetView",e,this.owner)},viewWillDismiss(e){this.owner.callObservers("controllerWillDismissSheetView",e,this.owner)},viewDidDismiss(e){this.owner.callObservers("controllerDidDismissSheetView",e,this.owner)}})],a=[d.ControllerRef({get controllerType(){return Ce},binds:!1,willAttachController(e){this.owner.callObservers("controllerWillAttachBack",e,this.owner)},didDetachController(e){this.owner.callObservers("controllerDidDetachBack",e,this.owner)}})],h=[d.ControllerRef({get controllerType(){return Ce},binds:!1,willAttachController(e){this.owner.callObservers("controllerWillAttachForward",e,this.owner)},didDetachController(e){this.owner.callObservers("controllerDidDetachForward",e,this.owner)}})],c=[d.TraitViewControllerRef({controllerType:O,binds:!0,observes:!0,getTraitViewRef:e=>e.tool,willAttachController(e){this.owner.callObservers("controllerWillAttachTitle",e,this.owner)},didAttachController(e){const t=e.tool.attachView();this.attachToolView(t,e)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachTitle",e,this.owner)},controllerWillAttachToolView(e,t){this.attachToolView(e,t)},controllerDidDetachToolView(e,t){this.detachToolView(e,t)},attachToolView(e,t){},detachToolView(e,t){},controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressTitle",e,t,this.owner)},controllerDidLongPressToolView(e){this.owner.callObservers("controllerDidLongPressTitle",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.controller;null===t&&(t=this.createController());const i=t.tool.attachView();return i instanceof S&&i.content.set(e),t}return super.fromLike(e)},createController(){const e=x.create();return e.tool.attachView().style.fontSize.setIntrinsic(14),e}})],w=[d.TraitViewControllerRef({controllerType:O,binds:!0,observes:!0,getTraitViewRef:e=>e.tool,init(){this.active=!1},initController(e){const t=this.view;null!==t&&this.updateActive(this.active,t)},willAttachController(e){this.owner.callObservers("controllerWillAttachHandle",e,this.owner)},didAttachController(e){const t=e.tool.attachView();this.attachToolView(t,e)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachHandle",e,this.owner)},controllerWillAttachToolView(e,t){this.attachToolView(e,t),this.updateActive(this.active,e)},controllerDidDetachToolView(e,t){this.detachToolView(e,t)},attachToolView(e,t){},detachToolView(e,t){},controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressHandle",e,t,this.owner)},controllerDidLongPressToolView(e){this.owner.callObservers("controllerDidLongPressHandle",e,this.owner)},setActive(e){this.active=e;const t=this.view;null!==t&&this.updateActive(e,t)},updateActive(e,t){if(t instanceof I){const i=!t.inserting&&t.getLook(l.Look.timing);e?t.iconColor.setIntrinsic(l.Look.accentColor,i):t.iconColor.setIntrinsic(l.Look.iconColor,i)}},setIcon(e){this.insertController().tool.attachView().graphics.setIntrinsic(e)},createController(){const e=P.create(),t=T.create("",0,0,36);return e.layout.set(t),e.tool.attachView().iconLayout.setIntrinsic({width:24,height:24}),e}})],p=[d.TraitViewControllerSet({controllerType:O,binds:!1,ordered:!0,observes:!0,getTraitViewRef:e=>e.tool,willAttachController(e){let i=t.Objects.getNextValue(this.controllers,e.uid);void 0===i&&(i=null),this.owner.callObservers("controllerWillAttachModeTool",e,i,this.owner)},didAttachController(e){const t=e.tool.attachView();this.attachToolView(t,e)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachModeTool",e,this.owner)},controllerWillAttachToolView(e,t){this.owner.callObservers("controllerWillAttachModeToolView",e,t,this.owner),this.attachToolView(e,t)},controllerDidDetachToolView(e,t){this.detachToolView(e,t),this.owner.callObservers("controllerDidDetachModeToolView",e,t,this.owner)},attachToolView(e,t){},detachToolView(e,t){}})],u(null,null,s,{kind:"field",name:"fullBleed",static:!1,private:!1,access:{has:e=>"fullBleed"in e,get:e=>e.fullBleed,set:(e,t)=>{e.fullBleed=t}}},f,g),u(null,null,n,{kind:"field",name:"searchable",static:!1,private:!1,access:{has:e=>"searchable"in e,get:e=>e.searchable,set:(e,t)=>{e.searchable=t}}},y,g),u(null,null,r,{kind:"field",name:"searching",static:!1,private:!1,access:{has:e=>"searching"in e,get:e=>e.searching,set:(e,t)=>{e.searching=t}}},b,g),u(null,null,o,{kind:"field",name:"sheet",static:!1,private:!1,access:{has:e=>"sheet"in e,get:e=>e.sheet,set:(e,t)=>{e.sheet=t}}},m,g),u(null,null,a,{kind:"field",name:"back",static:!1,private:!1,access:{has:e=>"back"in e,get:e=>e.back,set:(e,t)=>{e.back=t}}},V,g),u(null,null,h,{kind:"field",name:"forward",static:!1,private:!1,access:{has:e=>"forward"in e,get:e=>e.forward,set:(e,t)=>{e.forward=t}}},C,g),u(null,null,c,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}}},k,g),u(null,null,w,{kind:"field",name:"handle",static:!1,private:!1,access:{has:e=>"handle"in e,get:e=>e.handle,set:(e,t)=>{e.handle=t}}},L,g),u(null,null,p,{kind:"field",name:"modeTools",static:!1,private:!1,access:{has:e=>"modeTools"in e,get:e=>e.modeTools,set:(e,t)=>{e.modeTools=t}}},D,g),e})(),ke=(()=>{var e;let s,n,r,h,c,w,p,g,f,y,b=[],m=[],V=[],C=[],L=[],D=[],S=[],I=[],R=[];return e=class e extends W{constructor(){super(...arguments),this.showBackTitle=(v(this,m),v(this,V,void 0)),this.closeButton=v(this,C,void 0),this.backButton=v(this,L,void 0),this.searchButton=v(this,D,void 0),this.searchInput=v(this,S,void 0),this.cancelSearch=v(this,I,void 0),this.front=v(this,R,void 0)}createLayout(){const e=this.front.controller;return null!==e&&e.searching.value?this.createSearchLayout():this.createNavLayout()}createNavLayout(){const e=new Array,t=this.front.controller,i=null!==t?"title"+t.uid:"",s=null!==t?t.back.controller:null,n=null!==s?"title"+s.uid:void 0,r=this.showBackTitle.value;if(null===t||null===s){const t=this.closeButton.controller;if(null!==t){const i=t.layout.value;null!==i&&e.push(i);const s=t.tool.view;null!==s&&(this.closeButton.insertView(),s.style.zIndex.setIntrinsic(2))}}else{const t=this.backButton.controller;if(null!==t){let i=t.layout.value;null!==i&&(r&&(i=i.withOverlap(n).withOverpad(16)),e.push(i));this.backButton.insertView().style.zIndex.setIntrinsic(2)}}if(r){if(null!==s){const t=T.create(n,0,0,0,0,-1,-1);e.push(t);const i=s.title.insertView(this.bar.view,void 0,void 0,n);if(null!==i){const e=i.getLookOr(l.Look.timing,l.Mood.navigating,!1);i.style.color.setIntrinsic(l.Look.accentColor,e),i.style.zIndex.setIntrinsic(3),i.style.pointerEvents.setIntrinsic("none")}}const r=T.create(i,1,0,0,.5,1,1);if(e.push(r),null!==t){const e=t.title.insertView(this.bar.view,void 0,void 0,i);if(null!==e){const t=e.getLookOr(l.Look.timing,l.Mood.navigating,!1);e.style.color.setIntrinsic(l.Look.textColor,t),e.style.zIndex.setIntrinsic(1),e.style.pointerEvents.setIntrinsic("auto")}}}else{const r=this.bar.view,a=null!==r?r.layout.value:null,h=null!==a&&void 0!==n?a.getTool(n):null;if(null!==s&&null!==h){const t=T.create(n,0,0,0,0,-1,-1).withPresence(o.Presence.dismissed());e.push(t)}let c;if(c=null===h?T.create(i,1,0,0,.5,0,1):T.create(i,1,0,0,.5,1,1),e.push(c),null!==t){const e=t.title.insertView(this.bar.view,void 0,void 0,i);if(null!==e){const t=e.getLookOr(l.Look.timing,l.Mood.navigating,!1);e.style.color.setIntrinsic(l.Look.textColor,t),e.style.zIndex.setIntrinsic(1),e.style.pointerEvents.setIntrinsic("auto")}}}const a=this.searchButton.controller;if(null!==a){const i=null!==t&&t.searchable.value;let s=a.layout.value;null!==s&&(i||(s=s.withKey("")),e.push(s)),i&&this.searchButton.insertView()}return k.create(e)}createSearchLayout(){const e=new Array,t=this.searchInput.controller;if(null!==t){const i=t.layout.value;null!==i&&e.push(i),this.searchInput.insertView()}const i=this.cancelSearch.controller;if(null!==i){const t=i.layout.value;null!==t&&e.push(t),null!==i.tool.view&&this.cancelSearch.insertView()}return k.create(e)}get closeIcon(){return e.closeIcon}get backIcon(){return e.backIcon}get searchIcon(){return e.searchIcon}static get closeIcon(){return a.VectorIcon.create(24,24,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12Z")}static get backIcon(){return a.VectorIcon.create(24,24,"M17.77,3.77L16,2L6,12L16,22L17.77,20.23L9.54,12Z").withFillLook(l.Look.accentColor)}static get searchIcon(){return a.VectorIcon.create(24,24,"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z")}},h=[i.Property({valueType:Boolean,value:!0,updateFlags:d.Controller.NeedsAssemble})],c=[d.TraitViewControllerRef({controllerType:O,binds:!0,viewKey:"closeButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressCloseButton",e,t,this.owner)},createController(){const e=new P,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),i.graphics.setIntrinsic(this.owner.closeIcon),e}})],w=[d.TraitViewControllerRef({controllerType:O,binds:!0,viewKey:"backButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressBackButton",e,t,this.owner)},createController(){const e=new P,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),i.graphics.setIntrinsic(this.owner.backIcon),e}})],p=[d.TraitViewControllerRef({controllerType:O,binds:!0,viewKey:"searchButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressSearchButton",e,t,this.owner)},createController(){const e=new P,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),i.graphics.setIntrinsic(this.owner.searchIcon),e}})],g=[d.TraitViewControllerRef({controllerType:O,binds:!0,viewKey:"searchInput",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidUpdateSearch(e,t){this.owner.callObservers("controllerDidUpdateSearch",e,t,this.owner)},controllerDidSubmitSearch(e,t){this.owner.callObservers("controllerDidSubmitSearch",e,t,this.owner)},controllerDidCancelSearch(e){this.owner.callObservers("controllerDidCancelSearch",e,this.owner)},createController(){const e=new B,t=T.create(this.viewKey,1,0,0,.5);e.layout.set(t);const i=e.tool.attachView();return i.stylesheet.insertView(),i.input.insertView().setIntrinsic({attributes:{placeholder:"Search"},style:{marginLeft:8,marginRight:8}}),e}})],f=[d.TraitViewControllerRef({controllerType:O,binds:!0,viewKey:"cancelSearch",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){const i=this.owner.searchInput.view,s=i instanceof A?i.input.view:null;this.owner.callObservers("controllerDidCancelSearch",s,this.owner)},createController(){const e=new x,t=T.create(this.viewKey,0,0,72,.5);return e.layout.set(t),e.tool.attachView().setIntrinsic({style:{color:l.Look.accentColor,cursor:"pointer"},content:"Cancel"}),e}})],y=[d.TraitViewControllerRef({controllerType:Ce,inherits:!0,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){null===e.back.controller&&null===e.forward.controller&&this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachBack(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachBack(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachForward(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachForward(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidSetSearchable(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidSetSearching(e,t){e?this.owner.updateLayout():this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachTitle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachTitle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],s=[t.Lazy],n=[t.Lazy],r=[t.Lazy],u(e,null,s,{kind:"getter",name:"closeIcon",static:!0,private:!1,access:{has:e=>"closeIcon"in e,get:e=>e.closeIcon}},null,b),u(e,null,n,{kind:"getter",name:"backIcon",static:!0,private:!1,access:{has:e=>"backIcon"in e,get:e=>e.backIcon}},null,b),u(e,null,r,{kind:"getter",name:"searchIcon",static:!0,private:!1,access:{has:e=>"searchIcon"in e,get:e=>e.searchIcon}},null,b),u(null,null,h,{kind:"field",name:"showBackTitle",static:!1,private:!1,access:{has:e=>"showBackTitle"in e,get:e=>e.showBackTitle,set:(e,t)=>{e.showBackTitle=t}}},V,m),u(null,null,c,{kind:"field",name:"closeButton",static:!1,private:!1,access:{has:e=>"closeButton"in e,get:e=>e.closeButton,set:(e,t)=>{e.closeButton=t}}},C,m),u(null,null,w,{kind:"field",name:"backButton",static:!1,private:!1,access:{has:e=>"backButton"in e,get:e=>e.backButton,set:(e,t)=>{e.backButton=t}}},L,m),u(null,null,p,{kind:"field",name:"searchButton",static:!1,private:!1,access:{has:e=>"searchButton"in e,get:e=>e.searchButton,set:(e,t)=>{e.searchButton=t}}},D,m),u(null,null,g,{kind:"field",name:"searchInput",static:!1,private:!1,access:{has:e=>"searchInput"in e,get:e=>e.searchInput,set:(e,t)=>{e.searchInput=t}}},S,m),u(null,null,f,{kind:"field",name:"cancelSearch",static:!1,private:!1,access:{has:e=>"cancelSearch"in e,get:e=>e.cancelSearch,set:(e,t)=>{e.cancelSearch=t}}},I,m),u(null,null,y,{kind:"field",name:"front",static:!1,private:!1,access:{has:e=>"front"in e,get:e=>e.front,set:(e,t)=>{e.front=t}}},R,m),v(e,b),e})(),Le=(()=>{var e;let t,s,l,o,a=[],h=[],c=[],d=[];return e=class extends n.HtmlView{constructor(e){super(e),this.navBar=(v(this,a),v(this,h,void 0)),this.sheets=v(this,c,void 0),this.front=v(this,d,void 0),this.initStack()}initStack(){this.setIntrinsic({classList:["stack"],style:{position:"relative",overflow:"hidden"}})}get edgeInsets(){return i.Property.getter()}onResize(){super.onResize(),this.resizeStack()}resizeStack(){const e=this.style.width.cssState,t=this.style.height.cssState,i=this.navBar.view;let s=null;null!==i&&i.mounted&&(i.style.width.setIntrinsic(e),s=i.style.height.cssState);const l=this.sheets.views;for(const i in l){l[i].style.setIntrinsic({width:e,height:t,paddingTop:s})}}},t=[r.ViewRef({viewType:R,binds:!0,observes:!0,initView(e){e.placement.setIntrinsic("top"),e.style.setIntrinsic({position:"absolute",left:0,top:0,width:this.owner.style.width.cssState,zIndex:1})},willAttachView(e,t){this.owner.callObservers("viewWillAttachNavBar",e,t,this.owner)},didAttachView(e,t){this.owner.edgeInsets.decohereOutlets()},willDetachView(e){this.owner.edgeInsets.decohereOutlets()},didDetachView(e){this.owner.callObservers("viewDidDetachNavBar",e,this.owner)},viewDidSetBarHeight(e){this.owner.requireUpdate(r.View.NeedsResize)},viewDidMount(){this.owner.edgeInsets.decohereOutlets()},viewWillUnmount(){this.owner.edgeInsets.decohereOutlets()}})],s=[r.ViewSet({viewType:Te,binds:!0,observes:!0,initView(e){const t=this.owner.style.width.cssState,i=this.owner.style.height.cssState,s=this.owner.navBar.view,l=null!==s&&s.mounted?s.style.height.cssState:null;e.style.setIntrinsic({position:"absolute",left:t,top:0,width:t,height:i,paddingTop:l,boxSizing:"border-box",zIndex:0})},willAttachView(e,t){this.owner.callObservers("viewWillAttachSheet",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachSheet",e,this.owner)},viewWillPresent(e){this.owner.callObservers("viewWillPresentSheet",e,this.owner)},viewDidPresent(e){this.owner.callObservers("viewDidPresentSheet",e,this.owner)},viewWillDismiss(e){this.owner.callObservers("viewWillDismissSheet",e,this.owner)},viewDidDismiss(e){this.owner.callObservers("viewDidDismissSheet",e,this.owner)},viewWillLayout(e){e.layoutSheet()}})],l=[r.ViewRef({viewType:Te,binds:!1,willAttachView(e,t){this.owner.callObservers("viewWillAttachFront",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachFront",e,this.owner)}})],o=[i.Property({extends:!0,getOutletValue(e){let t,i=this.value;return e.owner instanceof Te&&null!==(t=this.owner.navBar.view)&&t.mounted&&(i={insetTop:0,insetRight:i.insetRight,insetBottom:i.insetBottom,insetLeft:i.insetLeft}),i}})],u(e,null,o,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets}},null,a),u(null,null,t,{kind:"field",name:"navBar",static:!1,private:!1,access:{has:e=>"navBar"in e,get:e=>e.navBar,set:(e,t)=>{e.navBar=t}}},h,a),u(null,null,s,{kind:"field",name:"sheets",static:!1,private:!1,access:{has:e=>"sheets"in e,get:e=>e.sheets,set:(e,t)=>{e.sheets=t}}},c,a),u(null,null,l,{kind:"field",name:"front",static:!1,private:!1,access:{has:e=>"front"in e,get:e=>e.front,set:(e,t)=>{e.front=t}}},d,a),e})(),De=(()=>{var e;let t,s,l,n,r,o,a=[],h=[],c=[],w=[],p=[],g=[],f=[];return e=class extends d.Controller{constructor(){super(...arguments),this.backAlign=(v(this,a),v(this,h,void 0)),this.stack=v(this,c,void 0),this.navBar=v(this,w,void 0),this.sheets=v(this,p,void 0),this.root=v(this,g,void 0),this.front=v(this,f,void 0)}didPressCloseButton(e,t){this.callObservers("controllerDidPressCloseButton",e,t,this)}didPressBackButton(e,t){this.callObservers("controllerDidPressBackButton",e,t,this),e.defaultPrevented||this.front.dismiss()}didPressSearchButton(e,t){this.callObservers("controllerDidPressSearchButton",e,t,this)}},t=[i.Property({valueType:Number,value:-1/3})],s=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachStackTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachStackTrait",e,this.owner)},viewType:Le,observesView:!0,initView(e){const t=this.owner.navBar.controller;null!==t&&(t.bar.insertView(e),null===e.navBar.view&&e.navBar.setView(t.bar.view));const i=this.owner.sheets.controllers;for(const t in i){const s=i[t],l=s.sheet.view;if(null!==l&&null===l.parent){const t=s.sheet.trait;null!==t&&s.sheet.insertView(e,void 0,void 0,t.key)}}},willAttachView(e){this.owner.callObservers("controllerWillAttachStackView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachStackView",e,this.owner)},viewWillAttachNavBar(e){const t=this.owner.navBar.controller;null!==t&&t.bar.setView(e)},viewDidDetachNavBar(e){const t=this.owner.navBar.controller;null!==t&&t.bar.setView(null)}})],l=[d.TraitViewControllerRef({controllerType:W,binds:!0,observes:!0,get parentView(){return this.owner.stack.view},getTraitViewRef:e=>e.bar,willAttachController(e){this.owner.callObservers("controllerWillAttachNavBar",e,this.owner)},didAttachController(e){e.bar.insertView()},willDetachController(e){const t=e.bar.view;null!==t&&this.detachNavBarView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachNavBar",e,this.owner)},controllerWillAttachBarView(e,t){this.owner.callObservers("controllerWillAttachNavBarView",e,this.owner),this.attachNavBarView(e,t)},controllerDidDetachBarView(e,t){this.detachNavBarView(e,t),this.owner.callObservers("controllerDidDetachNavBarView",e,this.owner)},attachNavBarView(e,t){const i=this.owner.stack.view;null!==i&&null===i.navBar.view&&i.navBar.setView(e);const s=this.owner.front.view;null!==s&&this.frontViewDidScroll(s,t)},detachNavBarView(e,t){e.remove()},controllerDidPressCloseButton(e,t){this.owner.didPressCloseButton(e,t)},controllerDidPressBackButton(e,t){this.owner.didPressBackButton(e,t)},controllerDidPressSearchButton(e,t){this.owner.didPressSearchButton(e,t)},frontViewDidScroll(e,t){},createController:()=>new ke})],n=[d.TraitViewControllerSet({controllerType:Ce,binds:!1,observes:!0,get parentView(){return this.owner.stack.view},getTraitViewRef:e=>e.sheet,willAttachController(e){const t=this.owner.front.controller;e!==t&&(e.back.setController(t),null!==t&&t.forward.setController(e),null===this.owner.root.controller&&this.owner.root.setController(e),this.owner.front.setController(e)),this.owner.callObservers("controllerWillAttachSheet",e,this.owner)},didAttachController(e){const t=e.sheet.trait;null!==t&&this.attachSheetTrait(t,e);const i=e.sheet.view;null!==i&&this.attachSheetView(i,e)},willDetachController(e){const t=e.sheet.view;null!==t&&this.detachSheetView(t,e);const i=e.sheet.trait;null!==i&&this.detachSheetTrait(i,e)},didDetachController(e){const t=e.back.controller,i=e.forward.controller;e===this.owner.front.controller&&this.owner.front.setController(t,i),null!==t&&(t.forward.setController(i),e.back.setController(null)),null!==i&&(e.forward.setController(null),i.back.setController(t)),this.owner.callObservers("controllerDidDetachSheet",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachSheetTrait",e,t,this.owner),this.attachSheetTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachSheetTrait(e,t),this.owner.callObservers("controllerDidDetachSheetTrait",e,t,this.owner)},attachSheetTrait(e,t){},detachSheetTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachSheetView",e,t,this.owner),this.attachSheetView(e,t)},controllerDidDetachSheetView(e,t){this.detachSheetView(e,t),this.owner.callObservers("controllerDidDetachSheetView",e,t,this.owner)},attachSheetView(e,t){const i=t.title.controller;null!==i&&this.attachTitle(i,t);const s=this.owner.stack.view;null!==s&&s.sheets.addView(e)},detachSheetView(e,t){const i=t.title.controller;null!==i&&this.detachTitle(i,t),e.remove()},controllerWillAttachTitle(e,t){this.owner.callObservers("controllerWillAttachSheetTitle",e,t,this.owner),this.attachTitle(e,t)},controllerDidDetachTitle(e,t){this.detachTitle(e,t),this.owner.callObservers("controllerDidDetachSheetTitle",e,t,this.owner)},attachTitle(e,t){},detachTitle(e,t){e.remove()},controllerWillPresentSheetView(e,t){},controllerDidPresentSheetView(e,t){},controllerWillDismissSheetView(e,t){if(t===this.owner.front.controller){this.owner.front.setController(null);const e=t.back.controller;null!==e&&(this.owner.front.setController(e,t),e.forward.setController(null),t.back.setController(null))}},controllerDidDismissSheetView(e,t){const i=this.owner.stack.view;null!==i&&(null!==t.forward.controller?i.sheets.removeView(e):i.sheets.deleteView(e)),null===t.forward.controller&&this.deleteController(t)}})],r=[d.TraitViewControllerRef({controllerType:Ce,binds:!1,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e,t){this.owner.callObservers("controllerWillAttachRoot",e,this.owner)},didAttachController(e,t){const i=e.sheet.trait;null!==i&&this.attachRootTrait(i,e);const s=e.sheet.view;null!==s&&this.attachRootView(s,e)},willDetachController(e){const t=e.sheet.view;null!==t&&this.detachRootView(t,e);const i=e.sheet.trait;null!==i&&this.detachRootTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachRoot",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachRootTrait",e,this.owner),this.attachRootTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachRootTrait(e,t),this.owner.callObservers("controllerDidDetachRootTrait",e,this.owner)},attachRootTrait(e,t){},detachRootTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachRootView",e,this.owner),this.attachRootView(e,t)},controllerDidDetachSheetView(e,t){this.detachRootView(e,t),this.owner.callObservers("controllerDidDetachRootView",e,this.owner)},attachRootView(e,t){},detachRootView(e,t){}})],o=[d.TraitViewControllerRef({controllerType:Ce,binds:!1,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e,t){this.owner.callObservers("controllerWillAttachFront",e,this.owner)},didAttachController(e,t){const i=e.sheet.trait;null!==i&&this.attachFrontTrait(i,e);const s=e.sheet.view;if(null!==s){const i=t instanceof Ce?t.sheet.view:null;this.attachFrontView(s,i,e)}},willDetachController(e){const t=e.sheet.view;null!==t&&this.detachFrontView(t,e);const i=e.sheet.trait;null!==i&&this.detachFrontTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachFront",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachFrontTrait",e,this.owner),this.attachFrontTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachFrontTrait(e,t),this.owner.callObservers("controllerDidDetachFrontTrait",e,this.owner)},attachFrontTrait(e,t){},detachFrontTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachFrontView",e,this.owner);const i=t.nextSibling,s=i instanceof Ce?i.sheet.view:null;this.attachFrontView(e,s,t)},controllerDidDetachSheetView(e,t){this.detachFrontView(e,t),this.owner.callObservers("controllerDidDetachFrontView",e,this.owner)},attachFrontView(e,t,i){const s=this.owner.stack.view;null!==s&&s.front.attachView(e,t),this.presentFrontView(e,t,i);const l=this.owner.navBar.controller;null!==l&&this.owner.navBar.frontViewDidScroll(e,l)},detachFrontView(e,t){const i=this.owner.stack.view;null!==i&&i.front.detachView(),this.dismissFrontView(e,t)},presentFrontView(e,t,i){let s;null===e.parent&&null!==(s=this.owner.stack.view)&&s.insertChild(e,t),null===i.forward.controller?(e.sheetAlign.setIntrinsic(1),e.present(null!==i.back.controller)):(e.sheetAlign.setIntrinsic(this.owner.backAlign.value),e.present())},dismissFrontView(e,t){null!==t.forward.controller?(e.sheetAlign.setIntrinsic(this.owner.backAlign.value),e.dismiss()):(e.sheetAlign.setIntrinsic(1),e.dismiss())},controllerDidScrollSheetView(e,t){const i=this.owner.navBar.controller;null!==i&&this.owner.navBar.frontViewDidScroll(e,i)},dismiss(e){const t=this.view;return null!==t&&t.dismiss(e),t}})],u(null,null,t,{kind:"field",name:"backAlign",static:!1,private:!1,access:{has:e=>"backAlign"in e,get:e=>e.backAlign,set:(e,t)=>{e.backAlign=t}}},h,a),u(null,null,s,{kind:"field",name:"stack",static:!1,private:!1,access:{has:e=>"stack"in e,get:e=>e.stack,set:(e,t)=>{e.stack=t}}},c,a),u(null,null,l,{kind:"field",name:"navBar",static:!1,private:!1,access:{has:e=>"navBar"in e,get:e=>e.navBar,set:(e,t)=>{e.navBar=t}}},w,a),u(null,null,n,{kind:"field",name:"sheets",static:!1,private:!1,access:{has:e=>"sheets"in e,get:e=>e.sheets,set:(e,t)=>{e.sheets=t}}},p,a),u(null,null,r,{kind:"field",name:"root",static:!1,private:!1,access:{has:e=>"root"in e,get:e=>e.root,set:(e,t)=>{e.root=t}}},g,a),u(null,null,o,{kind:"field",name:"front",static:!1,private:!1,access:{has:e=>"front"in e,get:e=>e.front,set:(e,t)=>{e.front=t}}},f,a),e})(),Se=(()=>{var e;let s,n,r,o,h,c,w,p,g=[],f=[],y=[],b=[],m=[],V=[],C=[];return e=class e extends W{constructor(){super(...arguments),this.menuButton=(v(this,f),v(this,y,void 0)),this.actionButton=v(this,b,void 0),this.cover=v(this,m,void 0),this.modeTools=v(this,V,void 0),this.fullScreen=v(this,C,void 0)}createLayout(){const e=new Array,t=this.menuButton.controller;if(null!==t){const i=t.layout.value;null!==i&&e.push(i),null!==t.tool.view&&this.menuButton.insertView()}const i=new Array;for(const e in this.modeTools.controllers)i.push(this.modeTools.controllers[e]);const s=i.length;for(let t=0;t<s;t+=1){const l=i[t];let n=l.layout.value;if(null!==n){const r="mode"+l.uid;if(n=n.withKey(r),n=n.withPresence(void 0,null,null),e.push(n),null!==l.tool.view){const e=null!==(t+1<s?i[t+1]:null)?l.tool.view:null;l.tool.insertView(this.bar.view,void 0,e,r)}}}0!==s&&e.push(T.create("coverPadding",0,0,12));const n=T.create("cover",1,0,0,0);e.push(n);const r=this.cover.controller;if(null!==r){const e=r.title.insertView(this.bar.view,void 0,void 0,"cover");if(null!==e){const t=e.getLookOr(l.Look.timing,l.Mood.navigating,!1);e.style.color.setIntrinsic(l.Look.textColor,t),e.style.zIndex.setIntrinsic(1)}}const o=this.actionButton.controller;if(null!==o){const t=o.layout.value;null!==t&&e.push(t),null!==o.tool.view&&this.actionButton.insertView()}return k.create(e)}get menuIcon(){return e.menuIcon}get menuCloseIcon(){return e.menuCloseIcon}get actionIcon(){return e.actionIcon}static get menuIcon(){return a.VectorIcon.create(24,24,"M19,3C20.1,3,21,3.9,21,5L21,19C21,20.1,20.1,21,19,21L5,21C3.9,21,3,20.1,3,19L3,5C3,3.9,3.9,3,5,3L19,3ZM9,5L6,5C5.49,5,5.06,5.39,5.01,5.88L5,6L5,18C5,18.51,5.39,18.94,5.88,18.99L6,19L9,19L9,5ZM18,5L11,5L11,19L18,19C18.51,19,18.94,18.61,18.99,18.12L19,18L19,6C19,5.49,18.61,5.06,18.12,5.01L18,5ZM8,11L8,12L6,12L6,11L8,11ZM8,9L8,10L6,10L6,9L8,9ZM8,7L8,8L6,8L6,7L8,7Z")}static get menuCloseIcon(){return a.VectorIcon.create(24,24,"M19,3C20.1,3,21,3.9,21,5L21,19C21,20.1,20.1,21,19,21L5,21C3.9,21,3,20.1,3,19L3,5C3,3.9,3.9,3,5,3L19,3ZM9,5L6,5C5.49,5,5.06,5.39,5.01,5.88L5,6L5,18C5,18.51,5.39,18.94,5.88,18.99L6,19L9,19L9,5ZM18,5L11,5L11,19L18,19C18.51,19,18.94,18.61,18.99,18.12L19,18L19,6C19,5.49,18.61,5.06,18.12,5.01L18,5ZM8,11L8,12L6,12L6,11L8,11ZM8,9L8,10L6,10L6,9L8,9ZM8,7L8,8L6,8L6,7L8,7Z")}static get actionIcon(){return a.VectorIcon.create(24,24,"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z")}},o=[d.TraitViewControllerRef({controllerType:O,binds:!0,viewKey:"menuButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressMenuButton",e,t,this.owner)},createController(){const e=new P,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),this.owner.fullScreen.value?i.graphics.setIntrinsic(this.owner.menuIcon):i.graphics.setIntrinsic(this.owner.menuCloseIcon),e}})],h=[d.TraitViewControllerRef({controllerType:O,binds:!0,viewKey:"actionButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressActionButton",e,t,this.owner)},createController(){const e=new P,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),i.graphics.setIntrinsic(this.owner.actionIcon),e}})],c=[d.TraitViewControllerRef({controllerType:Ce,inherits:!0,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){null===e.back.controller&&null===e.forward.controller&&this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachTitle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachTitle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],w=[d.TraitViewControllerSet({controllerType:O,ordered:!0,inherits:!0,observes:!0,getTraitViewRef:e=>e.tool,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachToolView(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachToolView(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],p=[i.Property({valueType:Boolean,value:!1,inherits:!0,didSetValue(e){const t=this.owner.menuButton.view;t instanceof I&&(e?t.graphics.setIntrinsic(this.owner.menuIcon):t.graphics.setIntrinsic(this.owner.menuCloseIcon))}})],s=[t.Lazy],n=[t.Lazy],r=[t.Lazy],u(e,null,s,{kind:"getter",name:"menuIcon",static:!0,private:!1,access:{has:e=>"menuIcon"in e,get:e=>e.menuIcon}},null,g),u(e,null,n,{kind:"getter",name:"menuCloseIcon",static:!0,private:!1,access:{has:e=>"menuCloseIcon"in e,get:e=>e.menuCloseIcon}},null,g),u(e,null,r,{kind:"getter",name:"actionIcon",static:!0,private:!1,access:{has:e=>"actionIcon"in e,get:e=>e.actionIcon}},null,g),u(null,null,o,{kind:"field",name:"menuButton",static:!1,private:!1,access:{has:e=>"menuButton"in e,get:e=>e.menuButton,set:(e,t)=>{e.menuButton=t}}},y,f),u(null,null,h,{kind:"field",name:"actionButton",static:!1,private:!1,access:{has:e=>"actionButton"in e,get:e=>e.actionButton,set:(e,t)=>{e.actionButton=t}}},b,f),u(null,null,c,{kind:"field",name:"cover",static:!1,private:!1,access:{has:e=>"cover"in e,get:e=>e.cover,set:(e,t)=>{e.cover=t}}},m,f),u(null,null,w,{kind:"field",name:"modeTools",static:!1,private:!1,access:{has:e=>"modeTools"in e,get:e=>e.modeTools,set:(e,t)=>{e.modeTools=t}}},V,f),u(null,null,p,{kind:"field",name:"fullScreen",static:!1,private:!1,access:{has:e=>"fullScreen"in e,get:e=>e.fullScreen,set:(e,t)=>{e.fullScreen=t}}},C,f),v(e,g),e})(),Ie=(()=>{var e;let t,s,l,o,a,h,c,d=[],w=[],p=[],g=[],f=[],y=[],b=[];return e=class extends n.HtmlView{constructor(e){super(e),this.folioStyle=(v(this,d),v(this,w,void 0)),this.fullBleed=v(this,p,void 0),this.appBar=v(this,g,void 0),this.drawer=v(this,f,void 0),this.stack=v(this,y,void 0),this.cover=v(this,b,void 0),this.initFolio()}initFolio(){this.setIntrinsic({classList:["folio"],style:{display:"flex",position:"relative",overflow:"hidden"}})}get edgeInsets(){return i.Property.getter()}onResize(){super.onResize(),this.resizeFolio()}resizeFolio(){let e=this.folioStyle.value;this.folioStyle.hasAffinity(i.Affinity.Intrinsic)&&(e="mobile"===this.viewIdiom?"stacked":"unstacked",this.folioStyle.setIntrinsic(e)),"stacked"===e?this.resizeStacked():"unstacked"===e&&this.resizeUnstacked()}resizeStacked(){this.drawer.removeView(),this.appBar.removeView(),this.stack.insertView(this);const e=this.cover.view;null!==e&&(e.parent===this&&e.remove(),e.style.paddingLeft.setIntrinsic(null))}resizeUnstacked(){const e=this.style.width.cssState,t=this.style.height.cssState,i=this.drawer.insertView(),s=i.effectiveWidth.value,l=null!==s?e.minus(s):e,n=this.appBar.view;let r=null;null!==n&&(this.appBar.insertView().style.setIntrinsic({left:s,width:l}),r=n.style.height.cssState),this.stack.insertView(i);const o=this.cover.view;null!==o&&(this.cover.insertView(this),this.fullBleed.value?o.style.setIntrinsic({left:0,top:0,width:e,height:t,paddingTop:r,paddingLeft:s}):o.style.setIntrinsic({left:s,top:0,width:l,height:t,paddingTop:r,paddingLeft:null}),o.present(!1))}didLayout(){this.layoutFolio(),super.didLayout()}layoutFolio(){const e=this.folioStyle.value;"stacked"===e?this.layoutStacked():"unstacked"===e&&this.layoutUnstacked()}layoutStacked(){}layoutUnstacked(){const e=this.style.width.cssState,t=this.drawer.insertView().effectiveWidth.value,i=null!==t?e.minus(t):e,s=this.appBar.view;null!==s&&s.style.setIntrinsic({left:t,width:i});const l=this.cover.view;null!==l&&(this.fullBleed.value?l.style.setIntrinsic({left:0,width:e,paddingLeft:t}):l.style.setIntrinsic({left:t,width:0,paddingLeft:null}))}},t=[i.Property({valueType:String,updateFlags:r.View.NeedsResize,didSetValue(e){this.owner.callObservers("viewDidSetFolioStyle",e,this.owner),this.owner.edgeInsets.decohereOutlets()}})],s=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.requireUpdate(r.View.NeedsResize,!0),this.owner.callObservers("viewDidSetFullBleed",e,this.owner)}})],l=[r.ViewRef({viewType:R,binds:!0,initView(e){const t=this.owner.style.width.cssState,i=this.owner.drawer.view,s=null!==i?i.effectiveWidth.value:null,l=null!==s?t.minus(s):t;e.placement.setIntrinsic("top"),e.style.setIntrinsic({position:"absolute",left:s,top:0,width:l,zIndex:1})},willAttachView(e,t){this.owner.callObservers("viewWillAttachAppBar",e,t,this.owner)},didAttachView(e,t){this.owner.edgeInsets.decohereOutlets()},willDetachView(e){this.owner.edgeInsets.decohereOutlets()},didDetachView(e){this.owner.callObservers("viewDidDetachAppBar",e,this.owner)}})],o=[r.ViewRef({viewType:me,binds:!0,observes:!0,initView(e){e.style.setIntrinsic({overflow:"hidden",zIndex:2}),e.present(!1)},willAttachView(e,t){this.owner.callObservers("viewWillAttachDrawer",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachDrawer",e,this.owner)},insertChild(e,t,i,s){e.prependChild(t,s)},viewDidSetPresence(e,t){this.owner.edgeInsets.decohereOutlets()},viewDidSetEffectiveWidth(e,t){"unstacked"===this.owner.folioStyle.value&&this.owner.requireUpdate(r.View.NeedsResize)}})],a=[r.ViewRef({viewType:Le,initView(e){e.style.flexGrow.setIntrinsic(1)},willAttachView(e,t){this.owner.callObservers("viewWillAttachStack",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachStack",e,this.owner)}})],h=[r.ViewRef({viewType:Te,binds:!1,observes:!0,initView(e){if("unstacked"===this.owner.folioStyle.value){const t=this.owner.style.width.cssState,i=this.owner.style.height.cssState,s=this.owner.drawer.view,l=null!==s?s.effectiveWidth.value:null,n=null!==l?t.minus(l):t,r=this.owner.appBar.view,o=null!==r?r.style.height.cssState:null;e.style.setIntrinsic({position:"absolute",left:l,top:0,width:n,height:i,paddingTop:o,boxSizing:"border-box",zIndex:0})}},willAttachView(e,t){this.owner.callObservers("viewWillAttachCover",e,t,this.owner)},didAttachView(e,t){this.owner.fullBleed.setIntrinsic(e.fullBleed.value)},willDetachView(e){e.remove()},didDetachView(e){this.owner.callObservers("viewDidDetachCover",e,this.owner)},viewDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)}})],c=[i.Property({extends:!0,getOutletValue(e){let t=this.value;if("unstacked"===this.owner.folioStyle.value){let i=t.insetTop;const s=t.insetRight,l=t.insetBottom;let n=t.insetLeft;if(e.owner===this.owner.appBar.view){const e=this.owner.drawer.view;null!==e&&(n*=1-e.presence.value.phase),t={insetTop:i,insetRight:s,insetBottom:l,insetLeft:n}}else if(e.owner===this.owner.cover.view){null!==this.owner.appBar.view&&(i=0);const e=this.owner.drawer.view;null!==e&&(n*=1-e.presence.value.phase),t={insetTop:i,insetRight:s,insetBottom:l,insetLeft:n}}}return t}})],u(e,null,c,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets}},null,d),u(null,null,t,{kind:"field",name:"folioStyle",static:!1,private:!1,access:{has:e=>"folioStyle"in e,get:e=>e.folioStyle,set:(e,t)=>{e.folioStyle=t}}},w,d),u(null,null,s,{kind:"field",name:"fullBleed",static:!1,private:!1,access:{has:e=>"fullBleed"in e,get:e=>e.fullBleed,set:(e,t)=>{e.fullBleed=t}}},p,d),u(null,null,l,{kind:"field",name:"appBar",static:!1,private:!1,access:{has:e=>"appBar"in e,get:e=>e.appBar,set:(e,t)=>{e.appBar=t}}},g,d),u(null,null,o,{kind:"field",name:"drawer",static:!1,private:!1,access:{has:e=>"drawer"in e,get:e=>e.drawer,set:(e,t)=>{e.drawer=t}}},f,d),u(null,null,a,{kind:"field",name:"stack",static:!1,private:!1,access:{has:e=>"stack"in e,get:e=>e.stack,set:(e,t)=>{e.stack=t}}},y,d),u(null,null,h,{kind:"field",name:"cover",static:!1,private:!1,access:{has:e=>"cover"in e,get:e=>e.cover,set:(e,t)=>{e.cover=t}}},b,d),e})(),Ae=(()=>{var e;let t,s,l,n,o,a,h,c,w,p,g,f=[],y=[],b=[],m=[],V=[],T=[],C=[],k=[],L=[],D=[],S=[],I=[];return e=class extends De{constructor(){super(...arguments),this.folioStyle=(v(this,f),v(this,y,void 0)),this.fullBleed=v(this,b,void 0),this.fullScreen=v(this,m,void 0),this.folio=v(this,V,void 0),this.stack=v(this,T,void 0),this.sheets=v(this,C,void 0),this.navBar=v(this,k,void 0),this.appBar=v(this,L,void 0),this.drawer=v(this,D,void 0),this.cover=v(this,S,void 0),this.modeTools=v(this,I,void 0)}didPressMenuButton(e,t){this.fullScreen.setIntrinsic(!this.fullScreen.value),this.callObservers("controllerDidPressMenuButton",e,t,this)}didPressActionButton(e,t){this.callObservers("controllerDidPressActionButton",e,t,this)}},t=[i.Property({valueType:String,didSetValue(e){const t=this.owner.cover.controller;null!==t&&("stacked"===e?this.owner.sheets.attachController(t):"unstacked"===e&&(null!==this.owner.cover.view&&this.owner.cover.insertView(this.owner.folio.view),this.owner.sheets.detachController(t)));const s=this.owner.stack.view;null!==s&&this.owner.stack.updateFolioStyle(e,s);const l=this.owner.navBar.controller;null!==l&&this.owner.navBar.updateFolioStyle(e,l);const n=this.owner.appBar.controller;null!==n&&this.owner.appBar.updateFolioStyle(e,n);const r=this.owner.sheets.controllers;for(const t in r){const i=r[t],s=i.sheet.view;null!==s&&this.owner.sheets.updateFolioStyle(e,s,i)}this.owner.callObservers("controllerDidSetFolioStyle",e,this.owner);const o=this.owner.folio.view;null!==o&&o.folioStyle.setValue(e,i.Affinity.Inherited)}})],s=[i.Property({valueType:Boolean,value:!1,didSetValue(e){const t=this.owner.drawer.view;null!==t&&this.owner.drawer.updateFullBleed(e,t);const s=this.owner.stack.view;null!==s&&this.owner.stack.updateFullBleed(e,s);const l=this.owner.sheets.controllers;for(const t in l){const i=l[t],s=i.sheet.view;null!==s&&this.owner.sheets.updateFullBleed(e,s,i)}this.owner.callObservers("controllerDidSetFullBleed",e,this.owner);const n=this.owner.folio.view;null!==n&&n.fullBleed.setValue(e,i.Affinity.Inherited)}})],l=[i.Property({valueType:Boolean,value:!1,didSetValue(e){const t=this.owner.drawer.view;null!==t&&(e?t.dismiss():t.present()),this.owner.callObservers("controllerDidSetFullScreen",e,this.owner)}})],n=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachFolioTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachFolioTrait",e,this.owner)},viewType:Ie,observesView:!0,initView(e){const t=this.owner.appBar.controller;null!==t&&(t.bar.attachView(),null===e.appBar.view&&e.appBar.setView(t.bar.view));const i=this.owner.cover.controller;null!==i&&e.cover.setView(i.sheet.view)},willAttachView(e){this.owner.callObservers("controllerWillAttachFolioView",e,this.owner)},didAttachView(e){this.owner.folioStyle.setIntrinsic(e.folioStyle.value),this.owner.fullBleed.setIntrinsic(e.fullBleed.value),this.owner.drawer.setView(e.drawer.attachView()),this.owner.stack.setView(e.stack.attachView())},willDetachView(e){this.owner.stack.setView(null),this.owner.drawer.setView(null)},didDetachView(e){this.owner.callObservers("controllerDidDetachFolioView",e,this.owner)},viewDidSetFolioStyle(e,t){this.owner.folioStyle.setIntrinsic(e)},viewDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)},viewWillAttachDrawer(e){this.owner.drawer.setView(e)},viewDidDetachDrawer(e){this.owner.drawer.setView(null)},viewWillAttachAppBar(e){const t=this.owner.appBar.controller;null!==t&&t.bar.setView(e)},viewDidDetachAppBar(e){const t=this.owner.appBar.controller;null!==t&&t.bar.setView(null)}})],o=[d.TraitViewRef({extends:!0,didAttachView(e,t){super.didAttachView(e,t),this.updateFolioStyle(this.owner.folioStyle.value,e),this.updateFullBleed(this.owner.fullBleed.value,e)},updateFolioStyle(e,t){},updateFullBleed(e,t){}})],a=[d.TraitViewControllerSet({extends:!0,attachSheetView(e,t){super.attachSheetView(e,t),this.updateFolioStyle(this.owner.folioStyle.value,e,t),this.updateFullBleed(this.owner.fullBleed.value,e,t)},updateFolioStyle(e,t,i){},updateFullBleed(e,t,i){}})],h=[d.TraitViewControllerRef({extends:!0,initController(e){super.initController(e),this.updateFolioStyle(this.owner.folioStyle.value,e)},updateFolioStyle(e,t){},controllerDidPressSearchButton(e,t,i){const s=this.owner.front.controller;if(null!==s&&s.searching.set(!0),i instanceof ke){const e=i.searchInput.controller;if(e instanceof B){const t=e.input.view;null!==t&&t.node.focus()}}},controllerDidUpdateSearch(e,t,i){const s=this.owner.front.controller;null!==s&&s.updateSearch(e,t)},controllerDidSubmitSearch(e,t,i){const s=this.owner.front.controller;null!==s&&s.submitSearch(e,t)},controllerDidCancelSearch(e,t){const i=this.owner.front.controller;null!==i&&i.searching.set(!1)}})],c=[d.TraitViewControllerRef({controllerType:W,binds:!0,observes:!0,get parentView(){return this.owner.folio.view},getTraitViewRef:e=>e.bar,initController(e){e.bar.attachView()},willAttachController(e){this.owner.callObservers("controllerWillAttachAppBar",e,this.owner)},didAttachController(e){const t=e.bar.view;null!==t&&this.attachAppBarView(t,e)},willDetachController(e){const t=e.bar.view;null!==t&&this.detachAppBarView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachAppBar",e,this.owner)},controllerWillAttachBarView(e,t){this.owner.callObservers("controllerWillAttachAppBarView",e,this.owner),this.attachAppBarView(e,t)},controllerDidDetachBarView(e,t){this.detachAppBarView(e,t),this.owner.callObservers("controllerDidDetachAppBarView",e,this.owner)},attachAppBarView(e,t){const i=this.owner.folio.view;null!==i&&null===i.appBar.view&&i.appBar.setView(e);const s=this.owner.cover.view;null!==s&&this.coverViewDidScroll(s,t)},detachAppBarView(e,t){e.remove()},updateFolioStyle(e,t){t.updateLayout()},coverViewDidScroll(e,t){},controllerDidPressMenuButton(e,t){this.owner.didPressMenuButton(e,t)},controllerDidPressActionButton(e,t){this.owner.didPressActionButton(e,t)},createController:()=>new Se})],w=[r.ViewRef({viewType:me,get parentView(){return this.owner.folio.view},willAttachView(e){this.owner.callObservers("controllerWillAttachDrawerView",e,this.owner)},didAttachView(e){this.updateFullBleed(this.owner.fullBleed.value,e),this.owner.fullScreen.value?e.dismiss():e.present()},didDetachView(e){this.owner.callObservers("controllerDidDetachDrawerView",e,this.owner)},updateFullBleed(e,t){}})],p=[d.TraitViewControllerRef({controllerType:Ce,consumed:!0,binds:!1,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.callObservers("controllerWillAttachCover",e,this.owner)},didAttachController(e){this.owner.fullBleed.setIntrinsic(e.fullBleed.value);const t=e.sheet.trait;null!==t&&this.attachCoverTrait(t,e);const i=e.sheet.view;null!==i&&this.attachCoverView(i,e);const s=e.modeTools.controllers;for(const e in s)this.owner.modeTools.attachController(s[e])},willDetachController(e){const t=e.modeTools.controllers;for(const e in t)this.owner.modeTools.detachController(t[e]);const i=e.sheet.view;null!==i&&this.detachCoverView(i,e);const s=e.sheet.trait;null!==s&&this.detachCoverTrait(s,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCover",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachCoverTrait",e,this.owner),this.attachCoverTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachCoverTrait(e,t),this.owner.callObservers("controllerDidDetachCoverTrait",e,this.owner)},attachCoverTrait(e,t){},detachCoverTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachCoverView",e,this.owner),this.attachCoverView(e,t)},controllerDidDetachSheetView(e,t){this.detachCoverView(e,t),this.owner.callObservers("controllerDidDetachCoverView",e,this.owner)},attachCoverView(e,t){const i=this.owner.folio.view;null!==i&&i.cover.attachView(e);const s=this.owner.appBar.controller;null!==s&&this.owner.appBar.coverViewDidScroll(e,s)},detachCoverView(e,t){const i=this.owner.folio.view;null!==i&&i.cover.removeView(),this.detachController()},controllerDidSetFullBleed(e){this.owner.fullBleed.setIntrinsic(e)},controllerWillAttachModeTool(e,t){this.owner.modeTools.attachController(e,t)},controllerDidDetachModeTool(e){this.owner.modeTools.detachController(e)},controllerDidScrollSheetView(e){const t=this.owner.appBar.controller;null!==t&&this.owner.appBar.coverViewDidScroll(e,t)},present(e){const t=this.controller,i=null!==t?t.sheet.view:null;return null!==i&&("stacked"===this.owner.folioStyle.value?(void 0!==this.owner.sheets.controllers[t.uid]&&this.owner.sheets.detachController(t),this.owner.sheets.attachController(t),i.present(e)):this.insertView(this.owner.folio.view)),i}})],g=[d.TraitViewControllerSet({controllerType:O,binds:!1,ordered:!0,observes:!0,getTraitViewRef:e=>e.tool,willAttachController(e){this.owner.callObservers("controllerWillAttachCoverModeTool",e,this.owner)},didAttachController(e){const t=e.tool.view;null!==t&&this.attachToolView(t,e)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCoverModeTool",e,this.owner)},controllerWillAttachToolView(e,t){this.owner.callObservers("controllerWillAttachCoverModeToolView",e,t,this.owner),this.attachToolView(e,t)},controllerDidDetachToolView(e,t){this.detachToolView(e,t),this.owner.callObservers("controllerDidDetachCoverModeToolView",e,t,this.owner)},attachToolView(e,t){},detachToolView(e,t){}})],u(null,null,t,{kind:"field",name:"folioStyle",static:!1,private:!1,access:{has:e=>"folioStyle"in e,get:e=>e.folioStyle,set:(e,t)=>{e.folioStyle=t}}},y,f),u(null,null,s,{kind:"field",name:"fullBleed",static:!1,private:!1,access:{has:e=>"fullBleed"in e,get:e=>e.fullBleed,set:(e,t)=>{e.fullBleed=t}}},b,f),u(null,null,l,{kind:"field",name:"fullScreen",static:!1,private:!1,access:{has:e=>"fullScreen"in e,get:e=>e.fullScreen,set:(e,t)=>{e.fullScreen=t}}},m,f),u(null,null,n,{kind:"field",name:"folio",static:!1,private:!1,access:{has:e=>"folio"in e,get:e=>e.folio,set:(e,t)=>{e.folio=t}}},V,f),u(null,null,o,{kind:"field",name:"stack",static:!1,private:!1,access:{has:e=>"stack"in e,get:e=>e.stack,set:(e,t)=>{e.stack=t}}},T,f),u(null,null,a,{kind:"field",name:"sheets",static:!1,private:!1,access:{has:e=>"sheets"in e,get:e=>e.sheets,set:(e,t)=>{e.sheets=t}}},C,f),u(null,null,h,{kind:"field",name:"navBar",static:!1,private:!1,access:{has:e=>"navBar"in e,get:e=>e.navBar,set:(e,t)=>{e.navBar=t}}},k,f),u(null,null,c,{kind:"field",name:"appBar",static:!1,private:!1,access:{has:e=>"appBar"in e,get:e=>e.appBar,set:(e,t)=>{e.appBar=t}}},L,f),u(null,null,w,{kind:"field",name:"drawer",static:!1,private:!1,access:{has:e=>"drawer"in e,get:e=>e.drawer,set:(e,t)=>{e.drawer=t}}},D,f),u(null,null,p,{kind:"field",name:"cover",static:!1,private:!1,access:{has:e=>"cover"in e,get:e=>e.cover,set:(e,t)=>{e.cover=t}}},S,f),u(null,null,g,{kind:"field",name:"modeTools",static:!1,private:!1,access:{has:e=>"modeTools"in e,get:e=>e.modeTools,set:(e,t)=>{e.modeTools=t}}},I,f),e})(),Oe=(()=>{var e;let t,s,l,n=[],r=[],o=[],a=[];return e=class extends W{constructor(){super(...arguments),this.tabs=(v(this,n),v(this,r,void 0)),this.active=v(this,o,void 0),this.tabStyle=v(this,a,void 0)}createLayout(){const e=new Array;e.push(T.create("leftPadding",.5,0,0,0));const t=new Array;for(const e in this.tabs.controllers)t.push(this.tabs.controllers[e]);if("bottom"===this.tabStyle.value)for(let i=0,s=t.length;i<s;i+=1){const l=t[i],n="tab"+l.handle.attachView().uid,r=T.create(n,1,0,0,.5);e.push(r);const o=null!==(i+1<s?t[i+1]:null)?l.handle.view:null;l.handle.insertView(this.bar.view,void 0,o,n)}return e.push(T.create("rightPadding",.5,0,0,1)),k.create(e)}},t=[d.TraitViewControllerSet({controllerType:Ce,ordered:!0,inherits:!0,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachHandle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachHandle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidPressHandle(e,t,i){this.owner.callObservers("controllerDidPressTabHandle",e,t,i,this.owner)},controllerDidLongPressHandle(e,t){this.owner.callObservers("controllerDidLongPressTabHandle",e,t,this.owner)}})],s=[d.TraitViewControllerRef({controllerType:Ce,inherits:!0,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachHandle(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachHandle(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],l=[i.Property({valueType:String,value:"none",inherits:!0,didSetValue(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],u(null,null,t,{kind:"field",name:"tabs",static:!1,private:!1,access:{has:e=>"tabs"in e,get:e=>e.tabs,set:(e,t)=>{e.tabs=t}}},r,n),u(null,null,s,{kind:"field",name:"active",static:!1,private:!1,access:{has:e=>"active"in e,get:e=>e.active,set:(e,t)=>{e.active=t}}},o,n),u(null,null,l,{kind:"field",name:"tabStyle",static:!1,private:!1,access:{has:e=>"tabStyle"in e,get:e=>e.tabStyle,set:(e,t)=>{e.tabStyle=t}}},a,n),e})(),xe=(()=>{var e;let t,s,l,n,o,a=[],h=[],c=[],d=[],w=[];return e=class extends Te{constructor(e){super(e),this.tabStyle=(v(this,a),v(this,h,void 0)),this.tabBar=v(this,c,void 0),this.tabs=v(this,d,void 0),this.active=v(this,w,void 0),this.initBinder()}initBinder(){this.setIntrinsic({classList:["binder"],style:{position:"relative",overflow:"hidden"}})}getTab(e,t){void 0===t&&(t=Te);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateTab(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setTab(e,t){this.setChild(e,t)}get edgeInsets(){return i.Property.getter()}onResize(){super.onResize(),this.resizeBinder()}resizeBinder(){const e=this.style.width.cssState,t=this.style.height.cssState,i=this.style.paddingLeft.value,s=this.style.paddingRight.value,l=this.tabBar.view;let n=null;if(null!==l&&l.mounted){let t=e;n=l.style.height.cssState,null!==i&&(t=t.minus(i)),null!==s&&(t=t.minus(s)),l.style.setIntrinsic({left:i,right:s,width:t})}const r=this.tabs.views;for(const l in r){r[l].style.setIntrinsic({width:e,height:t,paddingTop:this.style.paddingTop.state,paddingRight:s,paddingBottom:n,paddingLeft:i})}}},t=[i.Property({valueType:String,value:"none",updateFlags:r.View.NeedsResize,didSetValue(e){this.owner.callObservers("viewDidSetTabStyle",e,this.owner),this.owner.edgeInsets.decohereOutlets()}})],s=[r.ViewRef({viewType:R,binds:!0,observes:!0,initView(e){e.placement.setIntrinsic("bottom"),e.style.setIntrinsic({position:"absolute",left:0,bottom:0,width:this.owner.style.width.cssState,zIndex:1})},willAttachView(e,t){this.owner.callObservers("viewWillAttachTabBar",e,t,this.owner)},didAttachView(e,t){this.owner.edgeInsets.decohereOutlets()},willDetachView(e){this.owner.edgeInsets.decohereOutlets()},didDetachView(e){this.owner.callObservers("viewDidDetachTabBar",e,this.owner)},viewDidSetBarHeight(e){this.owner.requireUpdate(r.View.NeedsResize)},viewDidMount(){this.owner.edgeInsets.decohereOutlets()},viewWillUnmount(){this.owner.edgeInsets.decohereOutlets()}})],l=[r.ViewSet({viewType:Te,binds:!1,observes:!0,initView(e){const t=this.owner.tabBar.view,i=null!==t&&t.mounted?t.style.height.cssState:null;e.style.setIntrinsic({position:"absolute",left:0,top:0,width:this.owner.style.width.cssState,height:this.owner.style.height.cssState,paddingTop:this.owner.style.paddingTop.state,paddingBottom:i,boxSizing:"border-box",zIndex:0})},willAttachView(e,t){this.owner.callObservers("viewWillAttachTab",e,t,this.owner)},willDetachView(e){e===this.owner.active.view&&this.owner.active.setView(null)},didDetachView(e){this.owner.callObservers("viewDidDetachTab",e,this.owner)},detectView:e=>e instanceof Te?e:null})],n=[r.ViewRef({viewType:Te,binds:!1,observes:!0,willAttachView(e,t){this.owner.callObservers("viewWillAttachActive",e,t,this.owner)},didAttachView(e,t){this.owner.fullBleed.setIntrinsic(e.fullBleed.value),null===e.parent&&this.owner.insertChild(e,t)},didDetachView(e){this.owner.callObservers("viewDidDetachActive",e,this.owner)},viewDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)}})],o=[i.Property({extends:!0,getOutletValue(e){let t=this.value;if(e.owner instanceof Te){const e=this.owner.tabBar.view;null!==e&&e.mounted&&(t={insetTop:t.insetTop,insetRight:t.insetRight,insetBottom:0,insetLeft:t.insetLeft})}return t}})],u(e,null,o,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets}},null,a),u(null,null,t,{kind:"field",name:"tabStyle",static:!1,private:!1,access:{has:e=>"tabStyle"in e,get:e=>e.tabStyle,set:(e,t)=>{e.tabStyle=t}}},h,a),u(null,null,s,{kind:"field",name:"tabBar",static:!1,private:!1,access:{has:e=>"tabBar"in e,get:e=>e.tabBar,set:(e,t)=>{e.tabBar=t}}},c,a),u(null,null,l,{kind:"field",name:"tabs",static:!1,private:!1,access:{has:e=>"tabs"in e,get:e=>e.tabs,set:(e,t)=>{e.tabs=t}}},d,a),u(null,null,n,{kind:"field",name:"active",static:!1,private:!1,access:{has:e=>"active"in e,get:e=>e.active,set:(e,t)=>{e.active=t}}},w,a),e})(),Pe=(()=>{var e;let s,l,n,r,o,a,h=[],c=[],w=[],p=[],g=[],f=[],y=[];return e=class extends Ce{constructor(){super(...arguments),this.folioStyle=(v(this,h),v(this,c,void 0)),this.tabStyle=v(this,w,void 0),this.binder=v(this,p,void 0),this.tabBar=v(this,g,void 0),this.tabs=v(this,f,void 0),this.active=v(this,y,void 0)}didPressTabHandle(e,t,i){this.callObservers("controllerDidPressTabHandle",e,t,i,this),e.defaultPrevented||this.active.setController(i)}didLongPressTabHandle(e,t){this.callObservers("controllerDidLongPressTabHandle",e,t,this)}setTab(e,t){const i=this.getChild(e,Ce),s=i===this.active.controller;let l;null!==i?(l=i.getNextSibling(Ce),this.tabs.deleteController(i)):l=null,null!==t&&(this.tabs.insertController(null,t,l,e),s&&this.active.setController(t))}},s=[i.Property({valueType:String,inherits:!0,didSetValue(e){"stacked"===e?this.owner.tabStyle.setIntrinsic("bottom"):"unstacked"===e&&this.owner.tabStyle.setIntrinsic("mode")}})],l=[i.Property({valueType:String,value:"none",didSetValue(e){const t=this.owner.tabBar.controller;null!==t&&this.owner.tabBar.updateTabStyle(e,t);const s=this.owner.tabs.controllers;for(const t in s){const i=s[t];this.owner.tabs.updateTabStyle(e,i)}this.owner.callObservers("controllerDidSetTabStyle",e,this.owner);const l=this.owner.binder.view;null!==l&&l.tabStyle.setValue(e,i.Affinity.Inherited)}})],n=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachBinderTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachBinderTrait",e,this.owner)},viewType:xe,observesView:!0,initView(e){e.tabStyle.setValue(this.owner.tabStyle.value,i.Affinity.Inherited);const t=this.owner.tabBar.controller;null!==t&&e.tabBar.setView(t.bar.view);const s=this.owner.active.controller;null!==s&&e.active.setView(s.sheet.attachView())},willAttachView(e){this.owner.callObservers("controllerWillAttachBinderView",e,this.owner),null===this.owner.sheet.view&&this.owner.sheet.setView(e)},didAttachView(e){const t=this.owner.active.controller;null!==t&&t.sheet.removeView()},willDetachView(e){this.owner.active.setController(null)},didDetachView(e){this.owner.sheet.view===e&&this.owner.sheet.detachView(),this.owner.callObservers("controllerDidDetachBinderView",e,this.owner)},viewWillAttachTabBar(e){const t=this.owner.tabBar.controller;null!==t&&t.bar.setView(e)},viewDidDetachTabBar(e){const t=this.owner.tabBar.controller;null!==t&&t.bar.setView(null)}})],r=[d.TraitViewControllerRef({controllerType:W,binds:!0,observes:!0,get parentView(){return this.owner.binder.view},getTraitViewRef:e=>e.bar,initController(e){this.updateTabStyle(this.owner.tabStyle.value,e)},willAttachController(e){this.owner.callObservers("controllerWillAttachTabBar",e,this.owner)},didAttachController(e){const t=e.bar.view;null!==t&&this.attachTabBarView(t,e)},willDetachController(e){const t=e.bar.view;null!==t&&this.detachTabBarView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachTabBar",e,this.owner)},controllerWillAttachBarView(e,t){this.owner.callObservers("controllerWillAttachTabBarView",e,this.owner),this.attachTabBarView(e,t)},controllerDidDetachBarView(e,t){this.detachTabBarView(e,t),this.owner.callObservers("controllerDidDetachTabBarView",e,this.owner)},attachTabBarView(e,t){const i=this.owner.binder.view;null!==i&&null===i.tabBar.view&&i.tabBar.attachView(e)},detachTabBarView(e,t){e.remove()},controllerDidPressTabHandle(e,t,i){this.owner.didPressTabHandle(e,t,i)},controllerDidLongPressTabHandle(e,t){this.owner.didLongPressTabHandle(e,t)},updateTabStyle(e,t){"bottom"===e?this.insertView():this.removeView()},createController:()=>new Oe})],o=[d.TraitViewControllerSet({controllerType:Ce,binds:!1,ordered:!0,observes:!0,get parentView(){return this.owner.binder.view},getTraitViewRef:e=>e.sheet,initController(e){this.updateTabStyle(this.owner.tabStyle.value,e)},willAttachController(e){this.owner.callObservers("controllerWillAttachTab",e,this.owner)},didAttachController(e){const t=e.sheet.trait;null!==t&&this.attachTabTrait(t,e);const i=e.sheet.attachView();this.attachTabView(i,e);const s=e.handle.insertController();this.attachTabHandle(s,e),null===this.owner.active.controller&&this.owner.active.setController(e)},willDetachController(e){e===this.owner.active.controller&&this.owner.active.setController(null);const t=e.handle.controller;null!==t&&this.detachTabHandle(t,e);const i=e.sheet.view;null!==i&&this.detachTabView(i,e);const s=e.sheet.trait;null!==s&&this.detachTabTrait(s,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachTab",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachTabTrait",e,t,this.owner),this.attachTrait(e,void 0,t),this.attachTabTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachTabTrait(e,t),this.detachTrait(e),this.owner.callObservers("controllerDidDetachTabTrait",e,t,this.owner)},attachTabTrait(e,t){},detachTabTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachTabView",e,t,this.owner),this.attachTabView(e,t)},controllerDidDetachSheetView(e,t){this.detachTabView(e,t),this.owner.callObservers("controllerDidDetachTabView",e,t,this.owner)},attachTabView(e,t){const i=this.owner.binder.view;null!==i&&i.tabs.attachView(e)},detachTabView(e,t){const i=this.owner.binder.view;null!==i&&i.tabs.deleteView(e)},controllerWillAttachHandle(e,t){this.owner.callObservers("controllerWillAttachTabHandle",e,t,this.owner),this.attachTabHandle(e,t)},controllerDidDetachHandle(e,t){this.detachTabHandle(e,t),this.owner.callObservers("controllerDidDetachTabHandle",e,t,this.owner)},attachTabHandle(e,i){if("mode"===this.owner.tabStyle.value){const s=t.Objects.getNextValue(this.controllers,i.uid),l=void 0!==s?s.handle.controller:null;this.owner.modeTools.attachController(e,l)}},detachTabHandle(e,t){"mode"===this.owner.tabStyle.value&&this.owner.modeTools.deleteController(e),e.remove()},updateTabStyle(e,i){const s=i.handle.controller;if(null!==s)if("mode"===e){const e=t.Objects.getNextValue(this.controllers,i.uid),l=void 0!==e?e.handle.controller:null;this.owner.modeTools.attachController(s,l)}else this.owner.modeTools.detachController(s)}})],a=[d.TraitViewControllerRef({controllerType:Ce,consumed:!0,binds:!1,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.callObservers("controllerWillAttachActive",e,this.owner)},didAttachController(e){this.owner.fullBleed.setIntrinsic(e.fullBleed.value);const t=e.sheet.trait;null!==t&&this.attachActiveTrait(t,e);const i=e.sheet.attachView();null!==i&&this.attachActiveView(i,e),e.handle.setActive(!0)},willDetachController(e){e.handle.setActive(!1);const t=e.sheet.view;null!==t&&this.detachActiveView(t,e);const i=e.sheet.trait;null!==i&&this.detachActiveTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachActive",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachActiveTrait",e,this.owner),this.attachActiveTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachActiveTrait(e,t),this.owner.callObservers("controllerDidDetachActiveTrait",e,this.owner)},attachActiveTrait(e,t){},detachActiveTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachActiveView",e,this.owner),this.attachActiveView(e,t)},controllerDidDetachSheetView(e,t){this.detachActiveView(e,t),this.owner.callObservers("controllerDidDetachActiveView",e,this.owner)},attachActiveView(e,t){const i=this.owner.binder.view;null!==i&&i.active.setView(e)},detachActiveView(e,t){const i=this.owner.binder.view;null!==i&&i.active.deleteView()},controllerDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)},controllerDidScrollSheetView(e,t){this.owner.callObservers("controllerDidScrollSheetView",e,this.owner)}})],u(null,null,s,{kind:"field",name:"folioStyle",static:!1,private:!1,access:{has:e=>"folioStyle"in e,get:e=>e.folioStyle,set:(e,t)=>{e.folioStyle=t}}},c,h),u(null,null,l,{kind:"field",name:"tabStyle",static:!1,private:!1,access:{has:e=>"tabStyle"in e,get:e=>e.tabStyle,set:(e,t)=>{e.tabStyle=t}}},w,h),u(null,null,n,{kind:"field",name:"binder",static:!1,private:!1,access:{has:e=>"binder"in e,get:e=>e.binder,set:(e,t)=>{e.binder=t}}},p,h),u(null,null,r,{kind:"field",name:"tabBar",static:!1,private:!1,access:{has:e=>"tabBar"in e,get:e=>e.tabBar,set:(e,t)=>{e.tabBar=t}}},g,h),u(null,null,o,{kind:"field",name:"tabs",static:!1,private:!1,access:{has:e=>"tabs"in e,get:e=>e.tabs,set:(e,t)=>{e.tabs=t}}},f,h),u(null,null,a,{kind:"field",name:"active",static:!1,private:!1,access:{has:e=>"active"in e,get:e=>e.active,set:(e,t)=>{e.active=t}}},y,h),e})(),Be=(()=>{var e;let t,o,a,h,c,d,w,p,g,f,y,b,m,V=[],T=[],C=[],k=[],L=[],D=[],S=[],I=[],A=[],O=[],x=[],P=[],B=[],R=[];return e=class e extends n.HtmlView{constructor(e){super(e),this.widthBasis=(v(this,V),v(this,T,void 0)),this.heightBasis=v(this,C,void 0),this.unitWidth=v(this,k,void 0),this.unitHeight=v(this,L,void 0),this.minPanelHeight=v(this,D,void 0),this.panelStyle=v(this,S,void 0),this.paneLayout=v(this,I,void 0),this.minFrameWidth=v(this,A,void 0),this.minFrameHeight=v(this,O,void 0),this.header=v(this,x,void 0),this.headerTitle=v(this,P,void 0),this.headerSubtitle=v(this,B,void 0),this.panes=v(this,R,void 0),this.initPanel(),e.addEventListener("scroll",this.onPanelScroll.bind(this))}initPanel(){this.setIntrinsic({classList:["panel"],style:{position:"relative",boxSizing:"border-box",overflow:"hidden"}}),this.panelStyle.applyPanelStyle(this.panelStyle.value)}onResize(){super.onResize(),this.resizePanel()}resizePanel(){if(!this.paneLayout.derived){const e=this.widthBasis.value,t=this.heightBasis.value,i=void 0!==e?e:this.style.width.pxValue(),s=void 0!==t?t:this.style.height.pxValue();let l;l=i>=this.minFrameWidth.value&&s>=this.minFrameHeight.value?"frame":"stack",this.paneLayout.setIntrinsic(l)}if(0===this.panes.viewCount){const e=this.widthBasis.value;void 0!==e&&this.style.width.setIntrinsic(e);const t=this.heightBasis.value;void 0!==t&&this.style.height.setIntrinsic(t)}}processChildren(e,t){if(0!=(e&r.View.NeedsResize)&&0!==this.panes.viewCount){this.paneLayout.recohere(this.updateTime);"frame"===this.paneLayout.value?this.resizeFrameChildren(e,t):this.resizeStackChildren(e,t)}else super.processChildren(e,t)}resizeFrameChildren(t,i){let s=this.style.paddingLeft.pxValue(),l=this.style.paddingTop.pxValue();const n=this.widthBasis.value,r=this.heightBasis.value,o=(void 0!==n?n:this.style.width.pxValue())-s,a=(void 0!==r?r:this.style.height.pxValue())-l,h=s;let c=0,d=null;super.processChildren(t,(function(t,n){if(t instanceof e){if(null===d){let i=0,s=t;for(;null!==s;){const t=s.unitWidth.value;if(!(null===d||i+t<1.01))break;i+=t,d=s,s=s.getNextSibling(e)}}const i=t.unitWidth.value*o,n=Math.max(t.minPanelHeight.value,t.unitHeight.value*a);t.setIntrinsic({style:{left:s,top:l,visibility:void 0},widthBasis:i-t.style.marginLeft.pxValue()-t.style.marginRight.pxValue(),heightBasis:n-t.style.marginTop.pxValue()-t.style.marginBottom.pxValue()}),s+=i}i.call(this,t,n),t instanceof e&&(c=Math.max(c,t.style.marginTop.pxValue()+t.style.height.pxValue()+t.style.marginBottom.pxValue()),t===d&&(s=h,l+=c,c=0,d=null))})),void 0!==n&&this.style.width.setIntrinsic(o),void 0!==r&&this.style.height.setIntrinsic(l)}resizeStackChildren(t,i){const s=this.style.paddingLeft.pxValue();let l=this.style.paddingTop.pxValue();const n=this.widthBasis.value,r=this.heightBasis.value,o=(void 0!==n?n:this.style.width.pxValue())-s,a=(void 0!==r?r:this.style.height.pxValue())-l;super.processChildren(t,(function(t,n){if(t instanceof e){const e=Math.max(t.minPanelHeight.value,t.unitHeight.value*a);t.setIntrinsic({style:{left:s,top:l},widthBasis:o-t.style.marginLeft.pxValue()-t.style.marginRight.pxValue(),heightBasis:e-t.style.marginTop.pxValue()-t.style.marginBottom.pxValue()})}i.call(this,t,n),t instanceof e&&(t.style.visibility.setIntrinsic(void 0),l+=t.style.marginTop.pxValue()+t.style.height.pxValue()+t.style.marginBottom.pxValue())})),void 0!==n&&this.style.width.setIntrinsic(o),void 0!==r&&this.style.height.setIntrinsic(l+this.style.paddingBottom.pxValue())}onPanelScroll(e){this.requireUpdate(r.View.NeedsScroll)}},t=[i.Property({valueType:Number,updateFlags:r.View.NeedsResize})],o=[i.Property({valueType:Number,updateFlags:r.View.NeedsResize})],a=[i.Property({valueType:Number,value:1,didSetValue(e){this.owner.callObservers("viewDidSetUnitWidth",e,this.owner)}})],h=[i.Property({valueType:Number,value:1,didSetValue(e){this.owner.callObservers("viewDidSetUnitHeight",e,this.owner)}})],c=[i.Property({valueType:Number,value:180,inherits:!0,didSetValue(e){this.owner.callObservers("viewDidSetMinPanelHeight",e,this.owner)}})],d=[i.Property({valueType:String,value:"none",updateFlags:r.View.NeedsResize,didSetValue(e){this.applyPanelStyle(e),this.owner.callObservers("viewDidSetPanelStyle",e,this.owner)},applyPanelStyle(e){const t=this.owner;"card"===e?(t.classList.add("panel-card"),t.style.setIntrinsic({margin:6,borderRadius:4,backgroundColor:l.Look.backgroundColor}),t.modifyTheme(l.Feel.default,[[l.Feel.raised,1]])):(t.classList.remove("panel-card"),t.style.setIntrinsic({margin:0,borderRadius:null,backgroundColor:null}),t.modifyTheme(l.Feel.default,[[l.Feel.raised,void 0]]))}})],w=[i.Property({valueType:String,value:"frame",inherits:!0,updateFlags:r.View.NeedsResize,didSetValue(e){this.owner.callObservers("viewDidSetPaneLayout",e,this.owner)}})],p=[i.Property({valueType:Number,value:720,inherits:!0,updateFlags:r.View.NeedsResize})],g=[i.Property({valueType:Number,value:540,inherits:!0,updateFlags:r.View.NeedsResize})],f=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,willAttachView(e){this.owner.callObservers("viewWillAttachHeader",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachHeader",e,this.owner)},insertChild(e,t,i,s){null!==i?e.insertChild(t,i,s):e.prependChild(t,s)},createView(){return super.createView().setIntrinsic({classList:["panel-header"],style:{display:"flex",justifyContent:"space-between",position:"absolute",left:0,top:0,width:s.Length.pct(100),height:30,paddingLeft:12,paddingRight:12,boxSizing:"border-box",userSelect:"none",zIndex:1}})}})],y=[r.ViewRef({viewType:n.HtmlView,viewKey:"panel-title",binds:!0,get parentView(){return this.owner.header.insertView()},willAttachView(e){this.owner.callObservers("viewWillAttachHeaderTitle",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachHeaderTitle",e,this.owner)},insertChild(e,t,i,s){null===i&&(i=this.owner.headerSubtitle.view),e.insertChild(t,i,s)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text(e),t}return super.fromLike(e)},createView(){return super.createView().setIntrinsic({classList:["header-title"],style:{alignSelf:"center",color:l.Look.legendColor}})}})],b=[r.ViewRef({viewType:n.HtmlView,viewKey:"panel-subtitle",binds:!0,get parentView(){return this.owner.header.insertView()},willAttachView(e){this.owner.callObservers("viewWillAttachHeaderSubtitle",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachHeaderSubtitle",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text(e),t}return super.fromLike(e)},createView(){return super.createView().setIntrinsic({classList:["header-subtitle"],style:{alignSelf:"center",color:l.Look.legendColor}})}})],m=[r.ViewSet({get viewType(){return Be},binds:!0,observes:!0,initView(e){e.style.setIntrinsic({position:"absolute",visibility:"hidden"})},willAttachView(e,t){this.owner.callObservers("viewWillAttachPane",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachPane",e,this.owner)},viewDidSetUnitWidth(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetUnitHeight(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetMinPanelHeight(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetPanelStyle(e,t){this.owner.requireUpdate(r.View.NeedsResize)}})],u(null,null,t,{kind:"field",name:"widthBasis",static:!1,private:!1,access:{has:e=>"widthBasis"in e,get:e=>e.widthBasis,set:(e,t)=>{e.widthBasis=t}}},T,V),u(null,null,o,{kind:"field",name:"heightBasis",static:!1,private:!1,access:{has:e=>"heightBasis"in e,get:e=>e.heightBasis,set:(e,t)=>{e.heightBasis=t}}},C,V),u(null,null,a,{kind:"field",name:"unitWidth",static:!1,private:!1,access:{has:e=>"unitWidth"in e,get:e=>e.unitWidth,set:(e,t)=>{e.unitWidth=t}}},k,V),u(null,null,h,{kind:"field",name:"unitHeight",static:!1,private:!1,access:{has:e=>"unitHeight"in e,get:e=>e.unitHeight,set:(e,t)=>{e.unitHeight=t}}},L,V),u(null,null,c,{kind:"field",name:"minPanelHeight",static:!1,private:!1,access:{has:e=>"minPanelHeight"in e,get:e=>e.minPanelHeight,set:(e,t)=>{e.minPanelHeight=t}}},D,V),u(null,null,d,{kind:"field",name:"panelStyle",static:!1,private:!1,access:{has:e=>"panelStyle"in e,get:e=>e.panelStyle,set:(e,t)=>{e.panelStyle=t}}},S,V),u(null,null,w,{kind:"field",name:"paneLayout",static:!1,private:!1,access:{has:e=>"paneLayout"in e,get:e=>e.paneLayout,set:(e,t)=>{e.paneLayout=t}}},I,V),u(null,null,p,{kind:"field",name:"minFrameWidth",static:!1,private:!1,access:{has:e=>"minFrameWidth"in e,get:e=>e.minFrameWidth,set:(e,t)=>{e.minFrameWidth=t}}},A,V),u(null,null,g,{kind:"field",name:"minFrameHeight",static:!1,private:!1,access:{has:e=>"minFrameHeight"in e,get:e=>e.minFrameHeight,set:(e,t)=>{e.minFrameHeight=t}}},O,V),u(null,null,f,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}}},x,V),u(null,null,y,{kind:"field",name:"headerTitle",static:!1,private:!1,access:{has:e=>"headerTitle"in e,get:e=>e.headerTitle,set:(e,t)=>{e.headerTitle=t}}},P,V),u(null,null,b,{kind:"field",name:"headerSubtitle",static:!1,private:!1,access:{has:e=>"headerSubtitle"in e,get:e=>e.headerSubtitle,set:(e,t)=>{e.headerSubtitle=t}}},B,V),u(null,null,m,{kind:"field",name:"panes",static:!1,private:!1,access:{has:e=>"panes"in e,get:e=>e.panes,set:(e,t)=>{e.panes=t}}},R,V),e.InsertChildFlags=r.View.InsertChildFlags|e.NeedsResize,e.RemoveChildFlags=r.View.RemoveChildFlags|e.NeedsResize,e})(),Re=(()=>{var e;let t,i,s,l,o,a=[],h=[],c=[],w=[],p=[],g=[];return e=class extends d.Controller{constructor(){super(...arguments),this.panel=(v(this,a),v(this,h,void 0)),this.panelHeader=v(this,c,void 0),this.panelTitle=v(this,w,void 0),this.panelSubtitle=v(this,p,void 0),this.panes=v(this,g,void 0)}},t=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachPanelTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachPanelTrait",e,this.owner)},viewType:Be,observesView:!0,didAttachView(e,t){this.owner.panelHeader.setView(e.header.view),this.owner.panelTitle.setView(e.headerTitle.view),this.owner.panelSubtitle.setView(e.headerSubtitle.view)},willDetachView(e){this.owner.panelHeader.setView(null),this.owner.panelTitle.setView(null),this.owner.panelSubtitle.setView(null)},willAttachView(e){this.owner.callObservers("controllerWillAttachPanelView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachPanelView",e,this.owner)},viewWillAttachHeader(e){this.owner.panelHeader.setView(e)},viewDidDetachHeader(e){this.owner.panelHeader.setView(null)},viewWillAttachHeaderTitle(e){this.owner.panelTitle.setView(e)},viewDidDetachHeaderTitle(e){this.owner.panelTitle.setView(null)},viewWillAttachHeaderSubtitle(e){this.owner.panelSubtitle.setView(e)},viewDidDetachHeaderSubtitle(e){this.owner.panelSubtitle.setView(null)}})],i=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,get parentView(){return this.owner.panel.attachView().header.parentView},initView(e){this.owner.panel.attachView().header.setView(e)},createView(){return this.owner.panel.attachView().header.createView()}})],s=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,get parentView(){return this.owner.panel.attachView().headerTitle.parentView},initView(e){this.owner.panel.attachView().headerTitle.setView(e)},fromLike(e){return void 0===e||"string"==typeof e?this.owner.panel.attachView().headerTitle.fromLike(e):super.fromLike(e)},createView(){return this.owner.panel.attachView().headerTitle.createView()}})],l=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,get parentView(){return this.owner.panel.attachView().headerSubtitle.parentView},initView(e){this.owner.panel.attachView().headerSubtitle.setView(e)},fromLike(e){return void 0===e||"string"==typeof e?this.owner.panel.attachView().headerSubtitle.fromLike(e):super.fromLike(e)},createView(){return this.owner.panel.attachView().headerSubtitle.createView()}})],o=[d.TraitViewControllerSet({get controllerType(){return Re},binds:!0,observes:!0,get parentView(){return this.owner.panel.attachView()},getTraitViewRef:e=>e.panel,willAttachController(e){this.owner.callObservers("controllerWillAttachPane",e,this.owner)},didAttachController(e){const t=e.panel.trait;null!==t&&this.attachPaneTrait(t,e);const i=e.panel.view;null!==i&&this.attachPaneView(i,e)},willDetachController(e){const t=e.panel.view;null!==t&&this.detachPaneView(t,e);const i=e.panel.trait;null!==i&&this.detachPaneTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachPane",e,this.owner)},controllerWillAttachPanelTrait(e,t){this.owner.callObservers("controllerWillAttachPaneTrait",e,t,this.owner),this.attachPaneTrait(e,t)},controllerDidDetachPanelTrait(e,t){this.detachPaneTrait(e,t),this.owner.callObservers("controllerDidDetachPaneTrait",e,t,this.owner)},attachPaneTrait(e,t){},detachPaneTrait(e,t){},controllerWillAttachPanelView(e,t){this.owner.callObservers("controllerWillAttachPaneView",e,t,this.owner),this.attachPaneView(e,t)},controllerDidDetachPanelView(e,t){this.detachPaneView(e,t),this.owner.callObservers("controllerDidDetachPaneView",e,t,this.owner)},attachPaneView(e,t){},detachPaneView(e,t){e.remove()}})],u(null,null,t,{kind:"field",name:"panel",static:!1,private:!1,access:{has:e=>"panel"in e,get:e=>e.panel,set:(e,t)=>{e.panel=t}}},h,a),u(null,null,i,{kind:"field",name:"panelHeader",static:!1,private:!1,access:{has:e=>"panelHeader"in e,get:e=>e.panelHeader,set:(e,t)=>{e.panelHeader=t}}},c,a),u(null,null,s,{kind:"field",name:"panelTitle",static:!1,private:!1,access:{has:e=>"panelTitle"in e,get:e=>e.panelTitle,set:(e,t)=>{e.panelTitle=t}}},w,a),u(null,null,l,{kind:"field",name:"panelSubtitle",static:!1,private:!1,access:{has:e=>"panelSubtitle"in e,get:e=>e.panelSubtitle,set:(e,t)=>{e.panelSubtitle=t}}},p,a),u(null,null,o,{kind:"field",name:"panes",static:!1,private:!1,access:{has:e=>"panes"in e,get:e=>e.panes,set:(e,t)=>{e.panes=t}}},g,a),e})(),We=(()=>{var e;let t,s=[],l=[];return e=class extends Te{constructor(){super(...arguments),this.panels=(v(this,s),v(this,l,void 0))}initSheet(){super.initSheet(),this.classList.add("board")}processChildren(e,t){0!=(e&r.View.NeedsResize)?this.resizeChildren(e,t):super.processChildren(e,t)}resizeChildren(e,t){const s=this.edgeInsets.value,l=Math.max(this.style.paddingTop.pxValue(),s.insetTop),r=Math.max(this.style.paddingRight.pxValue(),s.insetRight),o=Math.max(this.style.paddingBottom.pxValue(),s.insetBottom),a=Math.max(this.style.paddingLeft.pxValue(),s.insetLeft),h=this.style.width.pxValue()-this.style.marginLeft.pxValue()-a-r-this.style.marginRight.pxValue(),c=this.style.height.pxValue()-this.style.marginTop.pxValue()-l-o-this.style.marginBottom.pxValue(),d=a;let w=l;super.processChildren(e,(function(e,s){if(e instanceof Be){const t=Math.max(e.minPanelHeight.value,e.unitHeight.value*c);e.setIntrinsic({style:{left:d,top:w},widthBasis:h-e.style.marginLeft.pxValue()-e.style.marginRight.pxValue(),heightBasis:t-e.style.marginTop.pxValue()-e.style.marginBottom.pxValue()})}e instanceof n.HtmlView&&e.style.paddingBottom.setState(null===e.nextSibling?this.style.paddingBottom.value:null,i.Affinity.Transient),t.call(this,e,s),e instanceof Be&&(e.style.visibility.setIntrinsic(void 0),w+=e.style.marginTop.pxValue()+e.style.height.pxValue()+e.style.marginBottom.pxValue())}))}},t=[r.ViewSet({viewType:Be,binds:!0,observes:!0,initView(e){e.style.setIntrinsic({position:"absolute",visibility:"hidden"})},willAttachView(e,t){this.owner.callObservers("viewWillAttachPanel",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachPanel",e,this.owner)},viewDidSetUnitWidth(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetUnitHeight(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetMinPanelHeight(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetPanelStyle(e,t){this.owner.requireUpdate(r.View.NeedsResize)}})],u(null,null,t,{kind:"field",name:"panels",static:!1,private:!1,access:{has:e=>"panels"in e,get:e=>e.panels,set:(e,t)=>{e.panels=t}}},l,s),e.InsertChildFlags=r.View.InsertChildFlags|e.NeedsResize,e.RemoveChildFlags=r.View.RemoveChildFlags|e.NeedsResize,e})(),He=(()=>{var e;let t,i,s=[],l=[],n=[];return e=class extends Ce{constructor(){super(...arguments),this.sheet=(v(this,s),v(this,l,void 0)),this.panels=v(this,n,void 0)}},t=[d.TraitViewRef({extends:!0,viewType:We})],i=[d.TraitViewControllerSet({controllerType:Re,binds:!0,observes:!0,get parentView(){return this.owner.sheet.attachView()},getTraitViewRef:e=>e.panel,willAttachController(e){this.owner.callObservers("controllerWillAttachPanel",e,this.owner)},didAttachController(e){const t=e.panel.trait;null!==t&&this.attachPanelTrait(t,e);const i=e.panel.view;null!==i&&this.attachPanelView(i,e)},willDetachController(e){const t=e.panel.view;null!==t&&this.detachPanelView(t,e);const i=e.panel.trait;null!==i&&this.detachPanelTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachPanel",e,this.owner)},controllerWillAttachPanelTrait(e,t){this.owner.callObservers("controllerWillAttachPanelTrait",e,t,this.owner),this.attachPanelTrait(e,t)},controllerDidDetachPanelTrait(e,t){this.detachPanelTrait(e,t),this.owner.callObservers("controllerDidDetachPanelTrait",e,t,this.owner)},attachPanelTrait(e,t){},detachPanelTrait(e,t){},controllerWillAttachPanelView(e,t){this.owner.callObservers("controllerWillAttachPanelView",e,t,this.owner),this.attachPanelView(e,t)},controllerDidDetachPanelView(e,t){this.detachPanelView(e,t),this.owner.callObservers("controllerDidDetachPanelView",e,t,this.owner)},attachPanelView(e,t){},detachPanelView(e,t){e.remove()}})],u(null,null,t,{kind:"field",name:"sheet",static:!1,private:!1,access:{has:e=>"sheet"in e,get:e=>e.sheet,set:(e,t)=>{e.sheet=t}}},l,s),u(null,null,i,{kind:"field",name:"panels",static:!1,private:!1,access:{has:e=>"panels"in e,get:e=>e.panels,set:(e,t)=>{e.panels=t}}},n,s),e})();e.AppBarController=Se,e.BarController=W,e.BarLayout=k,e.BarLayoutInterpolator=L,e.BarView=R,e.BinderController=Pe,e.BinderView=xe,e.BoardController=He,e.BoardView=We,e.ButtonGlow=p,e.ButtonItem=y,e.ButtonMembrane=g,e.ButtonStack=b,e.ButtonToolController=P,e.ButtonToolView=I,e.CellController=Y,e.CellTrait=G,e.CellView=E,e.ColController=he,e.ColLayout=M,e.ColTrait=re,e.ColView=ie,e.DisclosureButton=V,e.DisclosureCellView=U,e.DisclosureColView=ne,e.DrawerButton=Ve,e.DrawerView=me,e.FloatingButton=f,e.FolioController=Ae,e.FolioView=Ie,e.HeaderController=ve,e.HeaderTrait=ue,e.HeaderView=we,e.IconButton=m,e.IconCellController=X,e.IconCellTrait=j,e.IconCellView=q,e.IconColController=de,e.IconColTrait=ae,e.IconColView=le,e.InputTokenView=F,e.LeafController=Q,e.LeafTrait=J,e.LeafView=_,e.NavBarController=ke,e.PanelController=Re,e.PanelView=Be,e.PopoverView=be,e.RowController=te,e.RowTrait=ee,e.RowView=$,e.ScrimView=ye,e.SearchToolController=B,e.SearchToolView=A,e.SheetController=Ce,e.SheetView=Te,e.StackController=De,e.StackView=Le,e.TabBarController=Oe,e.TableController=fe,e.TableLayout=N,e.TableTrait=ge,e.TableView=pe,e.TextCellController=Z,e.TextCellTrait=K,e.TextCellView=z,e.TextColController=ce,e.TextColTrait=oe,e.TextColView=se,e.TitleToolController=x,e.TitleToolView=S,e.TokenView=H,e.ToolController=O,e.ToolLayout=T,e.ToolLayoutInterpolator=C,e.ToolView=D,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
//# sourceMappingURL=swim-ux.min.js.map
